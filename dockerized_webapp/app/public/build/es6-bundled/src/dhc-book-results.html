<html><head></head><body><div hidden="" by-polymer-bundler=""><script>(function(){function e(e,n){if(e!==n){var t=null===e,i=e===void 0,a=e===e,l=null===n,r=n===void 0,d=n===n;if(e>n&&!l||!a||t&&!r&&d||i&&d)return 1;if(e<n&&!t||!d||l&&!i&&a||r&&a)return-1}return 0}function n(e,n,t){for(var i=e.length,a=t?i:-1;t?a--:++a<i;)if(n(e[a],a,e))return a;return-1}function t(e,n,t){if(n!==n)return g(e,t);for(var i=t-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}function i(e){return'function'==typeof e||!1}function a(e){return null==e?'':e+''}function l(e,n){for(var t=-1,i=e.length;++t<i&&-1<n.indexOf(e.charAt(t)););return t}function r(e,n){for(var t=e.length;t--&&-1<n.indexOf(e.charAt(t)););return t}function d(n,t){return e(n.criteria,t.criteria)||n.index-t.index}function o(n,t,i){for(var a=-1,l=n.criteria,r=t.criteria,d=l.length,o=i.length;++a<d;){var p=e(l[a],r[a]);if(p){if(a>=o)return p;var h=i[a];return p*('asc'===h||!0===h?1:-1)}}return n.index-t.index}function p(e){return De[e]}function h(e){return qe[e]}function u(e,n,t){return n?e=Ke[e]:t&&(e=Ve[e]),'\\'+e}function c(e){return'\\'+Ve[e]}function g(e,n,t){for(var i=e.length,a=n+(t?0:-1);t?a--:++a<i;){var l=e[a];if(l!==l)return a}return-1}function s(e){return!!e&&'object'==typeof e}function f(e){return 160>=e&&9<=e&&13>=e||32==e||160==e||5760==e||6158==e||8192<=e&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function y(e,n){for(var t=-1,i=e.length,a=-1,l=[];++t<i;)e[t]===n&&(e[t]=D,l[++a]=t);return l}function x(e,n){for(var t=-1,i=e.length,a=-1,l=[],r;++t<i;){var d=e[t],o=n?n(d,t,e):d;t&&r===o||(r=o,l[++a]=d)}return l}function m(e){for(var n=-1,t=e.length;++n<t&&f(e.charCodeAt(n)););return n}function b(e){for(var n=e.length;n--&&f(e.charCodeAt(n)););return n}function k(e){return $e[e]}function T(_){function f(e){if(s(e)&&!$l(e)&&!(e instanceof ee)){if(e instanceof H)return e;if(sa.call(e,'__chain__')&&sa.call(e,'__wrapped__'))return ai(e)}return new H(e)}function J(){}function H(e,n,t){this.__wrapped__=e,this.__actions__=t||[],this.__chain__=!!n}function ee(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qa,this.__views__=[]}function De(){this.__data__={}}function qe(e){var n=e?e.length:0;for(this.data={hash:Ca(null),set:new ja};n--;)this.push(e[n])}function $e(e,n){var t=e.data,i='string'==typeof n||Ci(n)?t.set.has(n):t.hash[n];return i?0:-1}function Pe(e,n){for(var t=-1,i=e.length,a=-1,l=n.length,r=na(i+l);++t<i;)r[t]=e[t];for(;++a<l;)r[t++]=n[a];return r}function Ke(e,n){var t=-1,i=e.length;for(n||(n=na(i));++t<i;)n[t]=e[t];return n}function Ve(e,n){for(var t=-1,i=e.length;++t<i&&!1!==n(e[t],t,e););return e}function Ye(e,n){for(var t=-1,i=e.length;++t<i;)if(!n(e[t],t,e))return!1;return!0}function Je(e,n,t,i){for(var a=-1,l=e.length,r=i,d=r;++a<l;){var o=e[a],p=+n(o);t(p,r)&&(r=p,d=o)}return d}function Ge(e,n){for(var t=-1,i=e.length,a=-1,l=[],r;++t<i;)r=e[t],n(r,t,e)&&(l[++a]=r);return l}function Xe(e,n){for(var t=-1,i=e.length,a=na(i);++t<i;)a[t]=n(e[t],t,e);return a}function Ze(e,n){for(var t=-1,i=n.length,a=e.length;++t<i;)e[a+t]=n[t];return e}function He(e,n,t,i){var a=-1,l=e.length;for(i&&l&&(t=e[++a]);++a<l;)t=n(t,e[a],a,e);return t}function nn(e,n){for(var t=-1,i=e.length;++t<i;)if(n(e[t],t,e))return!0;return!1}function tn(e,n){for(var t=e.length,i=0;t--;)i+=+n(e[t])||0;return i}function an(e,n,t,i){return void 0!==e&&sa.call(i,t)?e:n}function ln(e,n,t){for(var i=-1,a=er(n),l=a.length;++i<l;){var r=a[i],d=e[r],o=t(d,n[r],r,e,n);((o===o?o!==d:d===d)||void 0===d&&!(r in e))&&(e[r]=o)}return e}function rn(e,n){return null==n?e:on(n,er(n),e)}function dn(e,n){for(var t=-1,i=null==e,a=!i&&qt(e),l=a?e.length:0,r=n.length,d=na(r),o;++t<r;)o=n[t],d[t]=a?$t(o,l)?e[o]:void 0:i?void 0:e[o];return d}function on(e,n,t){t||(t={});for(var i=-1,a=n.length,l;++i<a;)l=n[i],t[l]=e[l];return t}function pn(e,n,t){var i=typeof e;return'function'==i?void 0===n?e:Jn(e,n,t):null==e?Xi:'object'==i?Nn(e):void 0===n?ea(e):On(e,n)}function hn(e,n,t,i,a,l,r){var d;if(t&&(d=a?t(e,i,a):t(e)),void 0!==d)return d;if(!Ci(e))return e;var o=$l(e);if(!o){var p=ya.call(e),h=p==Y;if(p!=X&&p!=q&&(!h||a))return Me[p]?Mt(e,p,n):a?e:{};if(d=zt(h?{}:e),!n)return rn(d,e)}else if(d=Lt(e),!n)return Ke(e,d);l||(l=[]),r||(r=[]);for(var u=l.length;u--;)if(l[u]==e)return r[u];return l.push(e),r.push(d),(o?Ve:bn)(e,function(i,a){d[a]=hn(i,n,t,a,e,l,r)}),d}function un(e,n,t){if('function'!=typeof e)throw new ha(M);return va(function(){e.apply(void 0,t)},n)}function cn(e,n){var i=e?e.length:0,a=[];if(!i)return a;var l=-1,r=Wt(),d=r===t,o=d&&n.length>=B?it(n):null,p=n.length;o&&(r=$e,d=!1,n=o);outer:for(;++l<i;){var h=e[l];if(d&&h===h){for(var u=p;u--;)if(n[u]===h)continue outer;a.push(h)}else 0>r(n,h,0)&&a.push(h)}return a}function _n(e,n){var t=!0;return Za(e,function(e,i,a){return t=!!n(e,i,a),t}),t}function gn(e,n,t,i){var a=i,l=a;return Za(e,function(e,r,d){var o=+n(e,r,d);(t(o,a)||o===i&&o===l)&&(a=o,l=e)}),l}function sn(e,n,t,i){var a=e.length;for(t=null==t?0:+t||0,0>t&&(t=-t>a?0:a+t),i=void 0===i||i>a?a:+i||0,0>i&&(i+=a),a=t>i?0:i>>>0,t>>>=0;t<a;)e[t++]=n;return e}function fn(e,n){var t=[];return Za(e,function(e,i,a){n(e,i,a)&&t.push(e)}),t}function yn(e,n,t,i){var a;return t(e,function(e,t,l){if(n(e,t,l))return a=i?t:e,!1}),a}function xn(e,n,t,i){i||(i=[]);for(var a=-1,l=e.length,r;++a<l;)r=e[a],s(r)&&qt(r)&&(t||$l(r)||gt(r))?n?xn(r,n,t,i):Ze(i,r):!t&&(i[i.length]=r);return i}function mn(e,n){return Qa(e,n,Di)}function bn(e,n){return Qa(e,n,er)}function kn(e,n){return el(e,n,er)}function Tn(e,n){for(var t=-1,i=n.length,a=-1,l=[],r;++t<i;)r=n[t],Ri(e[r])&&(l[++a]=r);return l}function In(e,n,t){if(null!=e){void 0!==t&&t in ti(e)&&(n=[t]);for(var i=0,a=n.length;null!=e&&i<a;)e=e[n[i++]];return i&&i==a?e:void 0}}function An(e,n,t,i,a,l){return e===n||(null!=e&&null!=n&&(Ci(e)||s(n))?jn(e,n,An,t,i,a,l):e!==e&&n!==n)}function jn(e,n,t,i,a,l,r){var d=$l(e),o=$l(n),p=$,h=$;d||(p=ya.call(e),p==q?p=X:p!=X&&(d=Bi(e))),o||(h=ya.call(n),h==q?h=X:h!=X&&(o=Bi(n)));var u=p==X,c=h==X,_=p==h;if(_&&!(d||u))return Rt(e,n,p);if(!a){var g=u&&sa.call(e,'__wrapped__'),s=c&&sa.call(n,'__wrapped__');if(g||s)return t(g?e.value():e,s?n.value():n,i,a,l,r)}if(!_)return!1;l||(l=[]),r||(r=[]);for(var f=l.length;f--;)if(l[f]==e)return r[f]==n;l.push(e),r.push(n);var y=(d?Ot:Ct)(e,n,t,i,a,l,r);return l.pop(),r.pop(),y}function vn(e,n,t){var i=n.length,a=i,l=!t;if(null==e)return!a;for(e=ti(e);i--;){var r=n[i];if(l&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++i<a;){r=n[i];var d=r[0],o=e[d],p=r[1];if(!(l&&r[2])){var h=t?t(o,p,d):void 0;if(void 0===h?!An(p,o,t,!0):!h)return!1}else if(void 0===o&&!(d in e))return!1}return!0}function wn(e,n){var t=-1,i=qt(e)?na(e.length):[];return Za(e,function(e,a,l){i[++t]=n(e,a,l)}),i}function Nn(e){var n=St(e);if(1==n.length&&n[0][2]){var t=n[0][0],i=n[0][1];return function(e){return null!=e&&e[t]===i&&(void 0!==i||t in ti(e))}}return function(e){return vn(e,n)}}function On(e,n){var t=$l(e),i=Kt(e)&&Jt(n),a=e+'';return e=ii(e),function(l){if(null==l)return!1;var r=a;if(l=ti(l),(t||!i)&&!(r in l)){if(l=1==e.length?l:In(l,Bn(e,0,-1)),null==l)return!1;r=pi(e),l=ti(l)}return l[r]===n?void 0!==n||r in l:An(n,l[r],void 0,!0)}}function Rn(e,n,t,i,a){if(!Ci(e))return e;var l=qt(n)&&($l(n)||Bi(n)),r=l?void 0:er(n);return Ve(r||n,function(d,o){if(r&&(o=d,d=n[o]),s(d))i||(i=[]),a||(a=[]),Cn(e,n,o,Rn,t,i,a);else{var p=e[o],h=t?t(p,d,o,e,n):void 0,u=void 0===h;u&&(h=d),(void 0!==h||l&&!(o in e))&&(u||(h===h?h!==p:p===p))&&(e[o]=h)}}),e}function Cn(e,n,t,i,a,l,r){for(var d=l.length,o=n[t];d--;)if(l[d]==o)return void(e[t]=r[d]);var p=e[t],h=a?a(p,o,t,e,n):void 0,u=void 0===h;u&&(h=o,qt(o)&&($l(o)||Bi(o))?h=$l(p)?p:qt(p)?Ke(p):[]:Wi(o)||gt(o)?h=gt(p)?zi(p):Wi(p)?p:{}:u=!1),l.push(o),r.push(h),u?e[t]=i(h,o,a,l,r):(h===h?h!==p:p===p)&&(e[t]=h)}function En(e){return function(n){return null==n?void 0:n[e]}}function Un(e){var n=e+'';return e=ii(e),function(t){return In(t,e,n)}}function Wn(e,n){for(var t=e?n.length:0,i;t--;)if(i=n[t],i!=a&&$t(i)){var a=i;wa.call(e,i,1)}return e}function Sn(e,n){return e+Ea(Ma()*(n-e+1))}function Fn(e,n,t,i,a){return a(e,function(e,a,l){t=i?(i=!1,e):n(t,e,a,l)}),t}function Bn(e,n,t){var i=-1,a=e.length;n=null==n?0:+n||0,0>n&&(n=-n>a?0:a+n),t=void 0===t||t>a?a:+t||0,0>t&&(t+=a),a=n>t?0:t-n>>>0,n>>>=0;for(var l=na(a);++i<a;)l[i]=e[i+n];return l}function Ln(e,n){var t;return Za(e,function(e,i,a){return t=n(e,i,a),!t}),!!t}function zn(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}function Mn(e,n,t){var i=Et(),a=-1;n=Xe(n,function(e){return i(e)});var l=wn(e,function(e){var t=Xe(n,function(n){return n(e)});return{criteria:t,index:++a,value:e}});return zn(l,function(e,n){return o(e,n,t)})}function Dn(e,n){var t=0;return Za(e,function(e,i,a){t+=+n(e,i,a)||0}),t}function qn(e,n){var i=-1,a=Wt(),l=e.length,r=a===t,d=r&&l>=B,o=d?it():null,p=[];o?(a=$e,r=!1):(d=!1,o=n?[]:p);outer:for(;++i<l;){var h=e[i],u=n?n(h,i,e):h;if(r&&h===h){for(var c=o.length;c--;)if(o[c]===u)continue outer;n&&o.push(u),p.push(h)}else 0>a(o,u,0)&&((n||d)&&o.push(u),p.push(h))}return p}function $n(e,n){for(var t=-1,i=n.length,a=na(i);++t<i;)a[t]=e[n[t]];return a}function Pn(e,n,t,i){for(var a=e.length,l=i?a:-1;(i?l--:++l<a)&&n(e[l],l,e););return t?Bn(e,i?0:l,i?l+1:a):Bn(e,i?l+1:0,i?a:l)}function Kn(e,n){var t=e;t instanceof ee&&(t=t.value());for(var i=-1,a=n.length,l;++i<a;)l=n[i],t=l.func.apply(l.thisArg,Ze([t],l.args));return t}function Vn(e,n,t){var i=0,a=e?e.length:i;if('number'==typeof n&&n===n&&a<=Ka){for(;i<a;){var l=i+a>>>1,r=e[l];(t?r<=n:r<n)&&null!==r?i=l+1:a=l}return a}return Yn(e,n,Xi,t)}function Yn(e,n,t,i){n=t(n);for(var a=0,l=e?e.length:0,r=n!==n,d=null===n,o=void 0===n;a<l;){var p=Ea((a+l)/2),h=t(e[p]),u=void 0!==h,c=h===h;if(r)var _=c||i;else _=d?c&&u&&(i||null!=h):o?c&&(i||u):null!=h&&(i?h<=n:h<n);_?a=p+1:l=p}return Ba(l,Pa)}function Jn(e,n,t){return'function'==typeof e?void 0===n?e:1===t?function(t){return e.call(n,t)}:3===t?function(t,i,a){return e.call(n,t,i,a)}:4===t?function(t,i,a,l){return e.call(n,t,i,a,l)}:5===t?function(t,i,a,l,r){return e.call(n,t,i,a,l,r)}:function(){return e.apply(n,arguments)}:Xi}function Gn(e){var n=new ba(e.byteLength),t=new Na(n);return t.set(new Na(e)),n}function Xn(e,n,t){for(var i=t.length,a=-1,l=Fa(e.length-i,0),r=-1,d=n.length,o=na(d+l);++r<d;)o[r]=n[r];for(;++a<i;)o[t[a]]=e[a];for(;l--;)o[r++]=e[a++];return o}function Zn(e,n,t){for(var i=-1,a=t.length,l=-1,r=Fa(e.length-a,0),d=-1,o=n.length,p=na(r+o);++l<r;)p[l]=e[l];for(var h=l;++d<o;)p[h+d]=n[d];for(;++i<a;)p[h+t[i]]=e[l++];return p}function Hn(e,n){return function(t,i,a){var l=n?n():{};if(i=Et(i,a,3),$l(t))for(var r=-1,d=t.length,o;++r<d;)o=t[r],e(l,o,i(o,r,t),t);else Za(t,function(n,t,a){e(l,n,i(n,t,a),a)});return l}}function Qn(e){return vi(function(n,t){var i=-1,a=null==n?0:t.length,l=2<a?t[a-2]:void 0,r=2<a?t[2]:void 0,d=1<a?t[a-1]:void 0;for('function'==typeof l?(l=Jn(l,d,5),a-=2):(l='function'==typeof d?d:void 0,a-=l?1:0),r&&Pt(t[0],t[1],r)&&(l=3>a?void 0:l,a=1);++i<a;){var o=t[i];o&&e(n,o,l)}return n})}function et(e,n){return function(t,i){var a=t?il(t):0;if(!Yt(a))return e(t,i);for(var l=n?a:-1,r=ti(t);(n?l--:++l<a)&&!1!==i(r[l],l,r););return t}}function nt(e){return function(n,t,i){for(var a=ti(n),l=i(n),r=l.length,d=e?r:-1,o;(e?d--:++d<r)&&(o=l[d],!1!==t(a[o],o,a)););return n}}function tt(e,n){function t(){var a=this&&this!==Qe&&this instanceof t?i:e;return a.apply(n,arguments)}var i=dt(e);return t}function it(e){return Ca&&ja?new qe(e):null}function rt(e){return function(n){for(var t=-1,i=Ji(Ki(n)),a=i.length,l='';++t<a;)l=e(l,i[t],t);return l}}function dt(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);}var t=Xa(e.prototype),i=e.apply(t,n);return Ci(i)?i:t}}function ot(e){function n(t,i,a){a&&Pt(t,i,a)&&(i=void 0);var l=Nt(t,e,void 0,void 0,void 0,void 0,void 0,i);return l.placeholder=n.placeholder,l}return n}function pt(e,n){return vi(function(t){var i=t[0];return null==i?i:(t.push(n),e.apply(void 0,t))})}function ht(e,n){return function(t,i,a){if(a&&Pt(t,i,a)&&(i=void 0),i=Et(i,a,3),1==i.length){t=$l(t)?t:ni(t);var l=Je(t,i,e,n);if(!(t.length&&l===n))return l}return gn(t,i,e,n)}}function ut(e,t){return function(i,a,l){if(a=Et(a,l,3),$l(i)){var r=n(i,a,t);return-1<r?i[r]:void 0}return yn(i,a,e)}}function ct(e){return function(t,i,a){return t&&t.length?(i=Et(i,a,3),n(t,i,e)):-1}}function _t(e){return function(n,t,i){return t=Et(t,i,3),yn(n,t,e,!0)}}function st(e){return function(){for(var n=arguments.length,t=e?n:-1,i=0,a=na(n),l,r;e?t--:++t<n;){if(r=a[i++]=arguments[t],'function'!=typeof r)throw new ha(M);!l&&H.prototype.thru&&'wrapper'==Ut(r)&&(l=new H([],!0))}for(t=l?-1:n;++t<n;){r=a[t];var d=Ut(r),o='wrapper'==d?tl(r):void 0;l=o&&Vt(o[0])&&o[1]==(C|w|O|E)&&!o[4].length&&1==o[9]?l[Ut(o[0])].apply(l,o[3]):1==r.length&&Vt(r)?l[d]():l.thru(r)}return function(){var e=arguments,t=e[0];if(l&&1==e.length&&$l(t)&&t.length>=B)return l.plant(t).value();for(var i=0,r=n?a[i].apply(this,e):t;++i<n;)r=a[i].call(this,r);return r}}}function ft(e,n){return function(t,i,a){return'function'==typeof i&&void 0===a&&$l(t)?e(t,i):n(t,Jn(i,a,3))}}function yt(e){return function(n,t,i){return('function'!=typeof t||void 0!==i)&&(t=Jn(t,i,3)),e(n,t,Di)}}function xt(e){return function(n,t,i){return('function'!=typeof t||void 0!==i)&&(t=Jn(t,i,3)),e(n,t)}}function mt(e){return function(n,t,i){var a={};return t=Et(t,i,3),bn(n,function(n,i,l){var r=t(n,i,l);i=e?r:i,n=e?n:r,a[i]=n}),a}}function bt(e){return function(n,t,i){return n=a(n),(e?n:'')+At(n,t,i)+(e?'':n)}}function kt(e){var n=vi(function(t,i){var a=y(i,n.placeholder);return Nt(t,e,void 0,i,a)});return n}function Tt(e,n){return function(t,i,a,l){var r=3>arguments.length;return'function'==typeof i&&void 0===l&&$l(t)?e(t,i,a,r):Fn(t,Et(i,l,4),a,r,n)}}function It(e,n,t,i,a,l,r,d,o,p){function h(){for(var m=arguments.length,b=m,k=na(m);b--;)k[b]=arguments[b];if(i&&(k=Xn(k,i,a)),l&&(k=Zn(k,l,r)),g||f){var T=h.placeholder,I=y(k,T);if(m-=I.length,m<p){var v=d?Ke(d):void 0,w=Fa(p-m,0),N=g?I:void 0,C=g?void 0:I,E=g?k:void 0,U=g?void 0:k;n|=g?O:R,n&=~(g?R:O),s||(n&=~(A|j));var W=[e,n,t,E,N,U,C,v,o,w],S=It.apply(void 0,W);return Vt(e)&&al(S,W),S.placeholder=T,S}}var F=c?t:this,B=_?F[e]:e;return d&&(k=Qt(k,d)),u&&o<k.length&&(k.length=o),this&&this!==Qe&&this instanceof h&&(B=x||dt(e)),B.apply(F,k)}var u=n&C,c=n&A,_=n&j,g=n&w,s=n&v,f=n&N,x=_?void 0:dt(e);return h}function At(e,n,t){var i=e.length;if(n=+n,i>=n||!Wa(n))return'';var a=n-i;return t=null==t?' ':t+'',Vi(t,Ra(a/t.length)).slice(0,a)}function jt(e,n,t,i){function a(){for(var n=-1,d=arguments.length,o=-1,p=i.length,h=na(p+d);++o<p;)h[o]=i[o];for(;d--;)h[o++]=arguments[++n];var u=this&&this!==Qe&&this instanceof a?r:e;return u.apply(l?t:this,h)}var l=n&A,r=dt(e);return a}function vt(e){var n=la[e];return function(e,t){return t=void 0===t?0:+t||0,t?(t=Ia(10,t),n(e*t)/t):n(e)}}function wt(e){return function(n,t,i,a){var l=Et(i);return null==i&&l===pn?Vn(n,t,e):Yn(n,t,l(i,a,1),e)}}function Nt(e,n,t,i,a,l,r,d){var o=n&j;if(!o&&'function'!=typeof e)throw new ha(M);var p=i?i.length:0;if(p||(n&=~(O|R),i=a=void 0),p-=a?a.length:0,n&R){var h=i,u=a;i=a=void 0}var c=o?void 0:tl(e),_=[e,n,t,i,a,h,u,l,r,d];if(c&&(Gt(_,c),n=_[1],d=_[9]),_[9]=null==d?o?0:e.length:Fa(d-p,0)||0,n==A)var g=tt(_[0],_[2]);else g=n!=O&&n!=(A|O)||_[4].length?It.apply(void 0,_):jt.apply(void 0,_);var s=c?nl:al;return s(g,_)}function Ot(e,n,t,i,a,l,r){var d=-1,o=e.length,p=n.length;if(o!=p&&!(a&&p>o))return!1;for(;++d<o;){var h=e[d],u=n[d],c=i?i(a?u:h,a?h:u,d):void 0;if(void 0!==c){if(c)continue;return!1}if(a){if(!nn(n,function(e){return h===e||t(h,e,i,a,l,r)}))return!1;}else if(!(h===u||t(h,u,i,a,l,r)))return!1}return!0}function Rt(e,n,t){return t===P||t===K?+e==+n:t===V?e.name==n.name&&e.message==n.message:t===G?e==+e?e==+n:n!=+n:(t===Z||t===Q)&&e==n+''}function Ct(e,n,t,i,a,l,r){var d=er(e),o=d.length,p=er(n),h=p.length;if(o!=h&&!a)return!1;for(var u=o,c;u--;)if(c=d[u],a?!(c in n):!sa.call(n,c))return!1;for(var _=a;++u<o;){c=d[u];var g=e[c],s=n[c],f=i?i(a?s:g,a?g:s,c):void 0;if(void 0===f?!t(g,s,i,a,l,r):!f)return!1;_||(_='constructor'==c)}if(!_){var y=e.constructor,x=n.constructor;if(y!=x&&'constructor'in e&&'constructor'in n&&!('function'==typeof y&&y instanceof y&&'function'==typeof x&&x instanceof x))return!1}return!0}function Et(e,n,t){var i=f.callback||Gi;return i=i===Gi?pn:i,t?i(e,n,t):i}function Ut(e){for(var n=e.name+'',t=Ja[n],i=t?t.length:0;i--;){var a=t[i],l=a.func;if(null==l||l==e)return a.name}return n}function Wt(e,n,i){var a=f.indexOf||oi;return a=a===oi?t:a,e?a(e,n,i):a}function St(e){for(var n=qi(e),t=n.length;t--;)n[t][2]=Jt(n[t][1]);return n}function Ft(e,n){var t=null==e?void 0:e[n];return Ei(t)?t:void 0}function Bt(e,n,t){for(var i=-1,a=t.length;++i<a;){var l=t[i],r=l.size;switch(l.type){case'drop':e+=r;break;case'dropRight':n-=r;break;case'take':n=Ba(n,e+r);break;case'takeRight':e=Fa(e,n-r);}}return{start:e,end:n}}function Lt(e){var n=e.length,t=new e.constructor(n);return n&&'string'==typeof e[0]&&sa.call(e,'index')&&(t.index=e.index,t.input=e.input),t}function zt(e){var n=e.constructor;return'function'==typeof n&&n instanceof n||(n=da),new n}function Mt(e,n,t){var i=e.constructor;switch(n){case ne:return Gn(e);case P:case K:return new i(+e);case te:case ie:case ae:case le:case re:case de:case oe:case pe:case he:var a=e.buffer;return new i(t?Gn(a):a,e.byteOffset,e.length);case G:case Q:return new i(e);case Z:var l=new i(e.source,Oe.exec(e));l.lastIndex=e.lastIndex;}return l}function Dt(e,n,t){null==e||Kt(n,e)||(n=ii(n),e=1==n.length?e:In(e,Bn(n,0,-1)),n=pi(n));var i=null==e?e:e[n];return null==i?void 0:i.apply(e,t)}function qt(e){return null!=e&&Yt(il(e))}function $t(e,n){return e='number'==typeof e||Ee.test(e)?+e:-1,n=null==n?Va:n,-1<e&&0==e%1&&e<n}function Pt(e,n,t){if(!Ci(t))return!1;var i=typeof n;if('number'==i?qt(t)&&$t(n,t.length):'string'==i&&n in t){var a=t[n];return e===e?e===a:a!==a}return!1}function Kt(e,n){var t=typeof e;if('string'==t&&Te.test(e)||'number'==t)return!0;if($l(e))return!1;var i=!ke.test(e);return i||null!=n&&e in ti(n)}function Vt(e){var n=Ut(e),t=f[n];if('function'!=typeof t||!(n in ee.prototype))return!1;if(e===t)return!0;var i=tl(t);return!!i&&e===i[0]}function Yt(e){return'number'==typeof e&&-1<e&&0==e%1&&e<=Va}function Jt(e){return e===e&&!Ci(e)}function Gt(e,n){var t=e[1],i=n[1],a=t|i,l=a<C,r=i==C&&t==w||i==C&&t==E&&e[7].length<=n[8]||i==(C|E)&&t==w;if(!(l||r))return e;i&A&&(e[2]=n[2],a|=t&A?0:v);var d=n[3];if(d){var o=e[3];e[3]=o?Xn(o,d,n[4]):Ke(d),e[4]=o?y(e[3],D):Ke(n[4])}return d=n[5],d&&(o=e[5],e[5]=o?Zn(o,d,n[6]):Ke(d),e[6]=o?y(e[5],D):Ke(n[6])),d=n[7],d&&(e[7]=Ke(d)),i&C&&(e[8]=null==e[8]?n[8]:Ba(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=a,e}function Xt(e,n){return void 0===e?n:Pl(e,n,Xt)}function Zt(e,n){e=ti(e);for(var t=-1,i=n.length,a={},l;++t<i;)l=n[t],l in e&&(a[l]=e[l]);return a}function Ht(e,n){var t={};return mn(e,function(e,i,a){n(e,i,a)&&(t[i]=e)}),t}function Qt(e,n){for(var t=e.length,i=Ba(n.length,t),a=Ke(e),l;i--;)l=n[i],e[i]=$t(l,t)?a[l]:void 0;return e}function ei(e){for(var n=Di(e),t=n.length,i=t&&e.length,a=!!i&&Yt(i)&&($l(e)||gt(e)),l=-1,r=[],d;++l<t;)d=n[l],(a&&$t(d,i)||sa.call(e,d))&&r.push(d);return r}function ni(e){return null==e?[]:qt(e)?Ci(e)?e:da(e):Pi(e)}function ti(e){return Ci(e)?e:da(e)}function ii(e){if($l(e))return e;var n=[];return a(e).replace(Ie,function(e,t,i,a){n.push(i?a.replace(we,'$1'):t||e)}),n}function ai(e){return e instanceof ee?e.clone():new H(e.__wrapped__,e.__chain__,Ke(e.__actions__))}function li(e,t,n){var i=e?e.length:0;return i?((n?Pt(e,t,n):null==t)&&(t=1),Bn(e,0>t?0:t)):[]}function ri(e,t,i){var a=e?e.length:0;return a?((i?Pt(e,t,i):null==t)&&(t=1),t=a-(+t||0),Bn(e,0,0>t?0:t)):[]}function di(e){return e?e[0]:void 0}function oi(e,n,i){var a=e?e.length:0;if(!a)return-1;if('number'==typeof i)i=0>i?Fa(a+i,0):i;else if(i){var l=Vn(e,n);return l<a&&(n===n?n===e[l]:e[l]!==e[l])?l:-1}return t(e,n,i||0)}function pi(e){var n=e?e.length:0;return n?e[n-1]:void 0}function hi(e){return li(e,1)}function ui(e,n,i,a){var l=e?e.length:0;if(!l)return[];null!=n&&'boolean'!=typeof n&&(a=i,i=Pt(e,n,a)?void 0:n,n=!1);var r=Et();return null==i&&r===pn||(i=r(i,a,3)),n&&Wt()===t?x(e,i):qn(e,i)}function ci(e){if(!(e&&e.length))return[];var n=-1,t=0;e=Ge(e,function(e){if(qt(e))return t=Fa(e.length,t),!0});for(var i=na(t);++n<t;)i[n]=Xe(e,En(n));return i}function _i(e,n,t){var i=e?e.length:0;if(!i)return[];var a=ci(e);return null==n?a:(n=Jn(n,t,4),Xe(a,function(e){return He(e,n,void 0,!0)}))}function gi(e,n){var t=-1,i=e?e.length:0,a={};for(!i||n||$l(e[0])||(n=[]);++t<i;){var l=e[t];n?a[l]=n[t]:l&&(a[l[0]]=l[1])}return a}function si(e){var n=f(e);return n.__chain__=!0,n}function fi(e,n,t){return n.call(t,e)}function yi(e,n,t){var i=$l(e)?Ye:_n;return t&&Pt(e,n,t)&&(n=void 0),('function'!=typeof n||void 0!==t)&&(n=Et(n,t,3)),i(e,n)}function xi(e,n,t){var i=$l(e)?Ge:fn;return n=Et(n,t,3),i(e,n)}function mi(e,n,t,i){var a=e?il(e):0;return Yt(a)||(e=Pi(e),a=e.length),t='number'!=typeof t||i&&Pt(n,t,i)?0:0>t?Fa(a+t,0):t||0,'string'==typeof e||!$l(e)&&Fi(e)?t<=a&&-1<e.indexOf(n,t):!!a&&-1<Wt(e,n,t)}function bi(e,n,t){var i=$l(e)?Xe:wn;return n=Et(n,t,3),i(e,n)}function ki(e,t,i){if(i?Pt(e,t,i):null==t){e=ni(e);var a=e.length;return 0<a?e[Sn(0,a-1)]:void 0}var l=-1,r=lt(e),a=r.length;for(t=Ba(0>t?0:+t||0,a);++l<t;){var d=Sn(l,a-1),o=r[d];r[d]=r[l],r[l]=o}return r.length=t,r}function Ti(e,n,t){var i=$l(e)?nn:Ln;return t&&Pt(e,n,t)&&(n=void 0),('function'!=typeof n||void 0!==t)&&(n=Et(n,t,3)),i(e,n)}function Ii(e,t){var i;if('function'!=typeof t)if('function'==typeof e){var a=e;e=t,t=a}else throw new ha(M);return function(){return 0<--e&&(i=t.apply(this,arguments)),1>=e&&(t=void 0),i}}function Ai(e,n,t){function i(n,t){t&&ka(t),u=s=f=void 0,n&&(d=Ol(),c=e.apply(g,h),!s&&!u&&(h=g=void 0))}function a(){var e=n-(Ol()-_);0>=e||e>n?i(f,u):s=va(a,e)}function l(){i(p,s)}function r(){if(h=arguments,_=Ol(),g=this,f=p&&(s||!y),!1===o)var t=y&&!s;else{u||y||(d=_);var i=o-(_-d),r=0>=i||i>o;r?(u&&(u=ka(u)),d=_,c=e.apply(g,h)):!u&&(u=va(l,i))}return r&&s?s=ka(s):!s&&n!==o&&(s=va(a,n)),t&&(r=!0,c=e.apply(g,h)),!r||s||u||(h=g=void 0),c}var d=0,o=!1,p=!0,h,u,c,_,g,s,f;if('function'!=typeof e)throw new ha(M);if(n=0>n?0:+n||0,!0===t){var y=!0;p=!1}else Ci(t)&&(y=!!t.leading,o='maxWait'in t&&Fa(+t.maxWait||0,n),p='trailing'in t?!!t.trailing:p);return r.cancel=function(){s&&ka(s),u&&ka(u),d=0,u=s=f=void 0},r}function ji(e,n){if('function'!=typeof e||n&&'function'!=typeof n)throw new ha(M);var t=function(){var i=arguments,a=n?n.apply(this,i):i[0],l=t.cache;if(l.has(a))return l.get(a);var r=e.apply(this,i);return t.cache=l.set(a,r),r};return t.cache=new ji.Cache,t}function vi(e,n){if('function'!=typeof e)throw new ha(M);return n=Fa(void 0===n?e.length-1:+n||0,0),function(){for(var t=arguments,i=-1,a=Fa(t.length-n,0),l=na(a);++i<a;)l[i]=t[n+i];switch(n){case 0:return e.call(this,l);case 1:return e.call(this,t[0],l);case 2:return e.call(this,t[0],t[1],l);}var r=na(n+1);for(i=-1;++i<n;)r[i]=t[i];return r[n]=l,e.apply(this,r)}}function wi(e,n){return e>n}function gt(e){return s(e)&&qt(e)&&sa.call(e,'callee')&&!Aa.call(e,'callee')}function Ni(e,n,t,i){t='function'==typeof t?Jn(t,i,3):void 0;var a=t?t(e,n):void 0;return void 0===a?An(e,n,t):!!a}function Oi(e){return s(e)&&'string'==typeof e.message&&ya.call(e)==V}function Ri(e){return Ci(e)&&ya.call(e)==Y}function Ci(e){var n=typeof e;return!!e&&('object'==n||'function'==n)}function Ei(e){return null!=e&&(Ri(e)?ma.test(ga.call(e)):s(e)&&Ce.test(e))}function Ui(e){return'number'==typeof e||s(e)&&ya.call(e)==G}function Wi(e){var n;if(!s(e)||ya.call(e)!=X||gt(e)||!sa.call(e,'constructor')&&(n=e.constructor,'function'==typeof n&&!(n instanceof n)))return!1;var t;return mn(e,function(e,n){t=n}),void 0===t||sa.call(e,t)}function Si(e){return Ci(e)&&ya.call(e)==Z}function Fi(e){return'string'==typeof e||s(e)&&ya.call(e)==Q}function Bi(e){return s(e)&&Yt(e.length)&&!!ze[ya.call(e)]}function Li(e,n){return e<n}function lt(e){var n=e?il(e):0;return Yt(n)?n?Ke(e):[]:Pi(e)}function zi(e){return on(e,Di(e))}function Mi(e){return Tn(e,Di(e))}function Di(e){if(null==e)return[];Ci(e)||(e=da(e));var n=e.length;n=n&&Yt(n)&&($l(e)||gt(e))&&n||0;for(var t=e.constructor,i=-1,a='function'==typeof t&&t.prototype===e,l=na(n),r=0<n;++i<n;)l[i]=i+'';for(var d in e)r&&$t(d,n)||'constructor'==d&&(a||!sa.call(e,d))||l.push(d);return l}function qi(e){e=ti(e);for(var n=-1,t=er(e),i=t.length,a=na(i),l;++n<i;)l=t[n],a[n]=[l,e[l]];return a}function $i(e,n,t){var i=null==e?void 0:e[n];return void 0===i&&(null!=e&&!Kt(n,e)&&(n=ii(n),e=1==n.length?e:In(e,Bn(n,0,-1)),i=null==e?void 0:e[pi(n)]),i=void 0===i?t:i),Ri(i)?i.call(e):i}function Pi(e){return $n(e,er(e))}function Ki(e){return e=a(e),e&&e.replace(Ue,p).replace(ve,'')}function Vi(e,t){var i='';if(e=a(e),t=+t,1>t||!e||!Wa(t))return i;do t%2&&(i+=e),t=Ea(t/2),e+=e;while(t);return i}function Yi(e,n,t){var i=e;return(e=a(e),!e)?e:(t?Pt(i,n,t):null==n)?e.slice(m(e),b(e)+1):(n+='',e.slice(l(e,n),r(e,n)+1))}function Ji(e,n,t){return t&&Pt(e,n,t)&&(n=void 0),e=a(e),e.match(n||Fe)||[]}function Gi(e,n,t){return t&&Pt(e,n,t)&&(n=void 0),s(e)?Zi(e):pn(e,n)}function Xi(e){return e}function Zi(e){return Nn(hn(e,!0))}function Hi(e,n,t){if(null==t){var i=Ci(n),a=i?er(n):void 0,l=a&&a.length?Tn(n,a):void 0;(l?l.length:i)||(l=!1,t=n,n=e,e=this)}l||(l=Tn(n,er(n)));var r=!0,d=-1,o=Ri(e),p=l.length;for(!1===t?r=!1:Ci(t)&&('chain'in t)&&(r=t.chain);++d<p;){var h=l[d],u=n[h];e[h]=u,o&&(e.prototype[h]=function(n){return function(){var t=this.__chain__;if(r||t){var i=e(this.__wrapped__),a=i.__actions__=Ke(this.__actions__);return a.push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,Ze([this.value()],arguments))}}(u))}return e}function Qi(){}function ea(e){return Kt(e)?En(e):Un(e)}_=_?en.defaults(Qe.Object(),_,en.pick(Qe,Be)):Qe;var na=_.Array,ta=_.Date,ia=_.Error,aa=_.Function,la=_.Math,ra=_.Number,da=_.Object,oa=_.RegExp,pa=_.String,ha=_.TypeError,ua=na.prototype,ca=da.prototype,_a=pa.prototype,ga=aa.prototype.toString,sa=ca.hasOwnProperty,fa=0,ya=ca.toString,xa=Qe._,ma=oa('^'+ga.call(sa).replace(/[\\^$.*+?()[\]{}|]/g,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$'),ba=_.ArrayBuffer,ka=_.clearTimeout,Ta=_.parseFloat,Ia=la.pow,Aa=ca.propertyIsEnumerable,ja=Ft(_,'Set'),va=_.setTimeout,wa=ua.splice,Na=_.Uint8Array,Oa=Ft(_,'WeakMap'),Ra=la.ceil,Ca=Ft(da,'create'),Ea=la.floor,Ua=Ft(na,'isArray'),Wa=_.isFinite,Sa=Ft(da,'keys'),Fa=la.max,Ba=la.min,La=Ft(ta,'now'),za=_.parseInt,Ma=la.random,Da=ra.NEGATIVE_INFINITY,qa=ra.POSITIVE_INFINITY,$a=4294967295,Pa=$a-1,Ka=$a>>>1,Va=9007199254740991,Ya=Oa&&new Oa,Ja={},Ga=f.support={};f.templateSettings={escape:xe,evaluate:me,interpolate:be,variable:'',imports:{_:f}};var Xa=function(){function e(){}return function(n){if(Ci(n)){e.prototype=n;var t=new e;e.prototype=void 0}return t||{}}}(),Za=et(bn),Ha=et(kn,!0),Qa=nt(),el=nt(!0),nl=Ya?function(e,n){return Ya.set(e,n),e}:Xi,tl=Ya?function(e){return Ya.get(e)}:Qi,il=En('length'),al=function(){var e=0,n=0;return function(t,i){var a=Ol(),l=F-(a-n);if(n=a,!(0<l))e=0;else if(++e>=S)return t;return nl(t,i)}}(),ll=vi(function(e,n){return s(e)&&qt(e)?cn(e,xn(n,!1,!0)):[]}),rl=ct(),dl=ct(!0),ol=vi(function(e){for(var n=e.length,i=n,a=na(h),l=Wt(),r=[],d;i--;)d=e[i]=qt(d=e[i])?d:[],a[i]=l===t&&120<=d.length?it(i&&d):null;var o=e[0],p=-1,h=o?o.length:0,u=a[0];outer:for(;++p<h;)if(d=o[p],0>(u?$e(u,d):l(r,d,0))){for(var i=n,c;--i;)if(c=a[i],0>(c?$e(c,d):l(e[i],d,0)))continue outer;u&&u.push(d),r.push(d)}return r}),pl=vi(function(n,t){t=xn(t);var i=dn(n,t);return Wn(n,t.sort(e)),i}),hl=wt(),ul=wt(!0),cl=vi(function(e){return qn(xn(e,!1,!0))}),_l=vi(function(e,n){return qt(e)?cn(e,n):[]}),gl=vi(ci),sl=vi(function(e){var n=e.length,t=2<n?e[n-2]:void 0,i=1<n?e[n-1]:void 0;return 2<n&&'function'==typeof t?n-=2:(t=1<n&&'function'==typeof i?(--n,i):void 0,i=void 0),e.length=n,_i(e,t,i)}),fl=vi(function(e){return e=xn(e),this.thru(function(n){return Pe($l(n)?n:[ti(n)],e)})}),yl=vi(function(e,n){return dn(e,xn(n))}),at=Hn(function(e,n,t){sa.call(e,t)?++e[t]:e[t]=1}),xl=ut(Za),ml=ut(Ha,!0),bl=ft(Ve,Za),kl=ft(function(e,n){for(var t=e.length;t--&&!1!==n(e[t],t,e););return e},Ha),Tl=Hn(function(e,n,t){sa.call(e,t)?e[t].push(n):e[t]=[n]}),Il=Hn(function(e,n,t){e[t]=n}),Al=vi(function(e,n,t){var i=-1,a=Kt(n),l=qt(e)?na(e.length):[];return Za(e,function(e){var r='function'==typeof n?n:a&&null!=e?e[n]:void 0;l[++i]=r?r.apply(e,t):Dt(e,n,t)}),l}),jl=Hn(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]}),vl=Tt(He,Za),wl=Tt(function(e,n,t,i){var a=e.length;for(i&&a&&(t=e[--a]);a--;)t=n(t,e[a],a,e);return t},Ha),Nl=vi(function(e,n){if(null==e)return[];var t=n[2];return t&&Pt(n[0],n[1],t)&&(n.length=1),Mn(e,xn(n),[])}),Ol=La||function(){return new ta().getTime()},Rl=vi(function(e,n,t){var i=A;if(t.length){var a=y(t,Rl.placeholder);i|=O}return Nt(e,i,n,t,a)}),Cl=vi(function(e,n){n=n.length?xn(n):Mi(e);for(var t=-1,i=n.length,a;++t<i;)a=n[t],e[a]=Nt(e[a],A,e);return e}),El=vi(function(e,n,t){var i=A|j;if(t.length){var a=y(t,El.placeholder);i|=O}return Nt(n,i,e,t,a)}),Ul=ot(w),Wl=ot(N),Sl=vi(function(e,n){return un(e,1,n)}),Fl=vi(function(e,n,t){return un(e,n,t)}),Bl=st(),Ll=st(!0),zl=vi(function(e,n){if(n=xn(n),'function'!=typeof e||!Ye(n,i))throw new ha(M);var t=n.length;return vi(function(i){for(var a=Ba(i.length,t);a--;)i[a]=n[a](i[a]);return e.apply(this,i)})}),Ml=kt(O),Dl=kt(R),ql=vi(function(e,n){return Nt(e,E,void 0,void 0,void 0,xn(n))}),$l=Ua||function(e){return s(e)&&Yt(e.length)&&ya.call(e)==$},Pl=Qn(Rn),Kl=Qn(function(e,n,t){return t?ln(e,n,t):rn(e,n)}),Vl=pt(Kl,function(e,n){return void 0===e?n:e}),Yl=pt(Pl,Xt),Jl=_t(bn),Gl=_t(kn),Xl=yt(Qa),Zl=yt(el),Hl=xt(bn),Ql=xt(kn),er=Sa?function(e){var n=null==e?void 0:e.constructor;return'function'==typeof n&&n.prototype===e||'function'!=typeof e&&qt(e)?ei(e):Ci(e)?Sa(e):[]}:ei,nr=mt(!0),tr=mt(),ir=vi(function(e,n){if(null==e)return{};if('function'!=typeof n[0]){var n=Xe(xn(n),pa);return Zt(e,cn(Di(e),n))}var t=Jn(n[0],n[1],3);return Ht(e,function(e,n,i){return!t(e,n,i)})}),ar=vi(function(e,n){return null==e?{}:'function'==typeof n[0]?Ht(e,Jn(n[0],n[1],3)):Zt(e,xn(n))}),lr=rt(function(e,n,t){return n=n.toLowerCase(),e+(t?n.charAt(0).toUpperCase()+n.slice(1):n)}),rr=rt(function(e,n,t){return e+(t?'-':'')+n.toLowerCase()}),dr=bt(),or=bt(!0),pr=rt(function(e,n,t){return e+(t?'_':'')+n.toLowerCase()}),hr=rt(function(e,n,t){return e+(t?' ':'')+(n.charAt(0).toUpperCase()+n.slice(1))}),ur=vi(function(e,n){try{return e.apply(void 0,n)}catch(n){return Oi(n)?n:new ia(n)}}),cr=vi(function(e,n){return function(t){return Dt(t,e,n)}}),_r=vi(function(e,n){return function(t){return Dt(e,t,n)}}),gr=vt('ceil'),sr=vt('floor'),fr=ht(wi,Da),yr=ht(Li,qa),xr=vt('round');return f.prototype=J.prototype,H.prototype=Xa(J.prototype),H.prototype.constructor=H,ee.prototype=Xa(J.prototype),ee.prototype.constructor=ee,De.prototype['delete']=function(e){return this.has(e)&&delete this.__data__[e]},De.prototype.get=function(e){return'__proto__'==e?void 0:this.__data__[e]},De.prototype.has=function(e){return'__proto__'!=e&&sa.call(this.__data__,e)},De.prototype.set=function(e,n){return'__proto__'!=e&&(this.__data__[e]=n),this},qe.prototype.push=function(e){var n=this.data;'string'==typeof e||Ci(e)?n.set.add(e):n.hash[e]=!0},ji.Cache=De,f.after=function(e,t){if('function'!=typeof t)if('function'==typeof e){var i=e;e=t,t=i}else throw new ha(M);return e=Wa(e=+e)?e:0,function(){if(1>--e)return t.apply(this,arguments)}},f.ary=function(e,t,i){return i&&Pt(e,t,i)&&(t=void 0),t=e&&null==t?e.length:Fa(+t||0,0),Nt(e,C,void 0,void 0,void 0,void 0,t)},f.assign=Kl,f.at=yl,f.before=Ii,f.bind=Rl,f.bindAll=Cl,f.bindKey=El,f.callback=Gi,f.chain=si,f.chunk=function(e,n,t){n=(t?Pt(e,n,t):null==n)?1:Fa(Ea(n)||1,1);for(var i=0,a=e?e.length:0,l=-1,r=na(Ra(a/n));i<a;)r[++l]=Bn(e,i,i+=n);return r},f.compact=function(e){for(var n=-1,t=e?e.length:0,i=-1,a=[],l;++n<t;)l=e[n],l&&(a[++i]=l);return a},f.constant=function(e){return function(){return e}},f.countBy=at,f.create=function(e,n,t){var i=Xa(e);return t&&Pt(e,n,t)&&(n=void 0),n?rn(i,n):i},f.curry=Ul,f.curryRight=Wl,f.debounce=Ai,f.defaults=Vl,f.defaultsDeep=Yl,f.defer=Sl,f.delay=Fl,f.difference=ll,f.drop=li,f.dropRight=ri,f.dropRightWhile=function(e,n,t){return e&&e.length?Pn(e,Et(n,t,3),!0,!0):[]},f.dropWhile=function(e,n,t){return e&&e.length?Pn(e,Et(n,t,3),!0):[]},f.fill=function(e,n,t,i){var a=e?e.length:0;return a?(t&&'number'!=typeof t&&Pt(e,n,t)&&(t=0,i=a),sn(e,n,t,i)):[]},f.filter=xi,f.flatten=function(e,n,t){var i=e?e.length:0;return t&&Pt(e,n,t)&&(n=!1),i?xn(e,n):[]},f.flattenDeep=function(e){var n=e?e.length:0;return n?xn(e,!0):[]},f.flow=Bl,f.flowRight=Ll,f.forEach=bl,f.forEachRight=kl,f.forIn=Xl,f.forInRight=Zl,f.forOwn=Hl,f.forOwnRight=Ql,f.functions=Mi,f.groupBy=Tl,f.indexBy=Il,f.initial=function(e){return ri(e,1)},f.intersection=ol,f.invert=function(e,n,t){t&&Pt(e,n,t)&&(n=void 0);for(var i=-1,a=er(e),l=a.length,r={};++i<l;){var d=a[i],o=e[d];n?sa.call(r,o)?r[o].push(d):r[o]=[d]:r[o]=d}return r},f.invoke=Al,f.keys=er,f.keysIn=Di,f.map=bi,f.mapKeys=nr,f.mapValues=tr,f.matches=Zi,f.matchesProperty=function(e,n){return On(e,hn(n,!0))},f.memoize=ji,f.merge=Pl,f.method=cr,f.methodOf=_r,f.mixin=Hi,f.modArgs=zl,f.negate=function(e){if('function'!=typeof e)throw new ha(M);return function(){return!e.apply(this,arguments)}},f.omit=ir,f.once=function(e){return Ii(2,e)},f.pairs=qi,f.partial=Ml,f.partialRight=Dl,f.partition=jl,f.pick=ar,f.pluck=function(e,n){return bi(e,ea(n))},f.property=ea,f.propertyOf=function(e){return function(n){return In(e,ii(n),n+'')}},f.pull=function(){var e=arguments,n=e[0];if(!(n&&n.length))return n;for(var t=0,i=Wt(),a=e.length;++t<a;)for(var l=0,r=e[t];-1<(l=i(n,r,l));)wa.call(n,l,1);return n},f.pullAt=pl,f.range=function(e,n,t){t&&Pt(e,n,t)&&(n=t=void 0),e=+e||0,t=null==t?1:+t||0,null==n?(n=e,e=0):n=+n||0;for(var i=-1,a=Fa(Ra((n-e)/(t||1)),0),l=na(a);++i<a;)l[i]=e,e+=t;return l},f.rearg=ql,f.reject=function(e,n,t){var i=$l(e)?Ge:fn;return n=Et(n,t,3),i(e,function(e,t,i){return!n(e,t,i)})},f.remove=function(e,n,t){var i=[];if(!(e&&e.length))return i;var a=-1,l=[],r=e.length;for(n=Et(n,t,3);++a<r;){var d=e[a];n(d,a,e)&&(i.push(d),l.push(a))}return Wn(e,l),i},f.rest=hi,f.restParam=vi,f.set=function(e,n,t){if(null==e)return e;var i=n+'';n=null!=e[i]||Kt(n,e)?[i]:ii(n);for(var a=-1,l=n.length,r=e,d;null!=r&&++a<l;)d=n[a],Ci(r)&&(a==l-1?r[d]=t:null==r[d]&&(r[d]=$t(n[a+1])?[]:{})),r=r[d];return e},f.shuffle=function(e){return ki(e,qa)},f.slice=function(e,n,t){var i=e?e.length:0;return i?(t&&'number'!=typeof t&&Pt(e,n,t)&&(n=0,t=i),Bn(e,n,t)):[]},f.sortBy=function(e,n,t){if(null==e)return[];t&&Pt(e,n,t)&&(n=void 0);var i=-1;n=Et(n,t,3);var a=wn(e,function(e,t,a){return{criteria:n(e,t,a),index:++i,value:e}});return zn(a,d)},f.sortByAll=Nl,f.sortByOrder=function(e,n,t,i){return null==e?[]:(i&&Pt(n,t,i)&&(t=void 0),$l(n)||(n=null==n?[]:[n]),$l(t)||(t=null==t?[]:[t]),Mn(e,n,t))},f.spread=function(e){if('function'!=typeof e)throw new ha(M);return function(n){return e.apply(this,n)}},f.take=function(e,t,n){var i=e?e.length:0;return i?((n?Pt(e,t,n):null==t)&&(t=1),Bn(e,0,0>t?0:t)):[]},f.takeRight=function(e,t,i){var a=e?e.length:0;return a?((i?Pt(e,t,i):null==t)&&(t=1),t=a-(+t||0),Bn(e,0>t?0:t)):[]},f.takeRightWhile=function(e,n,t){return e&&e.length?Pn(e,Et(n,t,3),!1,!0):[]},f.takeWhile=function(e,n,t){return e&&e.length?Pn(e,Et(n,t,3)):[]},f.tap=function(e,n,t){return n.call(t,e),e},f.throttle=function(e,n,t){var i=!0,a=!0;if('function'!=typeof e)throw new ha(M);return!1===t?i=!1:Ci(t)&&(i='leading'in t?!!t.leading:i,a='trailing'in t?!!t.trailing:a),Ai(e,n,{leading:i,maxWait:+n,trailing:a})},f.thru=fi,f.times=function(e,n,t){if(e=Ea(e),1>e||!Wa(e))return[];var i=-1,a=na(Ba(e,$a));for(n=Jn(n,t,1);++i<e;)i<$a?a[i]=n(i):n(i);return a},f.toArray=lt,f.toPlainObject=zi,f.transform=function(e,n,t,i){var a=$l(e)||Bi(e);if(n=Et(n,i,4),null==t)if(a||Ci(e)){var l=e.constructor;t=a?$l(e)?new l:[]:Xa(Ri(l)?l.prototype:void 0)}else t={};return(a?Ve:bn)(e,function(e,i,a){return n(t,e,i,a)}),t},f.union=cl,f.uniq=ui,f.unzip=ci,f.unzipWith=_i,f.values=Pi,f.valuesIn=function(e){return $n(e,Di(e))},f.where=function(e,n){return xi(e,Nn(n))},f.without=_l,f.wrap=function(e,n){return n=null==n?Xi:n,Nt(n,O,void 0,[e],[])},f.xor=function(){for(var e=-1,n=arguments.length,t;++e<n;)if(t=arguments[e],qt(t))var i=i?Ze(cn(i,t),cn(t,i)):t;return i?qn(i):[]},f.zip=gl,f.zipObject=gi,f.zipWith=sl,f.backflow=Ll,f.collect=bi,f.compose=Ll,f.each=bl,f.eachRight=kl,f.extend=Kl,f.iteratee=Gi,f.methods=Mi,f.object=gi,f.select=xi,f.tail=hi,f.unique=ui,Hi(f,f),f.add=function(e,n){return(+e||0)+(+n||0)},f.attempt=ur,f.camelCase=lr,f.capitalize=function(e){return e=a(e),e&&e.charAt(0).toUpperCase()+e.slice(1)},f.ceil=gr,f.clone=function(e,n,t,i){return n&&'boolean'!=typeof n&&Pt(e,n,t)?n=!1:'function'==typeof n&&(i=t,t=n,n=!1),'function'==typeof t?hn(e,n,Jn(t,i,3)):hn(e,n)},f.cloneDeep=function(e,n,t){return'function'==typeof n?hn(e,!0,Jn(n,t,3)):hn(e,!0)},f.deburr=Ki,f.endsWith=function(e,n,t){e=a(e),n+='';var i=e.length;return t=void 0===t?i:Ba(0>t?0:+t||0,i),t-=n.length,0<=t&&e.indexOf(n,t)==t},f.escape=function(e){return e=a(e),e&&ye.test(e)?e.replace(se,h):e},f.escapeRegExp=function(e){return e=a(e),e&&je.test(e)?e.replace(Ae,u):e||'(?:)'},f.every=yi,f.find=xl,f.findIndex=rl,f.findKey=Jl,f.findLast=ml,f.findLastIndex=dl,f.findLastKey=Gl,f.findWhere=function(e,n){return xl(e,Nn(n))},f.first=di,f.floor=sr,f.get=function(e,n,t){var i=null==e?void 0:In(e,ii(n),n+'');return void 0===i?t:i},f.gt=wi,f.gte=function(e,n){return e>=n},f.has=function(e,n){if(null==e)return!1;var t=sa.call(e,n);if(!t&&!Kt(n)){if(n=ii(n),e=1==n.length?e:In(e,Bn(n,0,-1)),null==e)return!1;n=pi(n),t=sa.call(e,n)}return t||Yt(e.length)&&$t(n,e.length)&&($l(e)||gt(e))},f.identity=Xi,f.includes=mi,f.indexOf=oi,f.inRange=function(e,n,t){return n=+n||0,void 0===t?(t=n,n=0):t=+t||0,e>=Ba(n,t)&&e<Fa(n,t)},f.isArguments=gt,f.isArray=$l,f.isBoolean=function(e){return!0===e||!1===e||s(e)&&ya.call(e)==P},f.isDate=function(e){return s(e)&&ya.call(e)==K},f.isElement=function(e){return!!e&&1===e.nodeType&&s(e)&&!Wi(e)},f.isEmpty=function(e){return null==e||(qt(e)&&($l(e)||Fi(e)||gt(e)||s(e)&&Ri(e.splice))?!e.length:!er(e).length)},f.isEqual=Ni,f.isError=Oi,f.isFinite=function(e){return'number'==typeof e&&Wa(e)},f.isFunction=Ri,f.isMatch=function(e,n,t,i){return t='function'==typeof t?Jn(t,i,3):void 0,vn(e,St(n),t)},f.isNaN=function(e){return Ui(e)&&e!=+e},f.isNative=Ei,f.isNull=function(e){return null===e},f.isNumber=Ui,f.isObject=Ci,f.isPlainObject=Wi,f.isRegExp=Si,f.isString=Fi,f.isTypedArray=Bi,f.isUndefined=function(e){return void 0===e},f.kebabCase=rr,f.last=pi,f.lastIndexOf=function(e,n,t){var i=e?e.length:0;if(!i)return-1;var a=i;if('number'==typeof t)a=(0>t?Fa(i+t,0):Ba(t||0,i-1))+1;else if(t){a=Vn(e,n,!0)-1;var l=e[a];return(n===n?n===l:l!==l)?a:-1}if(n!==n)return g(e,a,!0);for(;a--;)if(e[a]===n)return a;return-1},f.lt=Li,f.lte=function(e,n){return e<=n},f.max=fr,f.min=yr,f.noConflict=function(){return Qe._=xa,this},f.noop=Qi,f.now=Ol,f.pad=function(e,n,t){e=a(e),n=+n;var i=e.length;if(i>=n||!Wa(n))return e;var l=(n-i)/2,r=Ea(l),d=Ra(l);return t=At('',d,t),t.slice(0,r)+e+t},f.padLeft=dr,f.padRight=or,f.parseInt=function(e,n,t){return(t?Pt(e,n,t):null==n)?n=0:n&&(n=+n),e=Yi(e),za(e,n||(Re.test(e)?16:10))},f.random=function(e,n,t){t&&Pt(e,n,t)&&(n=t=void 0);var i=null==e,a=null==n;if(null==t&&(a&&'boolean'==typeof e?(t=e,e=1):'boolean'==typeof n&&(t=n,a=!0)),i&&a&&(n=1,a=!1),e=+e||0,a?(n=e,e=0):n=+n||0,t||e%1||n%1){var l=Ma();return Ba(e+l*(n-e+Ta('1e-'+((l+'').length-1))),n)}return Sn(e,n)},f.reduce=vl,f.reduceRight=wl,f.repeat=Vi,f.result=$i,f.round=xr,f.runInContext=T,f.size=function(e){var n=e?il(e):0;return Yt(n)?n:er(e).length},f.snakeCase=pr,f.some=Ti,f.sortedIndex=hl,f.sortedLastIndex=ul,f.startCase=hr,f.startsWith=function(e,n,t){return e=a(e),t=null==t?0:Ba(0>t?0:+t||0,e.length),e.lastIndexOf(n,t)==t},f.sum=function(e,n,t){return t&&Pt(e,n,t)&&(n=void 0),n=Et(n,t,3),1==n.length?tn($l(e)?e:ni(e),n):Dn(e,n)},f.template=function(e,n,t){var i=f.templateSettings;t&&Pt(e,n,t)&&(n=t=void 0),e=a(e),n=ln(rn({},t||n),i,an);var l=ln(rn({},n.imports),i.imports,an),r=er(l),d=$n(l,r),o=0,p=n.interpolate||We,h='__p += \'',u=oa((n.escape||We).source+'|'+p.source+'|'+(p===be?Ne:We).source+'|'+(n.evaluate||We).source+'|$','g'),_='//# sourceURL='+('sourceURL'in n?n.sourceURL:'lodash.templateSources['+ ++Le+']')+'\n',g,s;e.replace(u,function(n,t,i,a,l,r){return i||(i=a),h+=e.slice(o,r).replace(Se,c),t&&(g=!0,h+='\' +\n__e('+t+') +\n\''),l&&(s=!0,h+='\';\n'+l+';\n__p += \''),i&&(h+='\' +\n((__t = ('+i+')) == null ? \'\' : __t) +\n\''),o=r+n.length,n}),h+='\';\n';var y=n.variable;y||(h='with (obj) {\n'+h+'\n}\n'),h=(s?h.replace(ue,''):h).replace(ce,'$1').replace(_e,'$1;'),h='function('+(y||'obj')+') {\n'+(y?'':'obj || (obj = {});\n')+'var __t, __p = \'\''+(g?', __e = _.escape':'')+(s?', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, \'\') }\n':';\n')+h+'return __p\n}';var x=ur(function(){return aa(r,_+'return '+h).apply(void 0,d)});if(x.source=h,Oi(x))throw x;return x},f.trim=Yi,f.trimLeft=function(e,n,t){var i=e;return e=a(e),e?(t?Pt(i,n,t):null==n)?e.slice(m(e)):e.slice(l(e,n+'')):e},f.trimRight=function(e,n,t){var i=e;return e=a(e),e?(t?Pt(i,n,t):null==n)?e.slice(0,b(e)+1):e.slice(0,r(e,n+'')+1):e},f.trunc=function(e,n,t){t&&Pt(e,n,t)&&(n=void 0);var i=U,l=W;if(null!=n)if(Ci(n)){var r='separator'in n?n.separator:r;i='length'in n?+n.length||0:i,l='omission'in n?a(n.omission):l}else i=+n||0;if(e=a(e),i>=e.length)return e;var d=i-l.length;if(1>d)return l;var o=e.slice(0,d);if(null==r)return o+l;if(Si(r)){if(e.slice(d).search(r)){var p=e.slice(0,d),h,u;for(r.global||(r=oa(r.source,(Oe.exec(r)||'')+'g')),r.lastIndex=0;h=r.exec(p);)u=h.index;o=o.slice(0,null==u?d:u)}}else if(e.indexOf(r,d)!=d){var c=o.lastIndexOf(r);-1<c&&(o=o.slice(0,c))}return o+l},f.unescape=function(e){return e=a(e),e&&fe.test(e)?e.replace(ge,k):e},f.uniqueId=function(e){var n=++fa;return a(e)+n},f.words=Ji,f.all=yi,f.any=Ti,f.contains=mi,f.eq=Ni,f.detect=xl,f.foldl=vl,f.foldr=wl,f.head=di,f.include=mi,f.inject=vl,Hi(f,function(){var e={};return bn(f,function(n,t){f.prototype[t]||(e[t]=n)}),e}(),!1),f.sample=ki,f.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(n){return ki(n,e)}):ki(this.value())},f.VERSION=I,Ve(['bind','bindKey','curry','curryRight','partial','partialRight'],function(e){f[e].placeholder=f}),Ve(['drop','take'],function(e,t){ee.prototype[e]=function(i){var a=this.__filtered__;if(a&&!t)return new ee(this);i=null==i?1:Fa(Ea(i)||0,0);var l=this.clone();return a?l.__takeCount__=Ba(l.__takeCount__,i):l.__views__.push({size:i,type:e+(0>l.__dir__?'Right':'')}),l},ee.prototype[e+'Right']=function(t){return this.reverse()[e](t).reverse()}}),Ve(['filter','map','takeWhile'],function(e,n){var t=n+1;ee.prototype[e]=function(e,n){var i=this.clone();return i.__iteratees__.push({iteratee:Et(e,n,1),type:t}),i.__filtered__=i.__filtered__||t!=z,i}}),Ve(['first','last'],function(e,n){var t='take'+(n?'Right':'');ee.prototype[e]=function(){return this[t](1).value()[0]}}),Ve(['initial','rest'],function(e,n){var t='drop'+(n?'':'Right');ee.prototype[e]=function(){return this.__filtered__?new ee(this):this[t](1)}}),Ve(['pluck','where'],function(e,n){var t=n?'filter':'map',i=n?Nn:ea;ee.prototype[e]=function(e){return this[t](i(e))}}),ee.prototype.compact=function(){return this.filter(Xi)},ee.prototype.reject=function(e,n){return e=Et(e,n,1),this.filter(function(n){return!e(n)})},ee.prototype.slice=function(e,n){e=null==e?0:+e||0;var t=this;return t.__filtered__&&(0<e||0>n)?new ee(t):(0>e?t=t.takeRight(-e):e&&(t=t.drop(e)),void 0!==n&&(n=+n||0,t=0>n?t.dropRight(-n):t.take(n-e)),t)},ee.prototype.takeRightWhile=function(e,n){return this.reverse().takeWhile(e,n).reverse()},ee.prototype.toArray=function(){return this.take(qa)},bn(ee.prototype,function(e,n){var t=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),a=f[i?'take'+('last'==n?'Right':''):n];a&&(f.prototype[n]=function(){var n=i?[1]:arguments,l=this.__chain__,r=this.__wrapped__,d=!!this.__actions__.length,o=r instanceof ee,p=n[0],h=o||$l(r);h&&t&&'function'==typeof p&&1!=p.length&&(o=h=!1);var u=function(e){return i&&l?a(e,1)[0]:a.apply(void 0,Ze([e],n))},c={func:fi,args:[u],thisArg:void 0},_=o&&!d;if(i&&!l)return _?(r=r.clone(),r.__actions__.push(c),e.call(r)):a.call(void 0,this.value())[0];if(!i&&h){r=_?r:new ee(this);var g=e.apply(r,n);return g.__actions__.push(c),new H(g,l)}return this.thru(u)})}),Ve(['join','pop','push','replace','shift','sort','splice','split','unshift'],function(e){var n=(/^(?:replace|split)$/.test(e)?_a:ua)[e],t=/^(?:push|sort|unshift)$/.test(e)?'tap':'thru',i=/^(?:join|pop|replace|shift)$/.test(e);f.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[t](function(t){return n.apply(t,e)})}}),bn(ee.prototype,function(e,n){var t=f[n];if(t){var i=t.name+'',a=Ja[i]||(Ja[i]=[]);a.push({name:n,func:t})}}),Ja[It(void 0,j).name]=[{name:'wrapper',func:void 0}],ee.prototype.clone=function(){var e=new ee(this.__wrapped__);return e.__actions__=Ke(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ke(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ke(this.__views__),e},ee.prototype.reverse=function(){if(this.__filtered__){var e=new ee(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},ee.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=$l(e),i=t?e.length:0,a=Bt(0,i,this.__views__),l=a.start,r=a.end,d=r-l,o=0>n?r:l-1,p=this.__iteratees__,h=p.length,u=0,c=Ba(d,this.__takeCount__);if(!t||i<B||i==d&&c==d)return Kn(e,this.__actions__);var _=[];outer:for(;d--&&u<c;){o+=n;for(var g=-1,s=e[o];++g<h;){var f=p[g],y=f.iteratee,x=f.type,m=y(s);if(x==z)s=m;else if(!m)if(x==L)continue outer;else break outer}_[u++]=s}return _},f.prototype.chain=function(){return si(this)},f.prototype.commit=function(){return new H(this.value(),this.__chain__)},f.prototype.concat=fl,f.prototype.plant=function(e){for(var n=this,t,i;n instanceof J;){i=ai(n),t?a.__wrapped__=i:t=i;var a=i;n=n.__wrapped__}return a.__wrapped__=e,t},f.prototype.reverse=function(){var e=this.__wrapped__,n=function(e){return e.reverse()};if(e instanceof ee){var t=e;return this.__actions__.length&&(t=new ee(this)),t=t.reverse(),t.__actions__.push({func:fi,args:[n],thisArg:void 0}),new H(t,this.__chain__)}return this.thru(n)},f.prototype.toString=function(){return this.value()+''},f.prototype.run=f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=function(){return Kn(this.__wrapped__,this.__actions__)},f.prototype.collect=f.prototype.map,f.prototype.head=f.prototype.first,f.prototype.select=f.prototype.filter,f.prototype.tail=f.prototype.rest,f}var I='3.10.1',A=1,j=2,v=4,w=8,N=16,O=32,R=64,C=128,E=256,U=30,W='...',S=150,F=16,B=200,L=1,z=2,M='Expected a function',D='__lodash_placeholder__',q='[object Arguments]',$='[object Array]',P='[object Boolean]',K='[object Date]',V='[object Error]',Y='[object Function]',J='[object Map]',G='[object Number]',X='[object Object]',Z='[object RegExp]',H='[object Set]',Q='[object String]',ee='[object WeakMap]',ne='[object ArrayBuffer]',te='[object Float32Array]',ie='[object Float64Array]',ae='[object Int8Array]',le='[object Int16Array]',re='[object Int32Array]',de='[object Uint8Array]',oe='[object Uint8ClampedArray]',pe='[object Uint16Array]',he='[object Uint32Array]',ue=/\b__p \+= '';/g,ce=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ge=/&(?:amp|lt|gt|quot|#39|#96);/g,se=/[&<>"'`]/g,fe=RegExp(ge.source),ye=RegExp(se.source),xe=/<%-([\s\S]+?)%>/g,me=/<%([\s\S]+?)%>/g,be=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Te=/^\w*$/,Ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ae=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,je=RegExp(Ae.source),ve=/[\u0300-\u036f\ufe20-\ufe23]/g,we=/\\(\\)?/g,Ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oe=/\w*$/,Re=/^0[xX]/,Ce=/^\[object .+?Constructor\]$/,Ee=/^\d+$/,Ue=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,We=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Fe=function(){return /[A-Z\xc0-\xd6\xd8-\xde]+(?=[A-Z\xc0-\xd6\xd8-\xde][a-z\xdf-\xf6\xf8-\xff]+)|[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+|[A-Z\xc0-\xd6\xd8-\xde]+|[0-9]+/g}(),Be=['Array','ArrayBuffer','Date','Error','Float32Array','Float64Array','Function','Int8Array','Int16Array','Int32Array','Math','Number','Object','RegExp','Set','String','_','clearTimeout','isFinite','parseFloat','parseInt','setTimeout','TypeError','Uint8Array','Uint8ClampedArray','Uint16Array','Uint32Array','WeakMap'],Le=-1,ze={};ze[te]=ze[ie]=ze[ae]=ze[le]=ze[re]=ze[de]=ze[oe]=ze[pe]=ze[he]=!0,ze[q]=ze[$]=ze[ne]=ze[P]=ze[K]=ze[V]=ze[Y]=ze[J]=ze[G]=ze[X]=ze[Z]=ze[H]=ze[Q]=ze[ee]=!1;var Me={};Me[q]=Me[$]=Me[ne]=Me[P]=Me[K]=Me[te]=Me[ie]=Me[ae]=Me[le]=Me[re]=Me[G]=Me[X]=Me[Z]=Me[Q]=Me[de]=Me[oe]=Me[pe]=Me[he]=!0,Me[V]=Me[Y]=Me[J]=Me[H]=Me[ee]=!1;var De={À:'A',Á:'A',Â:'A',Ã:'A',Ä:'A',Å:'A',à:'a',á:'a',â:'a',ã:'a',ä:'a',å:'a',Ç:'C',ç:'c',Ð:'D',ð:'d',È:'E',É:'E',Ê:'E',Ë:'E',è:'e',é:'e',ê:'e',ë:'e',Ì:'I',Í:'I',Î:'I',Ï:'I',ì:'i',í:'i',î:'i',ï:'i',Ñ:'N',ñ:'n',Ò:'O',Ó:'O',Ô:'O',Õ:'O',Ö:'O',Ø:'O',ò:'o',ó:'o',ô:'o',õ:'o',ö:'o',ø:'o',Ù:'U',Ú:'U',Û:'U',Ü:'U',ù:'u',ú:'u',û:'u',ü:'u',Ý:'Y',ý:'y',ÿ:'y',Æ:'Ae',æ:'ae',Þ:'Th',þ:'th',ß:'ss'},qe={"&":'&amp;',"<":'&lt;',">":'&gt;','"':'&quot;',"'":'&#39;',"`":'&#96;'},$e={"&amp;":'&',"&lt;":'<',"&gt;":'>',"&quot;":'"',"&#39;":'\'',"&#96;":'`'},Pe={function:!0,object:!0},Ke={0:'x30',1:'x31',2:'x32',3:'x33',4:'x34',5:'x35',6:'x36',7:'x37',8:'x38',9:'x39',A:'x41',B:'x42',C:'x43',D:'x44',E:'x45',F:'x46',a:'x61',b:'x62',c:'x63',d:'x64',e:'x65',f:'x66',n:'x6e',r:'x72',t:'x74',u:'x75',v:'x76',x:'x78'},Ve={"\\":'\\',"'":'\'',"\n":'n',"\r":'r',"\u2028":'u2028',"\u2029":'u2029'},Ye=Pe[typeof exports]&&exports&&!exports.nodeType&&exports,Je=Pe[typeof module]&&module&&!module.nodeType&&module,Ge=Ye&&Je&&'object'==typeof global&&global&&global.Object&&global,Xe=Pe[typeof self]&&self&&self.Object&&self,Ze=Pe[typeof window]&&window&&window.Object&&window,He=Je&&Je.exports===Ye&&Ye,Qe=Ge||Ze!==(this&&this.window)&&Ze||Xe||this,en=T();'function'==typeof define&&'object'==typeof define.amd&&define.amd?(Qe._=en,define(function(){return en})):Ye&&Je?He?(Je.exports=en)._=en:Ye._=en:Qe._=en}).call(this);</script><script>!function(){function e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function t(e){return null===e?NaN:+e}function l(e){return!isNaN(e)}function n(e){return{left:function(t,n,i,a){for(3>arguments.length&&(i=0),4>arguments.length&&(a=t.length);i<a;){var l=i+a>>>1;0>e(t[l],n)?i=l+1:a=l}return i},right:function(t,n,i,a){for(3>arguments.length&&(i=0),4>arguments.length&&(a=t.length);i<a;){var l=i+a>>>1;0<e(t[l],n)?a=l:i=l+1}return i}}}function a(e){return e.length}function r(e){for(var t=1;e*t%1;)t*=10;return t}function i(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function o(){this._=Object.create(null)}function s(e){return(e+="")===or||e[0]===sr?sr+e:e}function d(e){return(e+="")[0]===sr?e.slice(1):e}function g(e){return s(e)in this._}function p(e){return(e=s(e))in this._&&delete this._[e]}function h(){var e=[];for(var t in this._)e.push(d(t));return e}function c(){var e=0;for(var t in this._)++e;return e}function u(){for(var e in this._)return!1;return!0}function y(){this._=Object.create(null)}function m(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function f(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var a,l=0,i=dr.length;l<i;++l)if(a=dr[l]+t,a in e)return a}function x(){}function _(){}function v(e){function t(){for(var t,l=a,r=-1,i=l.length;++r<i;)(t=l[r].on)&&t.apply(this,arguments);return e}var a=[],n=new o;return t.on=function(t,r){var o,i=n.get(t);return 2>arguments.length?i&&i.on:(i&&(i.on=null,a=a.slice(0,o=a.indexOf(i)).concat(a.slice(o+1)),n.remove(t)),r&&a.push(n.set(t,{on:r})),e)},t}function b(){Wl.event.preventDefault()}function S(){for(var t,n=Wl.event;t=n.sourceEvent;)n=t;return n}function k(e){for(var t=new _,a=0,i=arguments.length;++a<i;)t[arguments[a]]=v(t);return t.of=function(n,i){return function(a){try{var l=a.sourceEvent=Wl.event;a.target=e,Wl.event=a,t[a.type].apply(n,i)}finally{Wl.event=l}}},t}function E(e){return pr(e,mr),e}function w(e){return"function"===typeof e?e:function(){return hr(e,this)}}function C(e){return"function"===typeof e?e:function(){return cr(e,this)}}function A(e,t){return e=Wl.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"===typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function j(e){return e.trim().replace(/\s+/g," ")}function z(e){return new RegExp("(?:^|\\s+)"+Wl.requote(e)+"(?:\\s+|$)","g")}function L(e){return(e+"").trim().split(/^|\s+/)}function T(e,t){e=L(e).map(M);var a=e.length;return"function"===typeof t?function(){for(var n=-1,i=t.apply(this,arguments);++n<a;)e[n](this,i)}:function(){for(var n=-1;++n<a;)e[n](this,t)}}function M(e){var t=z(e);return function(n,i){if(a=n.classList)return i?a.add(e):a.remove(e);var a=n.getAttribute("class")||"";i?(t.lastIndex=0,!t.test(a)&&n.setAttribute("class",j(a+" "+e))):n.setAttribute("class",j(a.replace(t," ")))}}function R(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"===typeof t?function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}:function(){this.style.setProperty(e,t,n)}}function N(e,t){return null==t?function(){delete this[e]}:"function"===typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function U(e){return"function"===typeof e?e:(e=Wl.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function P(e){return{__data__:e}}function q(e){return function(){return yr(this,e)}}function D(t){return arguments.length||(t=e),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function H(e,t){for(var a=0,l=e.length;a<l;a++)for(var r,o=e[a],s=0,i=o.length;s<i;s++)(r=o[s])&&t(r,s,a);return e}function O(e){return pr(e,xr),e}function Y(e){var t,a;return function(l,r,i){var o,s=e[i].update,d=s.length;for(i!=a&&(a=i,t=0),r>=t&&(t=r+1);!(o=s[t])&&++t<d;);return o}}function F(){var e=this.__transition__;e&&++e.active}function I(e,t,n){function a(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}var r="__on"+e,l=e.indexOf("."),i=Z;0<l&&(e=e.slice(0,l));var o=vr.get(e);return o&&(e=o,i=V),l?t?function(){var o=i(t,Jl(arguments));a.call(this),this.addEventListener(e,this[r]=o,o.$=n),o._=t}:a:t?x:function(){var t,n=new RegExp("^__on([^.]+)"+Wl.requote(e)+"$");for(var i in this)if(t=i.match(n)){var a=this[i];this.removeEventListener(t[1],a,a.$),delete this[i]}}}function Z(e,t){return function(n){var i=Wl.event;Wl.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{Wl.event=i}}}function V(e,t){var n=Z(e,t);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function X(){var e=".dragsuppress-"+ ++Sr,t="click"+e,n=Wl.select(Kl).on("touchmove"+e,b).on("dragstart"+e,b).on("selectstart"+e,b);if(br){var i=Ql.style,a=i[br];i[br]="none"}return function(l){if(n.on(e,null),br&&(i[br]=a),l){function e(){n.on(t,null)}n.on(t,function(){b(),e()},!0),setTimeout(e,0)}}}function B(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();if(0>kr&&(Kl.scrollX||Kl.scrollY)){e=Wl.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=e[0][0].getScreenCTM();kr=!(a.f||a.e),e.remove()}return kr?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var l=t.getBoundingClientRect();return[n.clientX-l.left-t.clientLeft,n.clientY-l.top-t.clientTop]}function W(){return Wl.event.changedTouches[0].identifier}function $(){return Wl.event.target}function J(){return Kl}function Q(e){return 0<e?1:0>e?-1:0}function G(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function K(e){return 1<e?0:-1>e?Er:Il(e)}function ee(e){return 1<e?Cr:-1>e?-Cr:Fl(e)}function te(e){return((e=Yl(e))-1/e)/2}function ne(e){return((e=Yl(e))+1/e)/2}function ie(e){return((e=Yl(2*e))-1)/(e+1)}function ae(e){return(e=Ol(e/2))*e}function le(){}function re(e,t,n){return this instanceof re?void(this.h=+e,this.s=+t,this.l=+n):2>arguments.length?e instanceof re?new re(e.h,e.s,e.l):ve(""+e,be,re):new re(e,t,n)}function oe(e,t,n){function i(e){return 360<e?e-=360:0>e&&(e+=360),60>e?l+(r-l)*e/60:180>e?r:240>e?l+(r-l)*(240-e)/60:l}function a(e){return Rl(255*i(e))}var l,r;return e=isNaN(e)?0:0>(e%=360)?e+360:e,t=isNaN(t)?0:0>t?0:1<t?1:t,n=0>n?0:1<n?1:n,r=.5>=n?n*(1+t):n+t-n*t,l=2*n-r,new me(a(e+120),a(e),a(e-120))}function se(e,t,n){return this instanceof se?void(this.h=+e,this.c=+t,this.l=+n):2>arguments.length?e instanceof se?new se(e.h,e.c,e.l):e instanceof ge?he(e.l,e.a,e.b):he((e=Se((e=Wl.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new se(e,t,n)}function de(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ge(n,Ml(e*=zr)*t,Ol(e)*t)}function ge(e,t,n){return this instanceof ge?void(this.l=+e,this.a=+t,this.b=+n):2>arguments.length?e instanceof ge?new ge(e.l,e.a,e.b):e instanceof se?de(e.h,e.c,e.l):Se((e=me(e)).r,e.g,e.b):new ge(e,t,n)}function pe(e,t,n){var i=(e+16)/116,a=i+t/500,l=i-n/200;return a=ce(a)*Or,i=ce(i)*Yr,l=ce(l)*Fr,new me(ye(3.2404542*a-1.5371385*i-.4985314*l),ye(-.969266*a+1.8760108*i+.041556*l),ye(.0556434*a-.2040259*i+1.0572252*l))}function he(e,t,n){return 0<e?new se(Tl(n,t)*Lr,Hl(t*t+n*n),e):new se(NaN,NaN,e)}function ce(e){return .206893034<e?e*e*e:(e-4/29)/7.787037}function ue(e){return .008856<e?Pl(e,1/3):7.787037*e+4/29}function ye(e){return Rl(255*(.00304>=e?12.92*e:1.055*Pl(e,1/2.4)-.055))}function me(e,t,n){return this instanceof me?void(this.r=~~e,this.g=~~t,this.b=~~n):2>arguments.length?e instanceof me?new me(e.r,e.g,e.b):ve(""+e,me,oe):new me(e,t,n)}function fe(e){return new me(e>>16,255&e>>8,255&e)}function xe(e){return fe(e)+""}function _e(e){return 16>e?"0"+ql(0,e).toString(16):Vl(255,e).toString(16)}function ve(e,t,n){var i,a,l,o=0,r=0,s=0;if(i=/([a-z]+)\((.*)\)/i.exec(e),i)switch(a=i[2].split(","),i[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return t(Ee(a[0]),Ee(a[1]),Ee(a[2]));}return(l=Vr.get(e))?t(l.r,l.g,l.b):(null==e||"#"!==e.charAt(0)||isNaN(l=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&l)>>4,o=o>>4|o,r=240&l,r=r>>4|r,s=15&l,s=s<<4|s):7===e.length&&(o=(16711680&l)>>16,r=(65280&l)>>8,s=255&l)),t(o,r,s))}function be(e,t,n){var i,a,r=Vl(e/=255,t/=255,n/=255),o=ql(e,t,n),s=o-r,d=(o+r)/2;return s?(a=.5>d?s/(o+r):s/(2-o-r),i=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,i*=60):(i=NaN,a=0<d&&1>d?0:i),new re(i,a,d)}function Se(e,t,n){e=ke(e),t=ke(t),n=ke(n);var i=ue((.4124564*e+.3575761*t+.1804375*n)/Or),a=ue((.2126729*e+.7151522*t+.072175*n)/Yr),l=ue((.0193339*e+.119192*t+.9503041*n)/Fr);return ge(116*a-16,500*(i-a),200*(a-l))}function ke(e){return .04045>=(e/=255)?e/12.92:Pl((e+.055)/1.055,2.4)}function Ee(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Rl(2.55*t):t}function we(e){return"function"===typeof e?e:function(){return e}}function Ce(e){return e}function Ae(e){return function(t,n,i){return 2===arguments.length&&"function"===typeof n&&(i=n,n=null),je(t,n,e,i)}}function je(e,t,n,i){function a(){var e,t=s.status;if(!t&&Le(s)||200<=t&&300>t||304===t){try{e=n.call(l,s)}catch(t){return void r.error.call(l,t)}r.load.call(l,e)}else r.error.call(l,s)}var l={},r=Wl.dispatch("beforesend","progress","load","error"),o={},s=new XMLHttpRequest,d=null;return Kl.XDomainRequest&&!("withCredentials"in s)&&/^(http(s)?:)?\/\//.test(e)&&(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=a:s.onreadystatechange=function(){3<s.readyState&&a()},s.onprogress=function(e){var t=Wl.event;Wl.event=e;try{r.progress.call(l,s)}finally{Wl.event=t}},l.header=function(e,t){return(e=(e+"").toLowerCase(),2>arguments.length)?o[e]:(null==t?delete o[e]:o[e]=t+"",l)},l.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",l):t},l.responseType=function(e){return arguments.length?(d=e,l):d},l.response=function(e){return n=e,l},["get","post"].forEach(function(e){l[e]=function(){return l.send.apply(l,[e].concat(Jl(arguments)))}}),l.send=function(n,i,a){if(2===arguments.length&&"function"===typeof i&&(a=i,i=null),s.open(n,e,!0),null==t||"accept"in o||(o.accept=t+",*/*"),s.setRequestHeader)for(var g in o)s.setRequestHeader(g,o[g]);return null!=t&&s.overrideMimeType&&s.overrideMimeType(t),null!=d&&(s.responseType=d),null!=a&&l.on("error",a).on("load",function(e){a(null,e)}),r.beforesend.call(l,s),s.send(null==i?null:i),l},l.abort=function(){return s.abort(),l},Wl.rebind(l,r,"on"),null==i?l:l.get(ze(i))}function ze(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Le(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Te(){var e=Me(),t=Re()-e;24<t?(isFinite(t)&&(clearTimeout($r),$r=setTimeout(Te,t)),Wr=0):(Wr=1,Gr(Te))}function Me(){var e=Date.now();for(Jr=Xr;Jr;)e>=Jr.t&&(Jr.f=Jr.c(e-Jr.t)),Jr=Jr.n;return e}function Re(){for(var e,t=Xr,n=Infinity;t;)t.f?t=e?e.n=t.n:Xr=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Br=e,n}function Ne(e,t){return t-(e?Nl(Dl(e)/Ll):1)}function Ue(e){var t=e.decimal,n=e.thousands,a=e.grouping,i=e.currency,l=a&&n?function(e,l){for(var r=e.length,i=[],t=0,o=a[0],s=0;0<r&&0<o&&(s+o+1>l&&(o=ql(1,l-s)),i.push(e.substring(r-=o,r+o)),!((s+=o+1)>l));)o=a[t=(t+1)%a.length];return i.reverse().join(n)}:Ce;return function(e){var n=Kr.exec(e),a=n[1]||" ",r=n[2]||">",o=n[3]||"-",s=n[4]||"",d=n[5],g=+n[6],p=n[7],h=n[8],c=n[9],u=1,y="",m="",f=!1,x=!0;switch(h&&(h=+h.substring(1)),(d||"0"===a&&"="===r)&&(d=a="0",r="="),c){case"n":p=!0,c="g";break;case"%":u=100,m="%",c="f";break;case"p":u=100,m="%",c="r";break;case"b":case"o":case"x":case"X":"#"===s&&(y="0"+c.toLowerCase());case"c":x=!1;case"d":f=!0,h=0;break;case"s":u=-1,c="r";}"$"===s&&(y=i[0],m=i[1]),"r"!=c||h||(c="g"),null!=h&&("g"==c?h=ql(1,Vl(21,h)):("e"==c||"f"==c)&&(h=ql(0,Vl(20,h)))),c=eo.get(c)||Pe;var _=d&&p;return function(e){var n=m;if(f&&e%1)return"";var s=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===o?"":o;if(0>u){var v=Wl.formatPrefix(e,h);e=v.scale(e),n=v.symbol+m}else e*=u;e=c(e,h);var b,S,k=e.lastIndexOf(".");if(0>k){var i=x?e.lastIndexOf("e"):-1;0>i?(b=e,S=""):(b=e.substring(0,i),S=e.substring(i))}else b=e.substring(0,k),S=t+e.substring(k+1);!d&&p&&(b=l(b,Infinity));var E=y.length+b.length+S.length+(_?0:s.length),w=E<g?Array(E=g-E+1).join(a):"";return _&&(b=l(w+b,w.length?g-S.length:Infinity)),s+=y,e=b+S,("<"===r?s+e+w:">"===r?w+s+e:"^"===r?w.substring(0,E>>=1)+s+e+w.substring(E):s+(_?e:w+e))+n}}}function Pe(e){return e+""}function qe(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function De(e,t,n){function i(t){var n=e(t),i=l(n,1);return t-n<i-t?n:i}function a(n){return t(n=e(new no(n-1)),1),n}function l(e,n){return t(e=new no(+e),n),e}function r(e,i,l){var r=a(e),o=[];if(1<l)for(;r<i;)n(r)%l||o.push(new Date(+r)),t(r,1);else for(;r<i;)o.push(new Date(+r)),t(r,1);return o}e.floor=e,e.round=i,e.ceil=a,e.offset=l,e.range=r;var o=e.utc=He(e);return o.floor=o,o.round=He(i),o.ceil=He(a),o.offset=He(l),o.range=function(e,t,n){try{no=qe;var i=new qe;return i._=e,r(i,t,n)}finally{no=Date}},e}function He(e){return function(t,n){try{no=qe;var i=new qe;return i._=t,e(i,n)._}finally{no=Date}}}function Oe(e){function t(e){function t(t){for(var n,l,r,o=[],s=-1,i=0;++s<a;)37===e.charCodeAt(s)&&(o.push(e.slice(i,s)),null!=(l=ao[n=e.charAt(++s)])&&(n=e.charAt(++s)),(r=v[n])&&(n=r(t,null==l?"e"===n?" ":"0":l)),o.push(n),i=s+1);return o.push(e.slice(i,s)),o.join("")}var a=e.length;return t.parse=function(t){var a={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},l=n(a,e,t,0);if(l!=t.length)return null;"p"in a&&(a.H=a.H%12+12*a.p);var i=null!=a.Z&&no!==qe,r=new(i?qe:no);return"j"in a?r.setFullYear(a.y,0,a.j):"w"in a&&("W"in a||"U"in a)?(r.setFullYear(a.y,0,1),r.setFullYear(a.y,0,"W"in a?(a.w+6)%7+7*a.W-(r.getDay()+5)%7:a.w+7*a.U-(r.getDay()+6)%7)):r.setFullYear(a.y,a.m,a.d),r.setHours(a.H+(0|a.Z/100),a.M+a.Z%100,a.S,a.L),i?r._:r},t.toString=function(){return e},t}function n(e,a,l,r){for(var o,s,d,t=0,i=a.length,n=l.length;t<i;){if(r>=n)return-1;if(o=a.charCodeAt(t++),37===o){if(d=a.charAt(t++),s=b[d in ao?a.charAt(t++):d],!s||0>(r=s(e,l,r)))return-1;}else if(o!=l.charCodeAt(r++))return-1}return r}var i=e.dateTime,a=e.date,l=e.time,r=e.periods,o=e.days,s=e.shortDays,g=e.months,p=e.shortMonths;t.utc=function(e){function n(e){try{no=qe;var t=new no;return t._=e,i(t)}finally{no=Date}}var i=t(e);return n.parse=function(e){try{no=qe;var t=i.parse(e);return t&&t._}finally{no=Date}},n.toString=i.toString,n},t.multi=t.utc.multi=rt;var d=Wl.map(),h=Fe(o),c=Ie(o),u=Fe(s),y=Ie(s),m=Fe(g),f=Ie(g),x=Fe(p),_=Ie(p);r.forEach(function(e,t){d.set(e.toLowerCase(),t)});var v={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return p[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(i),d:function(e,t){return Ye(e.getDate(),t,2)},e:function(e,t){return Ye(e.getDate(),t,2)},H:function(e,t){return Ye(e.getHours(),t,2)},I:function(e,t){return Ye(e.getHours()%12||12,t,2)},j:function(e,t){return Ye(1+to.dayOfYear(e),t,3)},L:function(e,t){return Ye(e.getMilliseconds(),t,3)},m:function(e,t){return Ye(e.getMonth()+1,t,2)},M:function(e,t){return Ye(e.getMinutes(),t,2)},p:function(e){return r[+(12<=e.getHours())]},S:function(e,t){return Ye(e.getSeconds(),t,2)},U:function(e,t){return Ye(to.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ye(to.mondayOfYear(e),t,2)},x:t(a),X:t(l),y:function(e,t){return Ye(e.getFullYear()%100,t,2)},Y:function(e,t){return Ye(e.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},b={a:function(e,t,a){u.lastIndex=0;var i=u.exec(t.slice(a));return i?(e.w=y.get(i[0].toLowerCase()),a+i[0].length):-1},A:function(e,t,a){h.lastIndex=0;var i=h.exec(t.slice(a));return i?(e.w=c.get(i[0].toLowerCase()),a+i[0].length):-1},b:function(e,t,a){x.lastIndex=0;var i=x.exec(t.slice(a));return i?(e.m=_.get(i[0].toLowerCase()),a+i[0].length):-1},B:function(e,t,a){m.lastIndex=0;var i=m.exec(t.slice(a));return i?(e.m=f.get(i[0].toLowerCase()),a+i[0].length):-1},c:function(e,t,a){return n(e,v.c.toString(),t,a)},d:Qe,e:Qe,H:et,I:et,j:Ke,L:it,m:Ge,M:tt,p:function(e,t,a){var i=d.get(t.slice(a,a+=2).toLowerCase());return null==i?-1:(e.p=i,a)},S:nt,U:Ve,w:Ze,W:Xe,x:function(e,t,a){return n(e,v.x.toString(),t,a)},X:function(e,t,a){return n(e,v.X.toString(),t,a)},y:We,Y:Be,Z:$e,"%":lt};return t}function Ye(e,t,n){var i=0>e?"-":"",a=(i?-e:e)+"",l=a.length;return i+(l<n?Array(n-l+1).join(t)+a:a)}function Fe(e){return new RegExp("^(?:"+e.map(Wl.requote).join("|")+")","i")}function Ie(e){for(var t=new o,a=-1,i=e.length;++a<i;)t.set(e[a].toLowerCase(),a);return t}function Ze(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+1));return i?(e.w=+i[0],a+i[0].length):-1}function Ve(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a));return i?(e.U=+i[0],a+i[0].length):-1}function Xe(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a));return i?(e.W=+i[0],a+i[0].length):-1}function Be(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+4));return i?(e.y=+i[0],a+i[0].length):-1}function We(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+2));return i?(e.y=Je(+i[0]),a+i[0].length):-1}function $e(e,t,n){return /^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Je(e){return e+(68<e?1900:2e3)}function Ge(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+2));return i?(e.m=i[0]-1,a+i[0].length):-1}function Qe(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+2));return i?(e.d=+i[0],a+i[0].length):-1}function Ke(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+3));return i?(e.j=+i[0],a+i[0].length):-1}function et(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+2));return i?(e.H=+i[0],a+i[0].length):-1}function tt(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+2));return i?(e.M=+i[0],a+i[0].length):-1}function nt(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+2));return i?(e.S=+i[0],a+i[0].length):-1}function it(e,t,a){lo.lastIndex=0;var i=lo.exec(t.slice(a,a+3));return i?(e.L=+i[0],a+i[0].length):-1}function at(e){var t=e.getTimezoneOffset(),n=0<t?"-":"+",i=0|rr(t)/60,a=rr(t)%60;return n+Ye(i,"0",2)+Ye(a,"0",2)}function lt(e,t,a){ro.lastIndex=0;var i=ro.exec(t.slice(a,a+1));return i?a+i[0].length:-1}function rt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,i=e[n];!i[1](t);)i=e[++n];return i[0](t)}}function ot(){}function st(e,t,n){var i=n.s=e+t,a=i-e;n.t=e-(i-a)+(t-a)}function dt(e,t){e&&po.hasOwnProperty(e.type)&&po[e.type](e,t)}function gt(e,t,a){var l,r=-1,i=e.length-a;for(t.lineStart();++r<i;)l=e[r],t.point(l[0],l[1],l[2]);t.lineEnd()}function pt(e,t){var a=-1,i=e.length;for(t.polygonStart();++a<i;)gt(e[a],t,1);t.polygonEnd()}function ht(){function e(e,t){e*=zr,t=t*zr/2+Er/4;var n=e-i,r=0<=n?1:-1,o=r*n,s=Ml(t),d=Ol(t),g=l*d,p=a*s+g*Ml(o),h=g*r*Ol(o);co.add(Tl(h,p)),i=e,a=s,l=d}var t,n,i,a,l;uo.point=function(r,o){uo.point=e,i=(t=r)*zr,a=Ml(o=(n=o)*zr/2+Er/4),l=Ol(o)},uo.lineEnd=function(){e(t,n)}}function ct(e){var t=e[0],n=e[1],i=Ml(n);return[i*Ml(t),i*Ol(t),Ol(n)]}function ut(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function mt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ft(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function xt(e){var t=Hl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function _t(e){return[Tl(e[1],e[0]),ee(e[2])]}function vt(e,t){return rr(e[0]-t[0])<Ar&&rr(e[1]-t[1])<Ar}function bt(e,t){e*=zr;var n=Ml(t*=zr);St(n*Ml(e),n*Ol(e),Ol(t))}function St(e,t,n){++yo,fo+=(e-fo)/yo,xo+=(t-xo)/yo,_o+=(n-_o)/yo}function kt(){function e(e,a){e*=zr;var l=Ml(a*=zr),r=l*Ml(e),o=l*Ol(e),s=Ol(a),d=Tl(Hl((d=n*s-i*o)*d+(d=i*r-t*s)*d+(d=t*o-n*r)*d),t*r+n*o+i*s);mo+=d,vo+=d*(t+(t=r)),bo+=d*(n+(n=o)),So+=d*(i+(i=s)),St(t,n,i)}var t,n,i;Co.point=function(a,l){a*=zr;var r=Ml(l*=zr);t=r*Ml(a),n=r*Ol(a),i=Ol(l),Co.point=e,St(t,n,i)}}function Et(){Co.point=bt}function wt(){function e(e,t){e*=zr;var n=Ml(t*=zr),r=n*Ml(e),o=n*Ol(e),s=Ol(t),d=a*s-l*o,g=l*r-i*s,p=i*o-a*r,h=Hl(d*d+g*g+p*p),c=i*r+a*o+l*s,u=h&&-K(c)/h,y=Tl(h,c);ko+=u*d,Eo+=u*g,wo+=u*p,mo+=y,vo+=y*(i+(i=r)),bo+=y*(a+(a=o)),So+=y*(l+(l=s)),St(i,a,l)}var t,n,i,a,l;Co.point=function(r,o){t=r,n=o,Co.point=e,r*=zr;var s=Ml(o*=zr);i=s*Ml(r),a=s*Ol(r),l=Ol(o),St(i,a,l)},Co.lineEnd=function(){e(t,n),Co.lineEnd=Et,Co.point=bt}}function Ct(){return!0}function At(e,t,a,l,r){var o=[],s=[];if(e.forEach(function(e){if(!(0>=(t=e.length-1))){var t,n=e[0],l=e[t];if(vt(n,l)){r.lineStart();for(var d=0;d<t;++d)r.point((n=e[d])[0],n[1]);return void r.lineEnd()}var i=new zt(n,e,null,!0),a=new zt(n,null,i,!1);i.o=a,o.push(i),s.push(a),i=new zt(l,e,null,!1),a=new zt(l,null,i,!0),i.o=a,o.push(i),s.push(a)}}),s.sort(t),jt(o),jt(s),!!o.length){for(var d=0,i=a,g=s.length;d<g;++d)s[d].e=i=!i;for(var n,p,h=o[0];;){for(var c=h,u=!0;c.v;)if((c=c.n)===h)return;n=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(u)for(var d=0,g=n.length;d<g;++d)r.point((p=n[d])[0],p[1]);else l(c.x,c.n.x,1,r);c=c.n}else{if(u){n=c.p.z;for(var d=n.length-1;0<=d;--d)r.point((p=n[d])[0],p[1])}else l(c.x,c.p.x,-1,r);c=c.p}c=c.o,n=c.z,u=!u}while(!c.v);r.lineEnd()}}}function jt(e){if(t=e.length){for(var t,n,l=0,i=e[0];++l<t;)i.n=n=e[l],n.p=i,i=n;i.n=n=e[0],n.p=i}}function zt(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Lt(e,t,n,i){return function(a,l){function r(t,n){var i=a(t,n);e(t=i[0],n=i[1])&&l.point(t,n)}function o(e,t){var n=a(e,t);m.point(n[0],n[1])}function s(){x.point=o,m.lineStart()}function d(){x.point=r,m.lineEnd()}function g(e,t){y.push([e,t]);var n=a(e,t);v.point(n[0],n[1])}function p(){v.lineStart(),y=[]}function h(){g(y[0][0],y[0][1]),v.lineEnd();var e,t=v.clean(),a=_.buffer(),r=a.length;if(y.pop(),u.push(y),y=null,!!r){if(1&t){e=a[0];var o,r=e.length-1,s=-1;if(0<r){for(b||(l.polygonStart(),b=!0),l.lineStart();++s<r;)l.point((o=e[s])[0],o[1]);l.lineEnd()}return}1<r&&2&t&&a.push(a.pop().concat(a.shift())),c.push(a.filter(Tt))}}var c,u,y,m=t(l),f=a.invert(i[0],i[1]),x={point:r,lineStart:s,lineEnd:d,polygonStart:function(){x.point=g,x.lineStart=p,x.lineEnd=h,c=[],u=[]},polygonEnd:function(){x.point=r,x.lineStart=s,x.lineEnd=d,c=Wl.merge(c);var e=Ut(f,u);c.length?(!b&&(l.polygonStart(),b=!0),At(c,Rt,e,n,l)):e&&(!b&&(l.polygonStart(),b=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),b&&(l.polygonEnd(),b=!1),c=u=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}},_=Mt(),v=t(_),b=!1;return x}}function Tt(e){return 1<e.length}function Mt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:x,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function Rt(e,t){return(0>(e=e.x)[0]?e[1]-Cr-Ar:Cr-e[1])-(0>(t=t.x)[0]?t[1]-Cr-Ar:Cr-t[1])}function Nt(e,t,n,i){var a,l,r=Ol(e-n);return rr(r)>Ar?zl((Ol(t)*(l=Ml(i))*Ol(n)-Ol(i)*(a=Ml(t))*Ol(e))/(a*l*r)):(t+i)/2}function Ut(e,t){var a=e[0],l=e[1],r=[Ol(a),-Ml(a),0],o=0,s=0;co.reset();for(var d=0,i=t.length;d<i;++d){var n=t[d],g=n.length;if(g)for(var p=n[0],h=p[0],c=p[1]/2+Er/4,u=Ol(c),y=Ml(c),m=1;;){m===g&&(m=0),e=n[m];var f=e[0],x=e[1]/2+Er/4,_=Ol(x),v=Ml(x),b=f-h,S=0<=b?1:-1,E=S*b,w=E>Er,C=u*_;if(co.add(Tl(C*S*Ol(E),y*v+C*Ml(E))),o+=w?b+S*wr:b,w^h>=a^f>=a){var k=yt(ct(p),ct(e));xt(k);var A=yt(r,k);xt(A);var j=(w^0<=b?-1:1)*ee(A[2]);(l>j||l===j&&(k[0]||k[1]))&&(s+=w^0<=b?1:-1)}if(!m++)break;h=f,u=_,y=v,p=e}}return(o<-Ar||o<Ar&&0>co)^1&s}function Pt(e){function n(e,t){return Ml(e)*Ml(t)>l}function i(e,n,i){var a=ct(e),r=ct(n),o=[1,0,0],s=yt(a,r),d=ut(s,s),g=s[0],p=d-g*g;if(!p)return!i&&e;var h=yt(o,s),c=ft(o,l*d/p),y=ft(s,-l*g/p);mt(c,y);var m=h,u=ut(c,m),f=ut(m,m),x=u*u-f*(ut(c,c)-1);if(!(0>x)){var _=Hl(x),t=ft(m,(-u-_)/f);if(mt(t,c),t=_t(t),!i)return t;var v,b=e[0],S=n[0],k=e[1],E=n[1];S<b&&(v=b,b=S,S=v);var C=S-b,A=rr(C-Er)<Ar;if(!A&&E<k&&(v=k,k=E,E=v),A||C<Ar?A?0<k+E^t[1]<(rr(t[0]-b)<Ar?k:E):k<=t[1]&&t[1]<=E:C>Er^(b<=t[0]&&t[0]<=S)){var j=ft(m,(-u+_)/f);return mt(j,c),[t,_t(j)]}}}function a(t,n){var i=o?e:Er-e,a=0;return t<-i?a|=1:t>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}var l=Ml(e),o=0<l,r=rr(l)>Ar,t=gn(e,6*zr);return Lt(n,function(e){var l,s,d,g,p;return{lineStart:function(){g=d=!1,p=1},point:function(h,u){var y,m=[h,u],f=n(h,u),x=o?f?0:a(h,u):f?a(h+(0>h?Er:-Er),u):0;if(!l&&(g=d=f)&&e.lineStart(),f!==d&&(y=i(l,m),(vt(l,y)||vt(m,y))&&(m[0]+=Ar,m[1]+=Ar,f=n(m[0],m[1]))),f!==d)p=0,f?(e.lineStart(),y=i(m,l),e.point(y[0],y[1])):(y=i(l,m),e.point(y[0],y[1]),e.lineEnd()),l=y;else if(r&&l&&o^f){var c;!(x&s)&&(c=i(m,l,!0))&&(p=0,o?(e.lineStart(),e.point(c[0][0],c[0][1]),e.point(c[1][0],c[1][1]),e.lineEnd()):(e.point(c[1][0],c[1][1]),e.lineEnd(),e.lineStart(),e.point(c[0][0],c[0][1])))}!f||l&&vt(l,m)||e.point(m[0],m[1]),l=m,d=f,s=x},lineEnd:function(){d&&e.lineEnd(),l=null},clean:function(){return p|(g&&d)<<1}}},t,o?[0,-e]:[-Er,e-Er])}function qt(e,t,n,i){return function(l){var o,r=l.a,a=l.b,s=r.x,d=r.y,g=a.x,p=a.y,h=0,c=1,u=g-s,y=p-d;if(o=e-s,u||!(0<o)){if(o/=u,0>u){if(o<h)return;o<c&&(c=o)}else if(0<u){if(o>c)return;o>h&&(h=o)}if(o=n-s,u||!(0>o)){if(o/=u,0>u){if(o>c)return;o>h&&(h=o)}else if(0<u){if(o<h)return;o<c&&(c=o)}if(o=t-d,y||!(0<o)){if(o/=y,0>y){if(o<h)return;o<c&&(c=o)}else if(0<y){if(o>c)return;o>h&&(h=o)}if(o=i-d,y||!(0>o)){if(o/=y,0>y){if(o>c)return;o>h&&(h=o)}else if(0<y){if(o<h)return;o<c&&(c=o)}return 0<h&&(l.a={x:s+h*u,y:d+h*y}),1>c&&(l.b={x:s+c*u,y:d+c*y}),l}}}}}}function Dt(e,t,n,i){function l(i,a){return rr(i[0]-e)<Ar?0<a?0:3:rr(i[0]-n)<Ar?0<a?2:1:rr(i[1]-t)<Ar?0<a?1:0:0<a?3:2}function a(e,t){return r(e.x,t.x)}function r(e,t){var n=l(e,1),i=l(t,1);return n===i?0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]:n-i}return function(o){function s(e){for(var t=0,l=u.length,n=e[1],r=0;r<l;++r)for(var i,o=1,s=u[r],d=s.length,g=s[0];o<d;++o)i=s[o],g[1]<=n?i[1]>n&&0<G(g,i,e)&&++t:i[1]<=n&&0>G(g,i,e)&&--t,g=i;return 0!==t}function d(o,s,d,g){var p=0,a=0;if(null==o||(p=l(o,d))!==(a=l(s,d))||0>r(o,s)^0<d)do g.point(0===p||3===p?e:n,1<p?i:t);while((p=(p+d+4)%4)!==a);else g.point(s[0],s[1])}function g(a,l){return e<=a&&a<=n&&t<=l&&l<=i}function p(e,t){g(e,t)&&o.point(e,t)}function h(e,t){e=ql(-jo,Vl(jo,e)),t=ql(-jo,Vl(jo,t));var n=g(e,t);if(u&&m.push([e,t]),w)f=e,_=t,b=n,w=!1,n&&(o.lineStart(),o.point(e,t));else if(n&&E)o.point(e,t);else{var i={a:{x:S,y:k},b:{x:e,y:t}};A(i)?(!E&&(o.lineStart(),o.point(i.a.x,i.a.y)),o.point(i.b.x,i.b.y),!n&&o.lineEnd(),C=!1):n&&(o.lineStart(),o.point(e,t),C=!1)}S=e,k=t,E=n}var c,u,m,f,_,b,S,k,E,w,C,y=o,x=Mt(),A=qt(e,t,n,i),v={point:p,lineStart:function(){v.point=h,u&&u.push(m=[]),w=!0,E=!1,S=k=NaN},lineEnd:function(){c&&(h(f,_),b&&E&&x.rejoin(),c.push(x.buffer())),v.point=p,E&&o.lineEnd()},polygonStart:function(){o=x,c=[],u=[],C=!0},polygonEnd:function(){o=y,c=Wl.merge(c);var t=s([e,i]),n=C&&t,l=c.length;(n||l)&&(o.polygonStart(),n&&(o.lineStart(),d(null,null,1,o),o.lineEnd()),l&&At(c,a,t,d,o),o.polygonEnd()),c=u=m=null}};return v}}function Ht(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),n}function Ot(e){var t=0,n=Er/3,i=tn(e),a=i(t,n);return a.parallels=function(e){return arguments.length?i(t=e[0]*Er/180,n=e[1]*Er/180):[180*(t/Er),180*(n/Er)]},a}function Yt(e,t){function i(e,t){var i=Hl(n-2*l*Ol(t))/l;return[i*Ol(e*=l),r-i*Ml(e)]}var a=Ol(e),l=(a+Ol(t))/2,n=1+a*(2*l-a),r=Hl(n)/l;return i.invert=function(e,t){var i=r-t;return[Tl(e,i)/l,ee((n-(e*e+i*i)*l*l)/(2*l))]},i}function Ft(){function e(e,t){Lo+=a*e-i*t,i=e,a=t}var t,n,i,a;Uo.point=function(l,r){Uo.point=e,t=i=l,n=a=r},Uo.lineEnd=function(){e(t,n)}}function It(){function e(e,t){r.push("M",e,",",t,l)}function t(e,t){r.push("M",e,",",t),o.point=n}function n(e,t){r.push("L",e,",",t)}function i(){o.point=e}function a(){r.push("Z")}var l=Zt(4.5),r=[],o={point:e,lineStart:function(){o.point=t},lineEnd:i,polygonStart:function(){o.lineEnd=a},polygonEnd:function(){o.lineEnd=i,o.point=e},pointRadius:function(e){return l=Zt(e),o},result:function(){if(r.length){var e=r.join("");return r=[],e}}};return o}function Zt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Vt(e,t){fo+=e,xo+=t,++_o}function Xt(){function e(e,i){var a=e-t,l=i-n,r=Hl(a*a+l*l);vo+=r*(t+e)/2,bo+=r*(n+i)/2,So+=r,Vt(t=e,n=i)}var t,n;qo.point=function(i,a){qo.point=e,Vt(t=i,n=a)}}function Bt(){qo.point=Vt}function Wt(){function e(e,t){var n=e-i,l=t-a,r=Hl(n*n+l*l);vo+=r*(i+e)/2,bo+=r*(a+t)/2,So+=r,r=a*e-i*t,ko+=r*(i+e),Eo+=r*(a+t),wo+=3*r,Vt(i=e,a=t)}var t,n,i,a;qo.point=function(l,r){qo.point=e,Vt(t=i=l,n=a=r)},qo.lineEnd=function(){e(t,n)}}function $t(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,r,0,wr)}function n(t,n){e.moveTo(t,n),o.point=i}function i(t,n){e.lineTo(t,n)}function a(){o.point=t}function l(){e.closePath()}var r=4.5,o={point:t,lineStart:function(){o.point=n},lineEnd:a,polygonStart:function(){o.lineEnd=l},polygonEnd:function(){o.lineEnd=a,o.point=t},pointRadius:function(e){return r=e,o},result:x};return o}function Jt(e){function t(e){return(a?i:n)(e)}function n(t){return Kt(t,function(n,i){n=e(n,i),t.point(n[0],n[1])})}function i(t){function n(n,i){n=e(n,i),t.point(n[0],n[1])}function i(){_=NaN,E.point=r,t.lineStart()}function r(n,i){var r=ct([n,i]),o=e(n,i);l(_,v,x,b,S,k,_=o[0],v=o[1],x=n,b=r[0],S=r[1],k=r[2],a,t),t.point(_,v)}function o(){E.point=n,t.lineEnd()}function s(){i(),E.point=d,E.lineEnd=g}function d(e,t){r(p=e,h=t),c=_,u=v,y=b,m=S,f=k,E.point=r}function g(){l(_,v,x,b,S,k,c,u,p,y,m,f,a,t),E.lineEnd=o,o()}var p,h,c,u,y,m,f,x,_,v,b,S,k,E={point:n,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),E.lineStart=s},polygonEnd:function(){t.polygonEnd(),E.lineStart=i}};return E}function l(t,n,i,s,d,g,h,u,y,f,x,_,v,S){var k=h-t,E=u-n,w=k*k+E*E;if(w>4*r&&v--){var C=s+f,a=d+x,b=g+_,c=Hl(C*C+a*a+b*b),m=Fl(b/=c),A=rr(rr(b)-1)<Ar||rr(i-y)<Ar?(i+y)/2:Tl(a,C),j=e(A,m),p=j[0],z=j[1],L=p-t,T=z-n,M=E*L-k*T;(M*M/w>r||.3<rr((k*L+E*T)/w-.5)||s*f+d*x+g*_<o)&&(l(t,n,i,s,d,g,p,z,A,C/=c,a/=c,b,v,S),S.point(p,z),l(p,z,A,C,a,b,h,u,y,f,x,_,v,S))}}var r=.5,o=Ml(30*zr),a=16;return t.precision=function(e){return arguments.length?(a=0<(r=e*e)&&16,t):Hl(r)},t}function Gt(e){var t=Jt(function(t,n){return e([t*Lr,n*Lr])});return function(e){return nn(t(e))}}function Qt(e){this.stream=e}function Kt(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function en(e){return tn(function(){return e})()}function tn(e){function t(e){return e=o(e[0]*zr,e[1]*zr),[e[0]*h+s,d-e[1]*h]}function n(e){return e=o.invert((e[0]-s)/h,(d-e[1])/h),e&&[e[0]*Lr,e[1]*Lr]}function i(){o=Ht(r=rn(f,x,v),l);var e=l(y,m);return s=c-e[0]*h,d=u+e[1]*h,a()}function a(){return g&&(g.valid=!1,g=null),t}var l,r,o,s,d,g,p=Jt(function(e,t){return e=l(e,t),[e[0]*h+s,d-e[1]*h]}),h=150,c=480,u=250,y=0,m=0,f=0,x=0,v=0,b=Ao,S=Ce,k=null,E=null;return t.stream=function(e){return g&&(g.valid=!1),g=nn(b(r,p(S(e)))),g.valid=!0,g},t.clipAngle=function(e){return arguments.length?(b=null==e?(k=e,Ao):Pt((k=+e)*zr),a()):k},t.clipExtent=function(e){return arguments.length?(E=e,S=e?Dt(e[0][0],e[0][1],e[1][0],e[1][1]):Ce,a()):E},t.scale=function(e){return arguments.length?(h=+e,i()):h},t.translate=function(e){return arguments.length?(c=+e[0],u=+e[1],i()):[c,u]},t.center=function(e){return arguments.length?(y=e[0]%360*zr,m=e[1]%360*zr,i()):[y*Lr,m*Lr]},t.rotate=function(e){return arguments.length?(f=e[0]%360*zr,x=e[1]%360*zr,v=2<e.length?e[2]%360*zr:0,i()):[f*Lr,x*Lr,v*Lr]},Wl.rebind(t,p,"precision"),function(){return l=e.apply(this,arguments),t.invert=l.invert&&n,i()}}function nn(e){return Kt(e,function(t,n){e.point(t*zr,n*zr)})}function an(e,t){return[e,t]}function ln(e,t){return[e>Er?e-wr:e<-Er?e+wr:e,t]}function rn(e,t,n){return e?t||n?Ht(sn(e),dn(t,n)):sn(e):t||n?dn(t,n):ln}function on(e){return function(t,n){return t+=e,[t>Er?t-wr:t<-Er?t+wr:t,n]}}function sn(e){var t=on(e);return t.invert=on(-e),t}function dn(e,t){function n(e,t){var n=Ml(t),o=Ml(e)*n,s=Ol(e)*n,d=Ol(t),g=d*i+o*a;return[Tl(s*l-g*r,o*i-d*a),ee(g*l+s*r)]}var i=Ml(e),a=Ol(e),l=Ml(t),r=Ol(t);return n.invert=function(e,t){var n=Ml(t),o=Ml(e)*n,s=Ol(e)*n,d=Ol(t),g=d*l-s*r;return[Tl(s*l+d*r,o*i+g*a),ee(g*i-o*a)]},n}function gn(e,n){var i=Ml(e),a=Ol(e);return function(l,r,o,s){var d=o*n;null==l?(l=e+o*wr,r=e-.5*d):(l=pn(i,l),r=pn(i,r),(0<o?l<r:l>r)&&(l+=o*wr));for(var g,p=l;0<o?p>r:p<r;p-=d)s.point((g=_t([i,-a*Ml(p),-a*Ol(p)]))[0],g[1])}}function pn(e,t){var n=ct(t);n[0]-=e,xt(n);var i=K(-n[1]);return((0>-n[2]?-i:i)+2*Zl-Ar)%(2*Zl)}function hn(e,t,n){var i=Wl.range(e,t-Ar,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function cn(e,t,n){var i=Wl.range(e,t-Ar,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function un(e){return e.source}function yn(e){return e.target}function mn(e,t,n,i){var a=Ml(t),l=Ol(t),r=Ml(i),o=Ol(i),s=a*Ml(e),g=a*Ol(e),p=r*Ml(n),h=r*Ol(n),c=2*Fl(Hl(ae(i-t)+a*r*ae(n-e))),d=1/Ol(c),u=c?function(e){var t=Ol(e*=c)*d,n=Ol(c-e)*d,i=n*s+t*p,a=n*g+t*h;return[Tl(a,i)*Lr,Tl(n*l+t*o,Hl(i*i+a*a))*Lr]}:function(){return[e*Lr,t*Lr]};return u.distance=c,u}function fn(e,t){function n(t,n){var i=Ml(t),a=Ml(n),l=e(i*a);return[l*a*Ol(t),l*Ol(n)]}return n.invert=function(e,n){var i=Hl(e*e+n*n),a=t(i),l=Ol(a),r=Ml(a);return[Tl(e*l,i*r),Fl(i&&n*l/i)]},n}function xn(e,i){function a(e,i){0<n?i<-Cr+Ar&&(i=-Cr+Ar):i>Cr-Ar&&(i=Cr-Ar);var a=n/Pl(r(i),t);return[a*Ol(t*e),n-a*Ml(t*e)]}var l=Ml(e),r=function(e){return jl(Er/4+e/2)},t=e===i?Ol(e):Dl(l/Ml(i))/Dl(r(i)/r(e)),n=l*Pl(r(e),t)/t;return t?(a.invert=function(e,i){var a=n-i,l=Q(t)*Hl(e*e+a*a);return[Tl(e,a)/t,2*zl(Pl(n/l,1/t))-Cr]},a):vn}function _n(e,t){function i(e,t){var i=n-t;return[i*Ol(l*e),n-i*Ml(l*e)]}var a=Ml(e),l=e===t?Ol(e):(a-Ml(t))/(t-e),n=a/l+e;return rr(l)<Ar?an:(i.invert=function(e,t){var i=n-t;return[Tl(e,i)/l,n-Q(l)*Hl(e*e+i*i)]},i)}function vn(e,t){return[e,Dl(jl(Er/4+t/2))]}function bn(e){var n,i=en(e),a=i.scale,l=i.translate,r=i.clipExtent;return i.scale=function(){var e=a.apply(i,arguments);return e===i?n?i.clipExtent(null):i:e},i.translate=function(){var e=l.apply(i,arguments);return e===i?n?i.clipExtent(null):i:e},i.clipExtent=function(e){var o=r.apply(i,arguments);if(o!==i)n&&(o=null);else if(n=null==e){var s=Er*a(),d=l();r([[d[0]-s,d[1]-s],[d[0]+s,d[1]+s]])}return o},i.clipExtent(null)}function Sn(e,t){return[Dl(jl(Er/4+t/2)),-e]}function kn(e){return e[0]}function En(e){return e[1]}function wn(e){for(var t=e.length,n=[0,1],a=2,l=2;l<t;l++){for(;1<a&&0>=G(e[n[a-2]],e[n[a-1]],e[l]);)--a;n[a++]=l}return n.slice(0,a)}function Cn(e,t){return e[0]-t[0]||e[1]-t[1]}function An(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function jn(e,t,n,i){var a=e[0],l=n[0],r=t[0]-a,o=i[0]-l,s=e[1],d=n[1],g=t[1]-s,p=i[1]-d,h=(o*(s-d)-p*(a-l))/(p*r-o*g);return[a+h*r,s+h*g]}function zn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Ln(){Gn(this),this.edge=this.site=this.circle=null}function Tn(e){var t=Go.pop()||new Ln;return t.site=e,t}function Mn(e){Fn(e),Wo.remove(e),Go.push(e),Gn(e)}function Rn(e){var t=e.circle,n=t.x,i=t.cy,a={x:n,y:i},l=e.P,r=e.N,o=[e];Mn(e);for(var s=l;s.circle&&rr(n-s.circle.x)<Ar&&rr(i-s.circle.cy)<Ar;)l=s.P,o.unshift(s),Mn(s),s=l;o.unshift(s),Fn(s);for(var d=r;d.circle&&rr(n-d.circle.x)<Ar&&rr(i-d.circle.cy)<Ar;)r=d.N,o.push(d),Mn(d),d=r;o.push(d),Fn(d);var g,p=o.length;for(g=1;g<p;++g)d=o[g],s=o[g-1],Wn(d.edge,s.site,d.site,a);s=o[0],d=o[p-1],d.edge=Xn(s.site,d.site,null,a),Yn(s),Yn(d)}function Nn(e){for(var t,n,i,a,l=e.x,r=e.y,o=Wo._;o;)if(i=Un(o,r)-l,i>Ar)o=o.L;else if(a=l-Pn(o,r),a>Ar){if(!o.R){t=o;break}o=o.R}else{i>-Ar?(t=o.P,n=o):a>-Ar?(t=o,n=o.N):t=n=o;break}var s=Tn(e);if(Wo.insert(t,s),t||n){if(t===n)return Fn(t),n=Tn(t.site),Wo.insert(s,n),s.edge=n.edge=Xn(t.site,s.site),Yn(t),void Yn(n);if(!n)return void(s.edge=Xn(t.site,s.site));Fn(t),Fn(n);var g=t.site,p=g.x,h=g.y,c=e.x-p,u=e.y-h,y=n.site,m=y.x-p,f=y.y-h,x=2*(c*f-u*m),d=c*c+u*u,_=m*m+f*f,v={x:(f*d-u*_)/x+p,y:(c*_-m*d)/x+h};Wn(n.edge,g,y,v),s.edge=Xn(g,e,null,v),n.edge=Xn(e,y,null,v),Yn(t),Yn(n)}}function Un(e,t){var n=e.site,i=n.x,a=n.y,l=a-t;if(!l)return i;var r=e.P;if(!r)return-Infinity;n=r.site;var o=n.x,s=n.y,d=s-t;if(!d)return o;var g=o-i,p=1/l-1/d,h=g/d;return p?(-h+Hl(h*h-2*p*(g*g/(-2*d)-s+d/2+a-l/2)))/p+i:(i+o)/2}function Pn(e,t){var n=e.N;if(n)return Un(n,t);var i=e.site;return i.y===t?i.x:Infinity}function qn(e){this.site=e,this.edges=[]}function Dn(e){for(var t,n,i,a,l,r,o,s,d,g,p=e[0][0],h=e[1][0],c=e[0][1],u=e[1][1],y=Bo,m=y.length;m--;)if(l=y[m],l&&l.prepare())for(o=l.edges,s=o.length,r=0;r<s;)g=o[r].end(),i=g.x,a=g.y,d=o[++r%s].start(),t=d.x,n=d.y,(rr(i-t)>Ar||rr(a-n)>Ar)&&(o.splice(r,0,new $n(Bn(l.site,g,rr(i-p)<Ar&&u-a>Ar?{x:p,y:rr(t-p)<Ar?n:u}:rr(a-u)<Ar&&h-i>Ar?{x:rr(n-u)<Ar?t:h,y:u}:rr(i-h)<Ar&&a-c>Ar?{x:h,y:rr(t-h)<Ar?n:c}:rr(a-c)<Ar&&i-p>Ar?{x:rr(n-c)<Ar?t:p,y:c}:null),l.site,null)),++s)}function Hn(e,t){return t.angle-e.angle}function On(){Gn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,a=e.site,l=n.site;if(i!==l){var r=a.x,o=a.y,s=i.x-r,g=i.y-o,p=l.x-r,h=l.y-o,c=2*(s*h-g*p);if(!(c>=-jr)){var d=s*s+g*g,u=p*p+h*h,m=(h*d-g*u)/c,f=(s*u-p*d)/c,h=f+o,y=Qo.pop()||new On;y.arc=e,y.site=a,y.x=m+r,y.y=h+Hl(m*m+f*f),y.cy=h,e.circle=y;for(var x=null,_=Jo._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(_.L)_=_.L;else{x=_.P;break}}else if(_.R)_=_.R;else{x=_;break}Jo.insert(x,y),x||($o=y)}}}}function Fn(e){var t=e.circle;t&&(!t.P&&($o=t.N),Jo.remove(t),Qo.push(t),Gn(t),e.circle=null)}function In(t){for(var n,e=Xo,a=qt(t[0][0],t[0][1],t[1][0],t[1][1]),l=e.length;l--;)n=e[l],(!Zn(n,t)||!a(n)||rr(n.a.x-n.b.x)<Ar&&rr(n.a.y-n.b.y)<Ar)&&(n.a=n.b=null,e.splice(l,1))}function Zn(e,t){var n=e.b;if(n)return!0;var i,a,l=e.a,r=t[0][0],o=t[1][0],s=t[0][1],d=t[1][1],g=e.l,p=e.r,h=g.x,c=g.y,u=p.x,y=p.y,m=(h+u)/2;if(y===c){if(m<r||m>=o)return;if(h>u){if(!l)l={x:m,y:s};else if(l.y>=d)return;n={x:m,y:d}}else{if(!l)l={x:m,y:d};else if(l.y<s)return;n={x:m,y:s}}}else if(i=(h-u)/(y-c),a=(c+y)/2-i*m,-1>i||1<i){if(h>u){if(!l)l={x:(s-a)/i,y:s};else if(l.y>=d)return;n={x:(d-a)/i,y:d}}else{if(!l)l={x:(d-a)/i,y:d};else if(l.y<s)return;n={x:(s-a)/i,y:s}}}else if(c<y){if(!l)l={x:r,y:i*r+a};else if(l.x>=o)return;n={x:o,y:i*o+a}}else{if(!l)l={x:o,y:i*o+a};else if(l.x<r)return;n={x:r,y:i*r+a}}return e.a=l,e.b=n,!0}function Vn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Xn(e,t,n,i){var a=new Vn(e,t);return Xo.push(a),n&&Wn(a,e,t,n),i&&Wn(a,t,e,i),Bo[e.i].edges.push(new $n(a,e,t)),Bo[t.i].edges.push(new $n(a,t,e)),a}function Bn(e,t,n){var i=new Vn(e,null);return i.a=t,i.b=n,Xo.push(i),i}function Wn(e,t,n,i){e.a||e.b?e.l===n?e.b=i:e.a=i:(e.a=i,e.l=t,e.r=n)}function $n(e,t,n){var i=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Tl(n.y-t.y,n.x-t.x):e.l===t?Tl(a.x-i.x,i.y-a.y):Tl(i.x-a.x,a.y-i.y)}function Jn(){this._=null}function Gn(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Qn(e,t){var n=t,i=t.R,a=n.U;a?a.L===n?a.L=i:a.R=i:e._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Kn(e,t){var n=t,i=t.L,a=n.U;a?a.L===n?a.L=i:a.R=i:e._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ei(e){for(;e.L;)e=e.L;return e}function ti(e,t){var n,i,a,l=e.sort(ni).pop();for(Xo=[],Bo=Array(e.length),Wo=new Jn,Jo=new Jn;;)if(a=$o,l&&(!a||l.y<a.y||l.y===a.y&&l.x<a.x))(l.x!==n||l.y!==i)&&(Bo[l.i]=new qn(l),Nn(l),n=l.x,i=l.y),l=e.pop();else if(a)Rn(a.arc);else break;t&&(In(t),Dn(t));var r={cells:Bo,edges:Xo};return Wo=Jo=Xo=Bo=null,r}function ni(e,t){return t.y-e.y||t.x-e.x}function ii(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function ai(e){return e.x}function li(e){return e.y}function ri(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function oi(e,t,n,i,a,l){if(!e(t,n,i,a,l)){var r=.5*(n+a),o=.5*(i+l),s=t.nodes;s[0]&&oi(e,s[0],n,i,r,o),s[1]&&oi(e,s[1],r,i,a,o),s[2]&&oi(e,s[2],n,o,r,l),s[3]&&oi(e,s[3],r,o,a,l)}}function si(e,t){e=Wl.rgb(e),t=Wl.rgb(t);var n=e.r,i=e.g,a=e.b,l=t.r-n,r=t.g-i,o=t.b-a;return function(e){return"#"+_e(Rl(n+l*e))+_e(Rl(i+r*e))+_e(Rl(a+o*e))}}function di(e,t){var n,a={},i={};for(n in e)n in t?a[n]=hi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in a)i[n]=a[n](e);return i}}function gi(e,n){return e=+e,n=+n,function(i){return e*(1-i)+n*i}}function pi(e,n){var t,a,l,r=es.lastIndex=ts.lastIndex=0,o=-1,d=[],s=[];for(e+="",n+="";(t=es.exec(e))&&(a=ts.exec(n));)(l=a.index)>r&&(l=n.slice(r,l),d[o]?d[o]+=l:d[++o]=l),(t=t[0])===(a=a[0])?d[o]?d[o]+=a:d[++o]=a:(d[++o]=null,s.push({i:o,x:gi(t,a)})),r=ts.lastIndex;return r<n.length&&(l=n.slice(r),d[o]?d[o]+=l:d[++o]=l),2>d.length?s[0]?(n=s[0].x,function(e){return n(e)+""}):function(){return n}:(n=s.length,function(e){for(var t,a=0;a<n;++a)d[(t=s[a]).i]=t.x(e);return d.join("")})}function hi(e,t){for(var n,a=Wl.interpolators.length;0<=--a&&!(n=Wl.interpolators[a](e,t)););return n}function ci(e,t){var n,i=[],a=[],l=e.length,r=t.length,o=Vl(e.length,t.length);for(n=0;n<o;++n)i.push(hi(e[n],t[n]));for(;n<l;++n)a[n]=e[n];for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=i[n](e);return a}}function ui(e){return function(n){return 0>=n?0:1<=n?1:e(n)}}function yi(e){return function(n){return 1-e(1-n)}}function mi(e){return function(n){return .5*(.5>n?e(2*n):2-e(2-2*n))}}function fi(e){return e*e}function xi(e){return e*e*e}function _i(e){if(0>=e)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function vi(e){return 1-Ml(e*Cr)}function bi(e){return Pl(2,10*(e-1))}function Si(e){return 1-Hl(1-e*e)}function ki(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ei(e,n){return n-=e,function(i){return Rl(e+n*i)}}function wi(e){var t=[e.a,e.b],n=[e.c,e.d],i=Ai(t),a=Ci(t,n),l=Ai(ji(n,t,-a))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,a*=-1),this.rotate=(i?Tl(t[1],t[0]):Tl(-n[0],n[1]))*Lr,this.translate=[e.e,e.f],this.scale=[i,l],this.skew=l?Tl(a,l)*Lr:0}function Ci(e,t){return e[0]*t[0]+e[1]*t[1]}function Ai(e){var t=Hl(Ci(e,e));return t&&(e[0]/=t,e[1]/=t),t}function ji(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function zi(e,t){var a,n=[],l=[],i=Wl.transform(e),r=Wl.transform(t),o=i.translate,s=r.translate,d=i.rotate,g=r.rotate,p=i.skew,h=r.skew,c=i.scale,u=r.scale;return o[0]!=s[0]||o[1]!=s[1]?(n.push("translate(",null,",",null,")"),l.push({i:1,x:gi(o[0],s[0])},{i:3,x:gi(o[1],s[1])})):s[0]||s[1]?n.push("translate("+s+")"):n.push(""),d==g?g&&n.push(n.pop()+"rotate("+g+")"):(180<d-g?g+=360:180<g-d&&(d+=360),l.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:gi(d,g)})),p==h?h&&n.push(n.pop()+"skewX("+h+")"):l.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:gi(p,h)}),c[0]!=u[0]||c[1]!=u[1]?(a=n.push(n.pop()+"scale(",null,",",null,")"),l.push({i:a-4,x:gi(c[0],u[0])},{i:a-2,x:gi(c[1],u[1])})):(1!=u[0]||1!=u[1])&&n.push(n.pop()+"scale("+u+")"),a=l.length,function(e){for(var t,r=-1;++r<a;)n[(t=l[r]).i]=t.x(e);return n.join("")}}function Li(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Ti(e,t){return t=(t-=e=+e)||1/t,function(n){return ql(0,Vl(1,(n-e)/t))}}function Mi(e){for(var t=e.source,n=e.target,i=Ni(t,n),a=[t];t!==i;)t=t.parent,a.push(t);for(var l=a.length;n!==i;)a.splice(l,0,n),n=n.parent;return a}function Ri(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ni(e,t){if(e===t)return e;for(var n=Ri(e),i=Ri(t),a=n.pop(),l=i.pop(),r=null;a===l;)r=a,a=n.pop(),l=i.pop();return r}function Ui(e){e.fixed|=2}function Pi(e){e.fixed&=-7}function qi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Di(e){e.fixed&=-5}function Hi(e,t,a){var l=0,r=0;if(e.charge=0,!e.leaf)for(var o,s=e.nodes,d=s.length,n=-1;++n<d;)o=s[n],null==o||(Hi(o,t,a),e.charge+=o.charge,l+=o.charge*o.cx,r+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var i=t*a[e.point.index];e.charge+=e.pointCharge=i,l+=i*e.point.x,r+=i*e.point.y}e.cx=l/e.charge,e.cy=r/e.charge}function Oi(e,t){return Wl.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Xi,e}function Yi(e,t){for(var i=[e];null!=(e=i.pop());)if(t(e),(n=e.children)&&(a=n.length))for(var a,n;0<=--a;)i.push(n[a])}function Fi(e,t){for(var a=[e],l=[];null!=(e=a.pop());)if(l.push(e),(n=e.children)&&(r=n.length))for(var r,n,o=-1;++o<r;)a.push(n[o]);for(;null!=(e=l.pop());)t(e)}function Ii(e){return e.children}function Zi(e){return e.value}function Vi(e,t){return t.value-e.value}function Xi(e){return Wl.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Bi(e){return e.x}function Wi(e){return e.y}function $i(e,t,n){e.y0=t,e.y=n}function Ji(e){return Wl.range(e.length)}function Gi(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function Qi(e){for(var t,a=1,i=0,l=e[0][1],r=e.length;a<r;++a)(t=e[a][1])>l&&(i=a,l=t);return i}function Ki(e){return e.reduce(ea,0)}function ea(e,t){return e+t[1]}function ta(e,t){return na(e,Nl(Dl(t.length)/Ul+1))}function na(e,t){for(var n=-1,i=+e[0],a=(e[1]-i)/t,l=[];++n<=t;)l[n]=a*n+i;return l}function ia(e){return[Wl.min(e),Wl.max(e)]}function aa(e,t){return e.value-t.value}function la(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ra(e,t){e._pack_next=t,t._pack_prev=e}function oa(e,t){var n=t.x-e.x,i=t.y-e.y,a=e.r+t.r;return .999*a*a>n*n+i*i}function sa(e){function t(e){n=Vl(e.x-e.r,n),p=ql(e.x+e.r,p),h=Vl(e.y-e.r,h),c=ql(e.y+e.r,c)}if((l=e.children)&&(g=l.length)){var l,r,a,o,s,i,d,g,n=Infinity,p=-Infinity,h=Infinity,c=-Infinity;if(l.forEach(da),r=l[0],r.x=-r.r,r.y=0,t(r),1<g&&(a=l[1],a.x=a.r,a.y=0,t(a),2<g))for(o=l[2],ha(r,a,o),t(o),la(r,o),r._pack_prev=o,la(o,a),a=r._pack_next,s=3;s<g;s++){ha(r,a,o=l[s]);var u=0,y=1,m=1;for(i=a._pack_next;i!==a;i=i._pack_next,y++)if(oa(i,o)){u=1;break}if(1==u)for(d=r._pack_prev;d!==i._pack_prev&&!oa(d,o);d=d._pack_prev,m++);u?(y<m||y==m&&a.r<r.r?ra(r,a=i):ra(r=d,a),s--):(la(r,o),a=o,t(o))}var f=(n+p)/2,x=(h+c)/2,_=0;for(s=0;s<g;s++)o=l[s],o.x-=f,o.y-=x,_=ql(_,o.r+Hl(o.x*o.x+o.y*o.y));e.r=_,l.forEach(ga)}}function da(e){e._pack_next=e._pack_prev=e}function ga(e){delete e._pack_next,delete e._pack_prev}function pa(e,t,a,l){var r=e.children;if(e.x=t+=l*e.x,e.y=a+=l*e.y,e.r*=l,r)for(var o=-1,i=r.length;++o<i;)pa(r[o],t,a,l)}function ha(e,t,n){var i=e.r+n.r,a=t.x-e.x,l=t.y-e.y;if(i&&(a||l)){var r=t.r+n.r,o=a*a+l*l;r*=r,i*=i;var s=.5+(i-r)/(2*o),d=Hl(ql(0,2*r*(i+o)-(i-=o)*i-r*r))/(2*o);n.x=e.x+s*a+d*l,n.y=e.y+s*l-d*a}else n.x=e.x+i,n.y=e.y}function ca(e,t){return e.parent==t.parent?1:2}function ua(e){var t=e.children;return t.length?t[0]:e.t}function ya(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function ma(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function fa(e){for(var t,n=0,a=0,l=e.children,r=l.length;0<=--r;)t=l[r],t.z+=n,t.m+=n,n+=t.s+(a+=t.c)}function xa(e,t,n){return e.a.parent===t.parent?e.a:n}function _a(e){return 1+Wl.max(e,function(e){return e.y})}function va(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function ba(e){var t=e.children;return t&&t.length?ba(t[0]):e}function Sa(e){var t,n=e.children;return n&&(t=n.length)?Sa(n[t-1]):e}function ka(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ea(e,t){var n=e.x+t[3],i=e.y+t[0],a=e.dx-t[1]-t[3],l=e.dy-t[0]-t[2];return 0>a&&(n+=a/2,a=0),0>l&&(i+=l/2,l=0),{x:n,y:i,dx:a,dy:l}}function wa(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Ca(e){return e.rangeExtent?e.rangeExtent():wa(e.range())}function Aa(e,t,n,a){var l=n(e[0],e[1]),r=a(t[0],t[1]);return function(e){return r(l(e))}}function ja(e,t){var n,i=0,a=e.length-1,l=e[i],r=e[a];return r<l&&(n=i,i=a,a=n,n=l,l=r,r=n),e[i]=t.floor(l),e[a]=t.ceil(r),e}function za(e){return e?{floor:function(t){return Bl(t/e)*e},ceil:function(t){return Nl(t/e)*e}}:hs}function La(e,t,n,a){var l=[],r=[],i=0,o=Vl(e.length,t.length)-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<=o;)l.push(n(e[i-1],e[i])),r.push(a(t[i-1],t[i]));return function(t){var n=Wl.bisect(e,t,1,o)-1;return r[n](l[n](t))}}function Ta(e,t,n,i){function a(){var a=2<Vl(e.length,t.length)?La:Aa,s=i?Ti:Li;return r=a(e,t,s,n),o=a(t,e,s,hi),l}function l(e){return r(e)}var r,o;return l.invert=function(e){return o(e)},l.domain=function(t){return arguments.length?(e=t.map(Number),a()):e},l.range=function(e){return arguments.length?(t=e,a()):t},l.rangeRound=function(e){return l.range(e).interpolate(Ei)},l.clamp=function(e){return arguments.length?(i=e,a()):i},l.interpolate=function(e){return arguments.length?(n=e,a()):n},l.ticks=function(t){return Ua(e,t)},l.tickFormat=function(t,n){return Pa(e,t,n)},l.nice=function(t){return Ra(e,t),a()},l.copy=function(){return Ta(e,t,n,i)},a()}function Ma(e,t){return Wl.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Ra(e,t){return ja(e,za(Na(e,t)[2]))}function Na(e,t){null==t&&(t=10);var n=wa(e),i=n[1]-n[0],a=Pl(10,Bl(Dl(i/t)/Ll)),l=t/i*a;return .15>=l?a*=10:.35>=l?a*=5:.75>=l&&(a*=2),n[0]=Nl(n[0]/a)*a,n[1]=Bl(n[1]/a)*a+.5*a,n[2]=a,n}function Ua(e,t){return Wl.range.apply(Wl,Na(e,t))}function Pa(e,t,n){var i=Na(e,t);if(n){var a=Kr.exec(n);if(a.shift(),"s"===a[8]){var l=Wl.formatPrefix(ql(rr(i[0]),rr(i[1])));return a[7]||(a[7]="."+qa(l.scale(i[2]))),a[8]="f",n=Wl.format(a.join("")),function(e){return n(l.scale(e))+l.symbol}}a[7]||(a[7]="."+Da(a[8],i)),n=a.join("")}else n=",."+qa(i[2])+"f";return Wl.format(n)}function qa(e){return-Bl(Dl(e)/Ll+.01)}function Da(e,t){var n=qa(t[2]);return e in cs?Xl(n-qa(ql(rr(t[0]),rr(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Ha(e,t,a,l){function r(e){return(a?Dl(0>e?0:e):-Dl(0<e?0:-e))/Dl(t)}function o(e){return a?Pl(t,e):-Pl(t,-e)}function i(t){return e(r(t))}return i.invert=function(t){return o(e.invert(t))},i.domain=function(t){return arguments.length?(a=0<=t[0],e.domain((l=t.map(Number)).map(r)),i):l},i.base=function(n){return arguments.length?(t=+n,e.domain(l.map(r)),i):t},i.nice=function(){var t=ja(l.map(r),a?Math:ys);return e.domain(t),l=t.map(o),i},i.ticks=function(){var e=wa(l),s=[],d=e[0],g=e[1],p=Bl(r(d)),i=Nl(r(g)),h=t%1?2:t;if(isFinite(i-p)){if(a){for(;p<i;p++)for(var n=1;n<h;n++)s.push(o(p)*n);s.push(o(p))}else for(s.push(o(p));p++<i;)for(var n=h-1;0<n;n--)s.push(o(p)*n);for(p=0;s[p]<d;p++);for(i=s.length;s[i-1]>g;i--);s=s.slice(p,i)}return s},i.tickFormat=function(t,n){if(!arguments.length)return us;2>arguments.length?n=us:"function"!==typeof n&&(n=Wl.format(n));var l,e=ql(.1,t/i.ticks().length),s=a?(l=1e-12,Nl):(l=-1e-12,Bl);return function(t){return t/o(s(r(t)+l))<=e?n(t):""}},i.copy=function(){return Ha(e.copy(),t,a,l)},Ma(i,e)}function Oa(e,t,n){function i(t){return e(a(t))}var a=Ya(t),l=Ya(1/t);return i.invert=function(t){return l(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(a)),i):n},i.ticks=function(e){return Ua(n,e)},i.tickFormat=function(e,t){return Pa(n,e,t)},i.nice=function(e){return i.domain(Ra(n,e))},i.exponent=function(r){return arguments.length?(a=Ya(t=r),l=Ya(1/t),e.domain(n.map(a)),i):t},i.copy=function(){return Oa(e.copy(),t,n)},Ma(i,e)}function Ya(t){return function(e){return 0>e?-Pl(-e,t):Pl(e,t)}}function Fa(e,t){function a(n){return i[((l.get(n)||("range"===t.t?l.set(n,e.push(n)):NaN))-1)%i.length]}function n(t,n){return Wl.range(e.length).map(function(e){return t+n*e})}var l,i,r;return a.domain=function(r){if(!arguments.length)return e;e=[],l=new o;for(var s,d=-1,i=r.length;++d<i;)l.has(s=r[d])||l.set(s,e.push(s));return a[t.t].apply(a,t.a)},a.range=function(e){return arguments.length?(i=e,r=0,t={t:"range",a:arguments},a):i},a.rangePoints=function(l,o){2>arguments.length&&(o=0);var s=l[0],d=l[1],g=(d-s)/(ql(1,e.length-1)+o);return i=n(2>e.length?(s+d)/2:s+g*o/2,g),r=0,t={t:"rangePoints",a:arguments},a},a.rangeBands=function(l,o,s){2>arguments.length&&(o=0),3>arguments.length&&(s=o);var d=l[1]<l[0],g=l[d-0],p=l[1-d],h=(p-g)/(e.length-o+2*s);return i=n(g+h*s,h),d&&i.reverse(),r=h*(1-o),t={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(l,o,s){2>arguments.length&&(o=0),3>arguments.length&&(s=o);var d=l[1]<l[0],g=l[d-0],p=l[1-d],h=Bl((p-g)/(e.length-o+2*s)),c=p-g-(e.length-o)*h;return i=n(g+Rl(c/2),h),d&&i.reverse(),r=Rl(h*(1-o)),t={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return r},a.rangeExtent=function(){return wa(t.a[0])},a.copy=function(){return Fa(e,t)},a.domain(e)}function Ia(n,i){function a(){var e=0,t=i.length;for(o=[];++e<t;)o[e-1]=Wl.quantile(n,e/t);return r}function r(e){if(!isNaN(e=+e))return i[Wl.bisect(o,e)]}var o;return r.domain=function(i){return arguments.length?(n=i.map(t).filter(l).sort(e),a()):n},r.range=function(e){return arguments.length?(i=e,a()):i},r.quantiles=function(){return o},r.invertExtent=function(e){return e=i.indexOf(e),0>e?[NaN,NaN]:[0<e?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},r.copy=function(){return Ia(n,i)},a()}function Za(e,t,n){function a(t){return n[ql(0,Vl(o,Bl(r*(t-e))))]}function l(){return r=n.length/(t-e),o=n.length-1,a}var r,o;return a.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],l()):[e,t]},a.range=function(e){return arguments.length?(n=e,l()):n},a.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/r+e,[t,t+1/r]},a.copy=function(){return Za(e,t,n)},l()}function Va(e,t){function n(n){if(n<=n)return t[Wl.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Va(e,t)},n}function Xa(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Ua(e,t)},t.tickFormat=function(t,n){return Pa(e,t,n)},t.copy=function(){return Xa(e)},t}function Ba(e){return e.innerRadius}function Wa(e){return e.outerRadius}function $a(e){return e.startAngle}function Ja(e){return e.endAngle}function Ga(e){function t(t){function s(){d.push("M",n(e(p),o))}for(var g,d=[],p=[],h=-1,i=t.length,c=we(a),u=we(l);++h<i;)r.call(this,g=t[h],h)?p.push([+c.call(this,g,h),+u.call(this,g,h)]):p.length&&(s(),p=[]);return p.length&&s(),d.length?d.join(""):null}var a=kn,l=En,r=Ct,n=Qa,i=n.key,o=.7;return t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(l=e,t):l},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(i="function"===typeof e?n=e:(n=Ss.get(e)||Qa).key,t):i},t.tension=function(e){return arguments.length?(o=e,t):o},t}function Qa(e){return e.join("L")}function Ka(e){for(var t=0,i=e.length,n=e[0],a=[n[0],",",n[1]];++t<i;)a.push("V",(n=e[t])[1],"H",n[0]);return a.join("")}function el(e){for(var t=0,i=e.length,n=e[0],a=[n[0],",",n[1]];++t<i;)a.push("H",(n=e[t])[0],"V",n[1]);return a.join("")}function tl(e,n){if(1>n.length||e.length!=n.length&&e.length!=n.length+2)return Qa(e);var a=e.length!=n.length,l="",r=e[0],o=e[1],s=n[0],d=s,t=1;if(a&&(l+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],r=e[1],t=2),1<n.length){d=n[1],o=e[t],t++,l+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(o[0]-d[0])+","+(o[1]-d[1])+","+o[0]+","+o[1];for(var g=2;g<n.length;g++,t++)o=e[t],d=n[g],l+="S"+(o[0]-d[0])+","+(o[1]-d[1])+","+o[0]+","+o[1]}if(a){var i=e[t];l+="Q"+(o[0]+2*d[0]/3)+","+(o[1]+2*d[1]/3)+","+i[0]+","+i[1]}return l}function nl(e,t){for(var l,r=[],o=(1-t)/2,a=e[0],s=e[1],d=1,i=e.length;++d<i;)l=a,a=s,s=e[d],r.push([o*(s[0]-l[0]),o*(s[1]-l[1])]);return r}function il(e){if(3>e.length)return Qa(e);var t=1,i=e.length,n=e[0],a=n[0],l=n[1],r=[a,a,a,(n=e[1])[0]],o=[l,l,l,n[1]],s=[a,",",l,"L",al(ws,r),",",al(ws,o)];for(e.push(e[i-1]);++t<=i;)n=e[t],r.shift(),r.push(n[0]),o.shift(),o.push(n[1]),ll(s,r,o);return e.pop(),s.push("L",n),s.join("")}function al(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ll(e,t,n){e.push("C",al(ks,t),",",al(ks,n),",",al(Es,t),",",al(Es,n),",",al(ws,t),",",al(ws,n))}function rl(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ol(e){for(var t=0,n=e.length-1,i=[],a=e[0],l=e[1],r=i[0]=rl(a,l);++t<n;)i[t]=(r+(r=rl(a=l,l=e[t+1])))/2;return i[t]=r,i}function sl(e){for(var t,n,a,l,r=[],o=ol(e),s=-1,i=e.length-1;++s<i;)t=rl(e[s],e[s+1]),rr(t)<Ar?o[s]=o[s+1]=0:(n=o[s]/t,a=o[s+1]/t,l=n*n+a*a,9<l&&(l=3*t/Hl(l),o[s]=l*n,o[s+1]=l*a));for(s=-1;++s<=i;)l=(e[Vl(i,s+1)][0]-e[ql(0,s-1)][0])/(6*(1+o[s]*o[s])),r.push([l||0,o[s]*l||0]);return r}function dl(e){for(var t,l,r,a=-1,i=e.length;++a<i;)t=e[a],l=t[0],r=t[1]+vs,t[0]=l*Ml(r),t[1]=l*Ol(r);return e}function gl(e){function t(t){function h(){y.push("M",n(e(x),p),g,d(e(f.reverse()),p),"Z")}for(var c,u,m,y=[],f=[],x=[],_=-1,i=t.length,v=we(a),b=we(r),S=a===l?function(){return u}:we(l),k=r===o?function(){return m}:we(o);++_<i;)s.call(this,c=t[_],_)?(f.push([u=+v.call(this,c,_),m=+b.call(this,c,_)]),x.push([+S.call(this,c,_),+k.call(this,c,_)])):f.length&&(h(),f=[],x=[]);return f.length&&h(),y.length?y.join(""):null}var a=kn,l=kn,r=0,o=En,s=Ct,n=Qa,i=n.key,d=n,g="L",p=.7;return t.x=function(e){return arguments.length?(a=l=e,t):l},t.x0=function(e){return arguments.length?(a=e,t):a},t.x1=function(e){return arguments.length?(l=e,t):l},t.y=function(e){return arguments.length?(r=o=e,t):o},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(s=e,t):s},t.interpolate=function(e){return arguments.length?(i="function"===typeof e?n=e:(n=Ss.get(e)||Qa).key,d=n.reverse||n,g=n.closed?"M":"L",t):i},t.tension=function(e){return arguments.length?(p=e,t):p},t}function pl(e){return e.radius}function hl(e){return[e.x,e.y]}function cl(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]+vs;return[n*Ml(i),n*Ol(i)]}}function ul(){return 64}function yl(){return"circle"}function ml(e){var t=Hl(e/Er);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function fl(e,t){return pr(e,Ts),e.id=t,e}function xl(e,t,n,a){var l=e.id;return H(e,"function"===typeof n?function(e,r,i){e.__transition__[l].tween.set(t,a(n.call(e,e.__data__,r,i)))}:(n=a(n),function(e){e.__transition__[l].tween.set(t,n)}))}function _l(e){return null==e&&(e=""),function(){this.textContent=e}}function vl(a,l,i,e){var r=a.__transition__||(a.__transition__={active:0,count:0}),s=r[i];if(!s){var t=e.time;s=r[i]={tween:new o,time:t,ease:e.ease,delay:e.delay,duration:e.duration},++r.count,Wl.timer(function(e){function n(e){return r.active>i?g():void(r.active=i,s.event&&s.event.start.call(a,p,l),s.tween.forEach(function(e,t){(t=t.call(a,p,l))&&y.push(t)}),Wl.timer(function(){return u.c=o(e||1)?Ct:o,1},0,t))}function o(o){if(r.active!==i)return g();for(var h=o/c,t=d(h),e=y.length;0<e;)y[--e].call(a,t);if(1<=h)return s.event&&s.event.end.call(a,p,l),g()}function g(){return--r.count?delete r[i]:delete a.__transition__,1}var p=a.__data__,d=s.ease,h=s.delay,c=s.duration,u=Jr,y=[];return u.t=h+t,h<=e?n(e-h):void(u.c=n)},0,t)}}function bl(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate("+(isFinite(i)?i:n(e))+",0)"})}function Sl(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate(0,"+(isFinite(i)?i:n(e))+")"})}function kl(e){return e.toISOString()}function El(e,t,n){function i(t){return e(t)}function a(e,n){var a=e[1]-e[0],l=a/n,r=Wl.bisect(Os,l);return r==Os.length?[t.year,Na(e.map(function(e){return e/31536e6}),n)[2]]:r?t[l/Os[r-1]<Os[r]/l?r-1:r]:[Is,Na(e,n)[2]]}return i.invert=function(t){return wl(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(wl)},i.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,wl(+n+1),t).length}var l=i.domain(),r=wa(l),o=null==e?a(r,10):"number"===typeof e&&a(r,e);return o&&(e=o[0],t=o[1]),i.domain(ja(l,1<t?{floor:function(t){for(;n(t=e.floor(t));)t=wl(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=wl(+t+1);return t}}:e))},i.ticks=function(e,t){var n=wa(i.domain()),l=null==e?a(n,10):"number"===typeof e?a(n,e):!e.range&&[{range:e},t];return l&&(e=l[0],t=l[1]),e.range(n[0],wl(+n[1]+1),1>t?1:t)},i.tickFormat=function(){return n},i.copy=function(){return El(e.copy(),t,n)},Ma(i,e)}function wl(e){return new Date(e)}function Cl(e){return JSON.parse(e.responseText)}function Al(e){var t=Gl.createRange();return t.selectNode(Gl.body),t.createContextualFragment(e.responseText)}var jl=Math.tan,zl=Math.atan,Ll=Math.LN10,Tl=Math.atan2,Ml=Math.cos,Rl=Math.round,Nl=Math.ceil,Ul=Math.LN2,Pl=Math.pow,ql=Math.max,Dl=Math.log,Hl=Math.sqrt,Ol=Math.sin,Yl=Math.exp,Fl=Math.asin,Il=Math.acos,Zl=Math.PI,Vl=Math.min,Xl=Math.abs,Bl=Math.floor,Wl={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var $l=[].slice,Jl=function(e){return $l.call(e)},Gl=document,Ql=Gl.documentElement,Kl=window;try{Jl(Ql.childNodes)[0].nodeType}catch(t){Jl=function(e){for(var t=e.length,n=Array(t);t--;)n[t]=e[t];return n}}try{Gl.createElement("div").style.setProperty("opacity",0,"")}catch(e){var er=Kl.Element.prototype,tr=er.setAttribute,nr=er.setAttributeNS,ir=Kl.CSSStyleDeclaration.prototype,ar=ir.setProperty;er.setAttribute=function(e,t){tr.call(this,e,t+"")},er.setAttributeNS=function(e,t,n){nr.call(this,e,t,n+"")},ir.setProperty=function(e,t,n){ar.call(this,e,t+"",n)}}Wl.ascending=e,Wl.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},Wl.min=function(e,t){var l,a,r=-1,i=e.length;if(1===arguments.length){for(;++r<i&&!(null!=(l=e[r])&&l<=l);)l=void 0;for(;++r<i;)null!=(a=e[r])&&l>a&&(l=a)}else{for(;++r<i&&!(null!=(l=t.call(e,e[r],r))&&l<=l);)l=void 0;for(;++r<i;)null!=(a=t.call(e,e[r],r))&&l>a&&(l=a)}return l},Wl.max=function(e,t){var l,a,r=-1,i=e.length;if(1===arguments.length){for(;++r<i&&!(null!=(l=e[r])&&l<=l);)l=void 0;for(;++r<i;)null!=(a=e[r])&&a>l&&(l=a)}else{for(;++r<i&&!(null!=(l=t.call(e,e[r],r))&&l<=l);)l=void 0;for(;++r<i;)null!=(a=t.call(e,e[r],r))&&a>l&&(l=a)}return l},Wl.extent=function(e,t){var l,a,r,o=-1,i=e.length;if(1===arguments.length){for(;++o<i&&!(null!=(l=r=e[o])&&l<=l);)l=r=void 0;for(;++o<i;)null!=(a=e[o])&&(l>a&&(l=a),r<a&&(r=a))}else{for(;++o<i&&!(null!=(l=r=t.call(e,e[o],o))&&l<=l);)l=void 0;for(;++o<i;)null!=(a=t.call(e,e[o],o))&&(l>a&&(l=a),r<a&&(r=a))}return[l,r]},Wl.sum=function(e,t){var r,a=0,o=e.length,n=-1;if(1===arguments.length)for(;++n<o;)l(r=+e[n])&&(a+=r);else for(;++n<o;)l(r=+t.call(e,e[n],n))&&(a+=r);return a},Wl.mean=function(e,r){var o,a=0,s=e.length,n=-1,i=s;if(1===arguments.length)for(;++n<s;)l(o=t(e[n]))?a+=o:--i;else for(;++n<s;)l(o=t(r.call(e,e[n],n)))?a+=o:--i;return i?a/i:void 0},Wl.quantile=function(t,n){var i=(t.length-1)*n+1,a=Bl(i),l=+t[a-1],r=i-a;return r?l+r*(t[a]-l):l},Wl.median=function(r,o){var s,a=[],d=r.length,n=-1;if(1===arguments.length)for(;++n<d;)l(s=t(r[n]))&&a.push(s);else for(;++n<d;)l(s=t(o.call(r,r[n],n)))&&a.push(s);return a.length?Wl.quantile(a.sort(e),.5):void 0};var lr=n(e);Wl.bisectLeft=lr.left,Wl.bisect=Wl.bisectRight=lr.right,Wl.bisector=function(t){return n(1===t.length?function(n,i){return e(t(n),i)}:t)},Wl.shuffle=function(e){for(var n,t,i=e.length;i;)t=0|Math.random()*i--,n=e[i],e[i]=e[t],e[t]=n;return e},Wl.permute=function(e,t){for(var n=t.length,i=Array(n);n--;)i[n]=e[t[n]];return i},Wl.pairs=function(e){for(var t,a=0,i=e.length-1,n=e[0],l=Array(0>i?0:i);a<i;)l[a]=[t=n,n=e[++a]];return l},Wl.zip=function(){if(!(l=arguments.length))return[];for(var e=-1,t=Wl.min(arguments,a),i=Array(t);++e<t;)for(var l,n=-1,r=i[e]=Array(l);++n<l;)r[n]=arguments[n][e];return i},Wl.transpose=function(e){return Wl.zip.apply(Wl,e)},Wl.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Wl.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Wl.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Wl.merge=function(e){for(var t,a,l,r=e.length,n=-1,i=0;++n<r;)i+=e[n].length;for(a=Array(i);0<=--r;)for(l=e[r],t=l.length;0<=--t;)a[--i]=l[t];return a};var rr=Xl;Wl.range=function(e,t,n){if(3>arguments.length&&(n=1,2>arguments.length&&(t=e,e=0)),(t-e)/n===Infinity)throw new Error("infinite range");var a,l=[],o=r(rr(n)),s=-1;if(e*=o,t*=o,n*=o,0>n)for(;(a=e+n*++s)>t;)l.push(a/o);else for(;(a=e+n*++s)<t;)l.push(a/o);return l},Wl.map=function(e){var t=new o;if(e instanceof o)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t};var or="__proto__",sr="\0";i(o,{has:g,get:function(e){return this._[s(e)]},set:function(e,t){return this._[s(e)]=t},remove:p,keys:h,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:d(t),value:this._[t]});return e},size:c,empty:u,forEach:function(e){for(var t in this._)e.call(this,d(t),this._[t])}}),Wl.nest=function(){function e(t,d,g){if(g>=s.length)return l?l.call(r,d):a?d.sort(a):d;for(var p,h,c,u,y=-1,i=d.length,n=s[g++],m=new o;++y<i;)(u=m.get(p=n(h=d[y])))?u.push(h):m.set(p,[h]);return t?(h=t(),c=function(n,i){h.set(n,e(t,i,g))}):(h={},c=function(n,i){h[n]=e(t,i,g)}),m.forEach(c),h}function t(e,i){if(i>=s.length)return e;var a=[],l=n[i++];return e.forEach(function(e,n){a.push({key:e,values:t(n,i)})}),l?a.sort(function(e,t){return l(e.key,t.key)}):a}var a,l,r={},s=[],n=[];return r.map=function(t,n){return e(n,t,0)},r.entries=function(n){return t(e(Wl.map,n,0),0)},r.key=function(e){return s.push(e),r},r.sortKeys=function(e){return n[s.length-1]=e,r},r.sortValues=function(e){return a=e,r},r.rollup=function(e){return l=e,r},r},Wl.set=function(e){var t=new y;if(e)for(var a=0,i=e.length;a<i;++a)t.add(e[a]);return t},i(y,{has:g,add:function(e){return this._[s(e+="")]=!0,e},remove:p,values:h,size:c,empty:u,forEach:function(e){for(var t in this._)e.call(this,d(t))}}),Wl.behavior={},Wl.rebind=function(e,t){for(var a,l=1,i=arguments.length;++l<i;)e[a=arguments[l]]=m(e,t,t[a]);return e};var dr=["webkit","ms","moz","Moz","o","O"];Wl.dispatch=function(){for(var e=new _,t=-1,i=arguments.length;++t<i;)e[arguments[t]]=v(e);return e},_.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(0<=n&&(i=e.slice(n+1),e=e.slice(0,n)),e)return 2>arguments.length?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},Wl.event=null,Wl.requote=function(e){return e.replace(gr,"\\$&")};var gr=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,pr={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},hr=function(e,t){return t.querySelector(e)},cr=function(e,t){return t.querySelectorAll(e)},ur=Ql.matches||Ql[f(Ql,"matchesSelector")],yr=function(e,t){return ur.call(e,t)};"function"===typeof Sizzle&&(hr=function(e,t){return Sizzle(e,t)[0]||null},cr=Sizzle,yr=Sizzle.matchesSelector),Wl.selection=function(){return _r};var mr=Wl.selection.prototype=[];mr.select=function(e){var t,a,l,r,o=[];e=w(e);for(var s=-1,d=this.length;++s<d;){o.push(t=[]),t.parentNode=(l=this[s]).parentNode;for(var g=-1,i=l.length;++g<i;)(r=l[g])?(t.push(a=e.call(r,r.__data__,g,s)),a&&"__data__"in r&&(a.__data__=r.__data__)):t.push(null)}return E(o)},mr.selectAll=function(e){var t,a,l=[];e=C(e);for(var r=-1,o=this.length;++r<o;)for(var s=this[r],d=-1,i=s.length;++d<i;)(a=s[d])&&(l.push(t=Jl(e.call(a,a.__data__,d,r))),t.parentNode=a);return E(l)};var fr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Wl.ns={prefix:fr,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&(n=e.slice(0,t),e=e.slice(t+1)),fr.hasOwnProperty(n)?{space:fr[n],local:e}:e}},mr.attr=function(e,t){if(2>arguments.length){if("string"===typeof e){var n=this.node();return e=Wl.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(A(t,e[t]));return this}return this.each(A(e,t))},mr.classed=function(e,t){if(2>arguments.length){if("string"===typeof e){var a=this.node(),l=(e=L(e)).length,n=-1;if(t=a.classList){for(;++n<l;)if(!t.contains(e[n]))return!1;}else for(t=a.getAttribute("class");++n<l;)if(!z(e[n]).test(t))return!1;return!0}for(t in e)this.each(T(t,e[t]));return this}return this.each(T(e,t))},mr.style=function(e,t,i){var a=arguments.length;if(3>a){if("string"!==typeof e){for(i in 2>a&&(t=""),e)this.each(R(i,e[i],t));return this}if(2>a)return Kl.getComputedStyle(this.node(),null).getPropertyValue(e);i=""}return this.each(R(e,t,i))},mr.property=function(e,t){if(2>arguments.length){if("string"===typeof e)return this.node()[e];for(t in e)this.each(N(t,e[t]));return this}return this.each(N(e,t))},mr.text=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},mr.html=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},mr.append=function(e){return e=U(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},mr.insert=function(e,t){return e=U(e),t=w(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},mr.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},mr.data=function(e,t){function a(e,a){var l,i,r,s=e.length,n=a.length,h=Vl(s,n),c=Array(n),u=Array(n),y=Array(s);if(t){var m,f=new o,x=Array(s);for(l=-1;++l<s;)f.has(m=t.call(i=e[l],i.__data__,l))?y[l]=i:f.set(m,i),x[l]=m;for(l=-1;++l<n;)(i=f.get(m=t.call(a,r=a[l],l)))?!0!==i&&(c[l]=i,i.__data__=r):u[l]=P(r),f.set(m,!0);for(l=-1;++l<s;)!0!==f.get(x[l])&&(y[l]=e[l])}else{for(l=-1;++l<h;)i=e[l],r=a[l],i?(i.__data__=r,c[l]=i):u[l]=P(r);for(;l<n;++l)u[l]=P(a[l]);for(;l<s;++l)y[l]=e[l]}u.update=c,u.parentNode=c.parentNode=y.parentNode=e.parentNode,d.push(u),g.push(c),p.push(y)}var l,r,s=-1,i=this.length;if(!arguments.length){for(e=Array(i=(l=this[0]).length);++s<i;)(r=l[s])&&(e[s]=r.__data__);return e}var d=O([]),g=E([]),p=E([]);if("function"===typeof e)for(;++s<i;)a(l=this[s],e.call(l,l.parentNode.__data__,s));else for(;++s<i;)a(l=this[s],e);return g.enter=function(){return d},g.exit=function(){return p},g},mr.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},mr.filter=function(e){var t,a,l,r=[];"function"!==typeof e&&(e=q(e));for(var o=0,s=this.length;o<s;o++){r.push(t=[]),t.parentNode=(a=this[o]).parentNode;for(var d=0,i=a.length;d<i;d++)(l=a[d])&&e.call(l,l.__data__,d,o)&&t.push(l)}return E(r)},mr.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,a=this[e],l=a.length-1,i=a[l];0<=--l;)(n=a[l])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},mr.sort=function(e){e=D.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},mr.each=function(e){return H(this,function(t,n,i){e.call(t,t.__data__,n,i)})},mr.call=function(e){var t=Jl(arguments);return e.apply(t[0]=this,t),this},mr.empty=function(){return!this.node()},mr.node=function(){for(var e=0,t=this.length;e<t;e++)for(var a,l=this[e],r=0,i=l.length;r<i;r++)if(a=l[r],a)return a;return null},mr.size=function(){var e=0;return H(this,function(){++e}),e};var xr=[];Wl.selection.enter=O,Wl.selection.enter.prototype=xr,xr.append=mr.append,xr.empty=mr.empty,xr.node=mr.node,xr.call=mr.call,xr.size=mr.size,xr.select=function(e){for(var t,a,l,r,o,s=[],d=-1,g=this.length;++d<g;){l=(r=this[d]).update,s.push(t=[]),t.parentNode=r.parentNode;for(var p=-1,i=r.length;++p<i;)(o=r[p])?(t.push(l[p]=a=e.call(r.parentNode,o.__data__,p,d)),a.__data__=o.__data__):t.push(null)}return E(s)},xr.insert=function(e,t){return 2>arguments.length&&(t=Y(this)),mr.insert.call(this,e,t)},mr.transition=function(){for(var e,t,a=As||++Ms,l=[],r=js||{time:Date.now(),ease:_i,delay:0,duration:250},o=-1,s=this.length;++o<s;){l.push(e=[]);for(var d=this[o],g=-1,i=d.length;++g<i;)(t=d[g])&&vl(t,g,a,r),e.push(t)}return fl(l,a)},mr.interrupt=function(){return this.each(F)},Wl.select=function(e){var t=["string"===typeof e?hr(e,Gl):e];return t.parentNode=Ql,E([t])},Wl.selectAll=function(e){var t=Jl("string"===typeof e?cr(e,Gl):e);return t.parentNode=Ql,E([t])};var _r=Wl.select(Ql);mr.on=function(e,t,i){var a=arguments.length;if(3>a){if("string"!==typeof e){for(i in 2>a&&(t=!1),e)this.each(I(i,e[i],t));return this}if(2>a)return(a=this.node()["__on"+e])&&a._;i=!1}return this.each(I(e,t,i))};var vr=Wl.map({mouseenter:"mouseover",mouseleave:"mouseout"});vr.forEach(function(e){"on"+e in Gl&&vr.remove(e)});var br="onselectstart"in Gl?null:f(Ql.style,"userSelect"),Sr=0;Wl.mouse=function(e){return B(e,S())};var kr=/WebKit/.test(Kl.navigator.userAgent)?-1:0;Wl.touch=function(e,t,a){if(3>arguments.length&&(a=t,t=S().changedTouches),t)for(var l,r=0,i=t.length;r<i;++r)if((l=t[r]).identifier===a)return B(e,l)},Wl.behavior.drag=function(){function e(){this.on("mousedown.drag",a).on("touchstart.drag",l)}function t(e,t,a,l,r){return function(){var o,s=this,d=Wl.event.target,g=s.parentNode,p=n.of(s,arguments),h=0,c=e(),u=".drag"+(null==c?"":"-"+c),y=Wl.select(a()).on(l+u,function(){var e,n,i=t(g,c);i&&(e=i[0]-f[0],n=i[1]-f[1],h|=e|n,f=i,p({type:"drag",x:i[0]+o[0],y:i[1]+o[1],dx:e,dy:n}))}).on(r+u,function(){t(g,c)&&(y.on(l+u,null).on(r+u,null),m(h&&Wl.event.target===d),p({type:"dragend"}))}),m=X(),f=t(g,c);i?(o=i.apply(s,arguments),o=[o.x-f[0],o.y-f[1]]):o=[0,0],p({type:"dragstart"})}}var n=k(e,"drag","dragstart","dragend"),i=null,a=t(x,Wl.mouse,J,"mousemove","mouseup"),l=t(W,Wl.touch,$,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},Wl.rebind(e,n,"on")},Wl.touches=function(e,t){return 2>arguments.length&&(t=S().touches),t?Jl(t).map(function(t){var n=B(e,t);return n.identifier=t.identifier,n}):[]};var Er=Zl,wr=2*Er,Cr=Er/2,Ar=1e-6,jr=Ar*Ar,zr=Er/180,Lr=180/Er,Tr=Math.SQRT2,Mr=2,Rr=4;Wl.interpolateZoom=function(e,t){function n(e){var t=e*x;if(f){var n=ne(y),r=l/(Mr*h)*(n*ie(Tr*t+y)-te(y));return[i+r*d,a+r*g,l*n/ne(Tr*t+y)]}return[i+e*d,a+e*g,l*Yl(Tr*t)]}var i=e[0],a=e[1],l=e[2],r=t[0],o=t[1],s=t[2],d=r-i,g=o-a,p=d*d+g*g,h=Hl(p),c=(s*s-l*l+Rr*p)/(2*l*Mr*h),u=(s*s-l*l-Rr*p)/(2*s*Mr*h),y=Dl(Hl(c*c+1)-c),m=Dl(Hl(u*u+1)-u),f=m-y,x=(f||Dl(s/l))/Tr;return n.duration=1e3*x,n},Wl.behavior.zoom=function(){function e(e){e.on(A,d).on(Pr+".zoom",h).on("dblclick.zoom",c).on(L,p)}function n(e){return[(e[0]-E.x)/E.k,(e[1]-E.y)/E.k]}function t(e){return[e[0]*E.k+E.x,e[1]*E.k+E.y]}function i(e){E.k=ql(C[0],Vl(C[1],e))}function a(e,n){n=t(n),E.x+=e[0]-n[0],E.y+=e[1]-n[1]}function l(){_&&_.domain(x.range().map(function(e){return(e-E.x)/E.k}).map(x.invert)),S&&S.domain(v.range().map(function(e){return(e-E.y)/E.k}).map(v.invert))}function r(e){e({type:"zoomstart"})}function o(e){l(),e({type:"zoom",scale:E.k,translate:[E.x,E.y]})}function s(e){e({type:"zoomend"})}function d(){var e=this,t=Wl.event.target,i=T.of(e,arguments),l=0,d=Wl.select(Kl).on(j,function(){l=1,a(Wl.mouse(e),g),o(i)}).on(z,function(){d.on(j,null).on(z,null),p(l&&Wl.event.target===t),s(i)}),g=n(Wl.mouse(e)),p=X();F.call(e),r(i)}function p(){function e(){var e=Wl.touches(c);return l=E.k,e.forEach(function(e){e.identifier in y&&(y[e.identifier]=n(e))}),e}function t(){var t=Wl.event.target;Wl.select(t).on(_,g).on(v,h),S.push(t);for(var r=Wl.event.changedTouches,s=0,d=r.length;s<d;++s)y[r[s].identifier]=null;var n=e(),c=Date.now();if(1===n.length){if(500>c-f){var x=n[0],p=y[x.identifier];i(2*E.k),a(x,p),b(),o(u)}f=c}else if(1<n.length){var x=n[0],l=n[1],k=x[0]-l[0],w=x[1]-l[1];m=k*k+w*w}}function g(){for(var e,t,r,s,d=Wl.touches(c),g=0,p=d.length;g<p;++g,s=null)if(r=d[g],s=y[r.identifier]){if(t)break;e=r,t=s}if(s){var n=(n=r[0]-e[0])*n+(n=r[1]-e[1])*n,h=m&&Hl(n/m);e=[(e[0]+r[0])/2,(e[1]+r[1])/2],t=[(t[0]+s[0])/2,(t[1]+s[1])/2],i(h*l)}f=null,a(e,t),o(u)}function h(){if(Wl.event.touches.length){for(var t=Wl.event.changedTouches,a=0,i=t.length;a<i;++a)delete y[t[a].identifier];for(var n in y)return void e()}Wl.selectAll(S).on(x,null),k.on(A,d).on(L,p),w(),s(u)}var l,c=this,u=T.of(c,arguments),y={},m=0,x=".zoom-"+Wl.event.changedTouches[0].identifier,_="touchmove"+x,v="touchend"+x,S=[],k=Wl.select(c),w=X();F.call(c),t(),r(u),k.on(A,null).on(L,t)}function h(){var e=T.of(this,arguments);m?clearTimeout(m):(g=n(u=y||Wl.mouse(this)),F.call(this),r(e)),m=setTimeout(function(){m=null,s(e)},50),b(),i(Pl(2,.002*Nr())*E.k),a(u,g),o(e)}function c(){var e=T.of(this,arguments),t=Wl.mouse(this),d=n(t),l=Dl(E.k)/Ul;r(e),i(Pl(2,Wl.event.shiftKey?Nl(l)-1:Bl(l)+1)),a(t,d),o(e),s(e)}var g,u,y,m,f,x,_,v,S,E={x:0,y:0,k:1},w=[960,500],C=Ur,A="mousedown.zoom",j="mousemove.zoom",z="mouseup.zoom",L="touchstart.zoom",T=k(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=T.of(this,arguments),t=E;As?Wl.select(this).transition().each("start.zoom",function(){E=this.__chart__||{x:0,y:0,k:1},r(e)}).tween("zoom:zoom",function(){var n=w[0],a=w[1],r=n/2,s=a/2,d=Wl.interpolateZoom([(r-E.x)/E.k,(s-E.y)/E.k,n/E.k],[(r-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(i){var t=d(i),a=n/t[2];this.__chart__=E={x:r-t[0]*a,y:s-t[1]*a,k:a},o(e)}}).each("end.zoom",function(){s(e)}):(this.__chart__=E,r(e),o(e),s(e))})},e.translate=function(t){return arguments.length?(E={x:+t[0],y:+t[1],k:E.k},l(),e):[E.x,E.y]},e.scale=function(t){return arguments.length?(E={x:E.x,y:E.y,k:+t},l(),e):E.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Ur:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(y=t&&[+t[0],+t[1]],e):y},e.size=function(t){return arguments.length?(w=t&&[+t[0],+t[1]],e):w},e.x=function(t){return arguments.length?(_=t,x=t.copy(),E={x:0,y:0,k:1},e):_},e.y=function(t){return arguments.length?(S=t,v=t.copy(),E={x:0,y:0,k:1},e):S},Wl.rebind(e,T,"on")};var Nr,Ur=[0,Infinity],Pr="onwheel"in Gl?(Nr=function(){return-Wl.event.deltaY*(Wl.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Gl?(Nr=function(){return Wl.event.wheelDelta},"mousewheel"):(Nr=function(){return-Wl.event.detail},"MozMousePixelScroll");Wl.color=le,le.prototype.toString=function(){return this.rgb()+""},Wl.hsl=re;var qr=re.prototype=new le;qr.brighter=function(e){return e=Pl(.7,arguments.length?e:1),new re(this.h,this.s,this.l/e)},qr.darker=function(e){return e=Pl(.7,arguments.length?e:1),new re(this.h,this.s,e*this.l)},qr.rgb=function(){return oe(this.h,this.s,this.l)},Wl.hcl=se;var Dr=se.prototype=new le;Dr.brighter=function(e){return new se(this.h,this.c,Vl(100,this.l+Hr*(arguments.length?e:1)))},Dr.darker=function(e){return new se(this.h,this.c,ql(0,this.l-Hr*(arguments.length?e:1)))},Dr.rgb=function(){return de(this.h,this.c,this.l).rgb()},Wl.lab=ge;var Hr=18,Or=.95047,Yr=1,Fr=1.08883,Ir=ge.prototype=new le;Ir.brighter=function(e){return new ge(Vl(100,this.l+Hr*(arguments.length?e:1)),this.a,this.b)},Ir.darker=function(e){return new ge(ql(0,this.l-Hr*(arguments.length?e:1)),this.a,this.b)},Ir.rgb=function(){return pe(this.l,this.a,this.b)},Wl.rgb=me;var Zr=me.prototype=new le;Zr.brighter=function(e){e=Pl(.7,arguments.length?e:1);var t=this.r,n=this.g,a=this.b,l=30;return t||n||a?(t&&t<l&&(t=l),n&&n<l&&(n=l),a&&a<l&&(a=l),new me(Vl(255,t/e),Vl(255,n/e),Vl(255,a/e))):new me(l,l,l)},Zr.darker=function(e){return e=Pl(.7,arguments.length?e:1),new me(e*this.r,e*this.g,e*this.b)},Zr.hsl=function(){return be(this.r,this.g,this.b)},Zr.toString=function(){return"#"+_e(this.r)+_e(this.g)+_e(this.b)};var Vr=Wl.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Vr.forEach(function(e,t){Vr.set(e,fe(t))}),Wl.functor=we,Wl.xhr=Ae(Ce),Wl.dsv=function(e,t){function n(e,n,l){3>arguments.length&&(l=n,n=null);var r=je(e,t,null==n?i:a(n),l);return r.row=function(e){return arguments.length?r.response(null==(n=e)?i:a(e)):n},r}function i(e){return n.parse(e.responseText)}function a(e){return function(t){return n.parse(t.responseText,e)}}function l(t){return t.map(r).join(e)}function r(e){return o.test(e)?"\""+e.replace(/\"/g,"\"\"")+"\"":e}var o=new RegExp("[\""+e+"\n]"),s=e.charCodeAt(0);return n.parse=function(e,t){var l;return n.parseRows(e,function(e,n){if(l)return l(e,n-1);var r=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");l=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,i){function l(){if(h>=p)return d;if(t)return t=!1,o;var n=h;if(34===e.charCodeAt(n)){for(var a=n;a++<p;)if(34===e.charCodeAt(a)){if(34!==e.charCodeAt(a+1))break;++a}h=a+2;var i=e.charCodeAt(a+1);return 13===i?(t=!0,10===e.charCodeAt(a+2)&&++h):10===i&&(t=!0),e.slice(n+1,a).replace(/""/g,"\"")}for(;h<p;){var i=e.charCodeAt(h++),l=1;if(10===i)t=!0;else if(13===i)t=!0,10===e.charCodeAt(h)&&(++h,++l);else if(i!==s)continue;return e.slice(n,h-l)}return e.slice(n)}for(var r,t,o={},d={},g=[],p=e.length,h=0,c=0;(r=l())!==d;){for(var n=[];r!==o&&r!==d;)n.push(r),r=l();i&&null==(n=i(n,c++))||g.push(n)}return g},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new y,a=[];return t.forEach(function(e){for(var t in e)i.has(t)||a.push(i.add(t))}),[a.map(r).join(e)].concat(t.map(function(t){return a.map(function(e){return r(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(l).join("\n")},n},Wl.csv=Wl.dsv(",","text/csv"),Wl.tsv=Wl.dsv("\t","text/tab-separated-values");var Xr,Br,Wr,$r,Jr,Gr=Kl[f(Kl,"requestAnimationFrame")]||function(e){setTimeout(e,17)};Wl.timer=function(e,t,i){var a=arguments.length;2>a&&(t=0),3>a&&(i=Date.now());var n=i+t,l={c:e,t:n,f:!1,n:null};Br?Br.n=l:Xr=l,Br=l,Wr||($r=clearTimeout($r),Wr=1,Gr(Te))},Wl.timer.flush=function(){Me(),Re()},Wl.round=function(e,t){return t?Rl(e*(t=Pl(10,t)))/t:Rl(e)};var Qr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Pl(10,3*rr(8-t));return{scale:8<t?function(e){return e/n}:function(e){return e*n},symbol:e}});Wl.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=Wl.round(e,Ne(e,t))),n=1+Bl(1e-12+Dl(e)/Ll),n=ql(-24,Vl(24,3*Bl((n-1)/3)))),Qr[8+n/3]};var Kr=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,eo=Wl.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=Wl.round(e,Ne(e,t))).toFixed(ql(0,Vl(20,Ne(e*(1+1e-15),t))))}}),to=Wl.time={},no=Date;qe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){io.setUTCDate.apply(this._,arguments)},setDay:function(){io.setUTCDay.apply(this._,arguments)},setFullYear:function(){io.setUTCFullYear.apply(this._,arguments)},setHours:function(){io.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){io.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){io.setUTCMinutes.apply(this._,arguments)},setMonth:function(){io.setUTCMonth.apply(this._,arguments)},setSeconds:function(){io.setUTCSeconds.apply(this._,arguments)},setTime:function(){io.setTime.apply(this._,arguments)}};var io=Date.prototype;to.year=De(function(e){return e=to.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),to.years=to.year.range,to.years.utc=to.year.utc.range,to.day=De(function(e){var t=new no(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),to.days=to.day.range,to.days.utc=to.day.utc.range,to.dayOfYear=function(e){var t=to.year(e);return Bl((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=to[e]=De(function(e){return(e=to.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Bl(t))},function(e){var n=to.year(e).getDay();return Bl((to.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});to[e+"s"]=n.range,to[e+"s"].utc=n.utc.range,to[e+"OfYear"]=function(e){var n=to.year(e).getDay();return Bl((to.dayOfYear(e)+(n+t)%7)/7)}}),to.week=to.sunday,to.weeks=to.sunday.range,to.weeks.utc=to.sunday.utc.range,to.weekOfYear=to.sundayOfYear;var ao={"-":"",_:" ",0:"0"},lo=/^\s*\d+/,ro=/^%/;Wl.locale=function(e){return{numberFormat:Ue(e),timeFormat:Oe(e)}};var oo=Wl.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Wl.format=oo.numberFormat,Wl.geo={},ot.prototype={s:0,t:0,add:function(e){st(e,this.t,so),st(so.s,this.s,this),this.s?this.t+=so.t:this.s=so.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var so=new ot;Wl.geo.stream=function(e,t){e&&go.hasOwnProperty(e.type)?go[e.type](e,t):dt(e,t)};var go={Feature:function(e,t){dt(e.geometry,t)},FeatureCollection:function(e,t){for(var a=e.features,l=-1,i=a.length;++l<i;)dt(a[l].geometry,t)}},po={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var a=e.coordinates,l=-1,i=a.length;++l<i;)e=a[l],t.point(e[0],e[1],e[2])},LineString:function(e,t){gt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var a=e.coordinates,l=-1,i=a.length;++l<i;)gt(a[l],t,0)},Polygon:function(e,t){pt(e.coordinates,t)},MultiPolygon:function(e,t){for(var a=e.coordinates,l=-1,i=a.length;++l<i;)pt(a[l],t)},GeometryCollection:function(e,t){for(var a=e.geometries,l=-1,i=a.length;++l<i;)dt(a[l],t)}};Wl.geo.area=function(e){return ho=0,Wl.geo.stream(e,uo),ho};var ho,co=new ot,uo={sphere:function(){ho+=4*Er},point:x,lineStart:x,lineEnd:x,polygonStart:function(){co.reset(),uo.lineStart=ht},polygonEnd:function(){var e=2*co;ho+=0>e?4*Er+e:e,uo.lineStart=uo.lineEnd=uo.point=x}};Wl.geo.bounds=function(){function e(e,t){_.push(v=[g=e,c=e]),t<h&&(h=t),t>u&&(u=t)}function t(t,n){var i=ct([t*zr,n*zr]);if(f){var a=yt(f,i),l=[a[1],-a[0],0],r=yt(l,a);xt(r),r=_t(r);var d=t-y,p=0<d?1:-1,s=r[0]*Lr*p,m=180<rr(d);if(m^(p*y<s&&s<p*t)){var x=r[1]*Lr;x>u&&(u=x)}else if(s=(s+360)%360-180,m^(p*y<s&&s<p*t)){var x=-r[1]*Lr;x<h&&(h=x)}else n<h&&(h=n),n>u&&(u=n);m?t<y?o(g,t)>o(g,c)&&(c=t):o(t,c)>o(g,c)&&(g=t):c>=g?(t<g&&(g=t),t>c&&(c=t)):t>y?o(g,t)>o(g,c)&&(c=t):o(t,c)>o(g,c)&&(g=t)}else e(t,n);f=i,y=t}function n(){S.point=t}function i(){v[0]=g,v[1]=c,S.point=e,f=null}function a(e,n){if(f){var i=e-y;x+=180<rr(i)?i+(0<i?360:-360):i}else p=e,m=n;uo.point(e,n),t(e,n)}function l(){uo.lineStart()}function r(){a(p,m),uo.lineEnd(),rr(x)>Ar&&(g=-(c=180)),v[0]=g,v[1]=c,f=null}function o(e,t){return 0>(t-=e)?t+360:t}function s(e,t){return e[0]-t[0]}function d(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var g,h,c,u,y,p,m,f,x,_,v,S={point:e,lineStart:n,lineEnd:i,polygonStart:function(){S.point=a,S.lineStart=l,S.lineEnd=r,x=0,uo.polygonStart()},polygonEnd:function(){uo.polygonEnd(),S.point=e,S.lineStart=n,S.lineEnd=i,0>co?(g=-(c=180),h=-(u=90)):x>Ar?u=90:x<-Ar&&(h=-90),v[0]=g,v[1]=c}};return function(e){u=c=-(g=h=Infinity),_=[],Wl.geo.stream(e,S);var t=_.length;if(t){_.sort(s);for(var n,l=1,i=_[0],a=[i];l<t;++l)n=_[l],d(n[0],i)||d(n[1],i)?(o(i[0],n[1])>o(i[0],i[1])&&(i[1]=n[1]),o(n[0],i[1])>o(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var r,n,p=-Infinity,t=a.length-1,l=0,i=a[t];l<=t;i=n,++l)n=a[l],(r=o(i[1],n[0]))>p&&(p=r,g=n[0],c=i[1])}return _=v=null,g===Infinity||h===Infinity?[[NaN,NaN],[NaN,NaN]]:[[g,h],[c,u]]}}(),Wl.geo.centroid=function(e){yo=mo=fo=xo=_o=vo=bo=So=ko=Eo=wo=0,Wl.geo.stream(e,Co);var t=ko,n=Eo,i=wo,a=t*t+n*n+i*i;return a<jr&&(t=vo,n=bo,i=So,mo<Ar&&(t=fo,n=xo,i=_o),a=t*t+n*n+i*i,a<jr)?[NaN,NaN]:[Tl(n,t)*Lr,ee(i/Hl(a))*Lr]};var yo,mo,fo,xo,_o,vo,bo,So,ko,Eo,wo,Co={sphere:x,point:bt,lineStart:kt,lineEnd:Et,polygonStart:function(){Co.lineStart=wt},polygonEnd:function(){Co.lineStart=kt}},Ao=Lt(Ct,function(e){var t,n=NaN,i=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(l,r){var o=0<l?Er:-Er,s=rr(l-n);rr(s-Er)<Ar?(e.point(n,i=0<(i+r)/2?Cr:-Cr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(o,i),e.point(l,i),t=0):a!==o&&s>=Er&&(rr(n-a)<Ar&&(n-=a*Ar),rr(l-o)<Ar&&(l-=o*Ar),i=Nt(n,i,l,r),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(o,i),t=0),e.point(n=l,i=r),a=o},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var a;if(null==e)a=n*Cr,i.point(-Er,a),i.point(0,a),i.point(Er,a),i.point(Er,0),i.point(Er,-a),i.point(0,-a),i.point(-Er,-a),i.point(-Er,0),i.point(-Er,a);else if(rr(e[0]-t[0])>Ar){var l=e[0]<t[0]?Er:-Er;a=n*l/2,i.point(-l,a),i.point(0,a),i.point(l,a)}else i.point(t[0],t[1])},[-Er,-Er/2]),jo=1e9;Wl.geo.clipExtent=function(){var e,t,n,i,a,l,r={stream:function(e){return a&&(a.valid=!1),a=l(e),a.valid=!0,a},extent:function(o){return arguments.length?(l=Dt(e=+o[0][0],t=+o[0][1],n=+o[1][0],i=+o[1][1]),a&&(a.valid=!1,a=null),r):[[e,t],[n,i]]}};return r.extent([[0,0],[960,500]])},(Wl.geo.conicEqualArea=function(){return Ot(Yt)}).raw=Yt,Wl.geo.albers=function(){return Wl.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},Wl.geo.albersUsa=function(){function e(e){var l=e[0],r=e[1];return t=null,(n(l,r),t)||(i(l,r),t)||a(l,r),t}var t,n,i,a,l=Wl.geo.albers(),r=Wl.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=Wl.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(e,n){t=[e,n]}};return e.invert=function(e){var n=l.scale(),i=l.translate(),t=(e[0]-i[0])/n,a=(e[1]-i[1])/n;return(.12<=a&&.234>a&&-.425<=t&&-.214>t?r:.166<=a&&.234>a&&-.214<=t&&-.115>t?o:l).invert(e)},e.stream=function(e){var t=l.stream(e),n=r.stream(e),i=o.stream(e);return{point:function(e,a){t.point(e,a),n.point(e,a),i.point(e,a)},sphere:function(){t.sphere(),n.sphere(),i.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},e.precision=function(t){return arguments.length?(l.precision(t),r.precision(t),o.precision(t),e):l.precision()},e.scale=function(t){return arguments.length?(l.scale(t),r.scale(.35*t),o.scale(t),e.translate(l.translate())):l.scale()},e.translate=function(t){if(!arguments.length)return l.translate();var d=l.scale(),g=+t[0],p=+t[1];return n=l.translate(t).clipExtent([[g-.455*d,p-.238*d],[g+.455*d,p+.238*d]]).stream(s).point,i=r.translate([g-.307*d,p+.201*d]).clipExtent([[g-.425*d+Ar,p+.12*d+Ar],[g-.214*d-Ar,p+.234*d-Ar]]).stream(s).point,a=o.translate([g-.205*d,p+.212*d]).clipExtent([[g-.214*d+Ar,p+.166*d+Ar],[g-.115*d-Ar,p+.234*d-Ar]]).stream(s).point,e},e.scale(1070)};var zo,Lo,To,Mo,Ro,No,Uo={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Lo=0,Uo.lineStart=Ft},polygonEnd:function(){Uo.lineStart=Uo.lineEnd=Uo.point=x,zo+=rr(Lo/2)}},Po={point:function(e,t){e<To&&(To=e),e>Ro&&(Ro=e),t<Mo&&(Mo=t),t>No&&(No=t)},lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},qo={point:Vt,lineStart:Xt,lineEnd:Bt,polygonStart:function(){qo.lineStart=Wt},polygonEnd:function(){qo.point=Vt,qo.lineStart=Xt,qo.lineEnd=Bt}};Wl.geo.path=function(){function e(e){return e&&("function"===typeof o&&l.pointRadius(+o.apply(this,arguments)),(!r||!r.valid)&&(r=a(l)),Wl.geo.stream(e,r)),l.result()}function t(){return r=null,e}var n,i,a,l,r,o=4.5;return e.area=function(e){return zo=0,Wl.geo.stream(e,a(Uo)),zo},e.centroid=function(e){return fo=xo=_o=vo=bo=So=ko=Eo=wo=0,Wl.geo.stream(e,a(qo)),wo?[ko/wo,Eo/wo]:So?[vo/So,bo/So]:_o?[fo/_o,xo/_o]:[NaN,NaN]},e.bounds=function(e){return Ro=No=-(To=Mo=Infinity),Wl.geo.stream(e,a(Po)),[[To,Mo],[Ro,No]]},e.projection=function(e){return arguments.length?(a=(n=e)?e.stream||Gt(e):Ce,t()):n},e.context=function(e){return arguments.length?(l=null==(i=e)?new It:new $t(e),"function"!==typeof o&&l.pointRadius(o),t()):i},e.pointRadius=function(t){return arguments.length?(o="function"===typeof t?t:(l.pointRadius(+t),+t),e):o},e.projection(Wl.geo.albersUsa()).context(null)},Wl.geo.transform=function(e){return{stream:function(t){var n=new Qt(t);for(var i in e)n[i]=e[i];return n}}},Qt.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Wl.geo.projection=en,Wl.geo.projectionMutator=tn,(Wl.geo.equirectangular=function(){return en(an)}).raw=an.invert=an,Wl.geo.rotation=function(e){function t(t){return t=e(t[0]*zr,t[1]*zr),t[0]*=Lr,t[1]*=Lr,t}return e=rn(e[0]%360*zr,e[1]*zr,2<e.length?e[2]*zr:0),t.invert=function(t){return t=e.invert(t[0]*zr,t[1]*zr),t[0]*=Lr,t[1]*=Lr,t},t},ln.invert=an,Wl.geo.circle=function(){function e(){var e="function"===typeof i?i.apply(this,arguments):i,t=rn(-e[0]*zr,-e[1]*zr,0).invert,a=[];return n(null,null,1,{point:function(e,n){a.push(e=t(e,n)),e[0]*=Lr,e[1]*=Lr}}),{type:"Polygon",coordinates:[a]}}var t,n,i=[0,0],a=6;return e.origin=function(t){return arguments.length?(i=t,e):i},e.angle=function(i){return arguments.length?(n=gn((t=+i)*zr,a*zr),e):t},e.precision=function(i){return arguments.length?(n=gn(t*zr,(a=+i)*zr),e):a},e.angle(90)},Wl.geo.distance=function(e,n){var i,t=(n[0]-e[0])*zr,a=e[1]*zr,l=n[1]*zr,r=Ol(t),o=Ml(t),s=Ol(a),d=Ml(a),g=Ol(l),p=Ml(l);return Tl(Hl((i=p*r)*i+(i=d*g-s*p*o)*i),s*g+d*p*o)},Wl.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Wl.range(Nl(l/m)*m,a,m).map(h).concat(Wl.range(Nl(d/f)*f,s,f).map(c)).concat(Wl.range(Nl(i/u)*u,n,u).filter(function(e){return rr(e%m)>Ar}).map(g)).concat(Wl.range(Nl(o/y)*y,r,y).filter(function(e){return rr(e%f)>Ar}).map(p))}var n,i,a,l,r,o,s,d,g,p,h,c,u=10,y=u,m=90,f=360,x=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(l).concat(c(s).slice(1),h(a).reverse().slice(1),c(d).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(l=+t[0][0],a=+t[1][0],d=+t[0][1],s=+t[1][1],l>a&&(t=l,l=a,a=t),d>s&&(t=d,d=s,s=t),e.precision(x)):[[l,d],[a,s]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],o=+t[0][1],r=+t[1][1],i>n&&(t=i,i=n,n=t),o>r&&(t=o,o=r,r=t),e.precision(x)):[[i,o],[n,r]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],f=+t[1],e):[m,f]},e.minorStep=function(t){return arguments.length?(u=+t[0],y=+t[1],e):[u,y]},e.precision=function(t){return arguments.length?(x=+t,g=hn(o,r,90),p=cn(i,n,x),h=hn(d,s,90),c=cn(l,a,x),e):x},e.majorExtent([[-180,-90+Ar],[180,90-Ar]]).minorExtent([[-180,-80-Ar],[180,80+Ar]])},Wl.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),n||a.apply(this,arguments)]}}var t,n,i=un,a=yn;return e.distance=function(){return Wl.geo.distance(t||i.apply(this,arguments),n||a.apply(this,arguments))},e.source=function(n){return arguments.length?(i=n,t="function"===typeof n?null:n,e):i},e.target=function(t){return arguments.length?(a=t,n="function"===typeof t?null:t,e):a},e.precision=function(){return arguments.length?e:0},e},Wl.geo.interpolate=function(e,t){return mn(e[0]*zr,e[1]*zr,t[0]*zr,t[1]*zr)},Wl.geo.length=function(e){return Do=0,Wl.geo.stream(e,Ho),Do};var Do,Ho={sphere:x,point:x,lineStart:function(){function e(e,l){var r=Ol(l*=zr),o=Ml(l),s=rr((e*=zr)-n),t=Ml(s);Do+=Tl(Hl((s=o*Ol(s))*s+(s=a*r-i*o*t)*s),i*r+a*o*t),n=e,i=r,a=o}var n,i,a;Ho.point=function(t,l){n=t*zr,i=Ol(l*=zr),a=Ml(l),Ho.point=e},Ho.lineEnd=function(){Ho.point=Ho.lineEnd=x}},lineEnd:x,polygonStart:x,polygonEnd:x},Oo=fn(function(e){return Hl(2/(1+e))},function(e){return 2*Fl(e/2)});(Wl.geo.azimuthalEqualArea=function(){return en(Oo)}).raw=Oo;var Yo=fn(function(e){var t=Il(e);return t&&t/Ol(t)},Ce);(Wl.geo.azimuthalEquidistant=function(){return en(Yo)}).raw=Yo,(Wl.geo.conicConformal=function(){return Ot(xn)}).raw=xn,(Wl.geo.conicEquidistant=function(){return Ot(_n)}).raw=_n;var Fo=fn(function(e){return 1/e},Math.atan);(Wl.geo.gnomonic=function(){return en(Fo)}).raw=Fo,vn.invert=function(e,t){return[e,2*zl(Yl(t))-Cr]},(Wl.geo.mercator=function(){return bn(vn)}).raw=vn;var Io=fn(function(){return 1},Math.asin);(Wl.geo.orthographic=function(){return en(Io)}).raw=Io;var Zo=fn(function(e){return 1/(1+e)},function(e){return 2*zl(e)});(Wl.geo.stereographic=function(){return en(Zo)}).raw=Zo,Sn.invert=function(e,t){return[-t,2*zl(Yl(e))-Cr]},(Wl.geo.transverseMercator=function(){var e=bn(Sn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],2<e.length?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Sn,Wl.geom={},Wl.geom.hull=function(e){function t(e){if(3>e.length)return[];var t,i=we(a),r=we(l),o=e.length,n=[],s=[];for(t=0;t<o;t++)n.push([+i.call(this,e[t],t),+r.call(this,e[t],t),t]);for(n.sort(Cn),t=0;t<o;t++)s.push([n[t][0],-n[t][1]]);var d=wn(n),g=wn(s),p=g[0]===d[0],h=g[g.length-1]===d[d.length-1],c=[];for(t=d.length-1;0<=t;--t)c.push(e[n[d[t]][2]]);for(t=+p;t<g.length-h;++t)c.push(e[n[g[t]][2]]);return c}var a=kn,l=En;return arguments.length?t(e):(t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(l=e,t):l},t)},Wl.geom.polygon=function(e){return pr(e,Vo),e};var Vo=Wl.geom.polygon.prototype=[];Vo.area=function(){for(var e,t=-1,i=this.length,n=this[i-1],a=0;++t<i;)e=n,n=this[t],a+=e[1]*n[0]-e[0]*n[1];return .5*a},Vo.centroid=function(e){var t,a,l=-1,i=this.length,n=0,r=0,o=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++l<i;)t=o,o=this[l],a=t[0]*o[1]-o[0]*t[1],n+=(t[0]+o[0])*a,r+=(t[1]+o[1])*a;return[n*e,r*e]},Vo.clip=function(e){for(var t,l,r,o,s,g,d=zn(e),p=-1,i=this.length-zn(this),n=this[i-1];++p<i;){for(t=e.slice(),e.length=0,o=this[p],s=t[(r=t.length-d)-1],l=-1;++l<r;)g=t[l],An(g,n,o)?(!An(s,n,o)&&e.push(jn(s,g,n,o)),e.push(g)):An(s,n,o)&&e.push(jn(s,g,n,o)),s=g;d&&e.push(e[0]),n=o}return e};var Xo,Bo,Wo,$o,Jo,Go=[],Qo=[];qn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Hn),t.length},$n.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Jn.prototype={insert:function(e,t){var n,i,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ei(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)i=n.U,n===i.L?(a=i.R,a&&a.C?(n.C=a.C=!1,i.C=!0,e=i):(e===n.R&&(Qn(this,n),e=n,n=e.U),n.C=!1,i.C=!0,Kn(this,i))):(a=i.L,a&&a.C?(n.C=a.C=!1,i.C=!0,e=i):(e===n.L&&(Kn(this,n),e=n,n=e.U),n.C=!1,i.C=!0,Qn(this,i))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,a=e.U,l=e.L,r=e.R;if(n=l?r?ei(r):l:r,a?a.L===e?a.L=n:a.R=n:this._=n,l&&r?(i=n.C,n.C=e.C,n.L=l,l.U=n,n===r?(n.U=a,a=n,e=n.R):(a=n.U,n.U=e.U,e=n.R,a.L=e,n.R=r,r.U=n)):(i=e.C,e=n),e&&(e.U=a),!i){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===a.L){if(t=a.R,t.C&&(t.C=!1,a.C=!0,Qn(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Kn(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,Qn(this,a),e=this._;break}}else if(t=a.L,t.C&&(t.C=!1,a.C=!0,Kn(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Qn(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,Kn(this,a),e=this._;break}t.C=!0,e=a,a=a.U}while(!e.C);e&&(e.C=!1)}}},Wl.geom.voronoi=function(e){function t(e){var t=Array(e.length),a=o[0][0],l=o[0][1],r=o[1][0],s=o[1][1];return ti(n(e),o).cells.forEach(function(n,o){var i=n.edges,d=n.site,g=t[o]=i.length?i.map(function(t){var e=t.start();return[e.x,e.y]}):d.x>=a&&d.x<=r&&d.y>=l&&d.y<=s?[[a,s],[r,s],[r,l],[a,l]]:[];g.point=e[o]}),t}function n(e){return e.map(function(e,t){return{x:Rl(l(e,t)/Ar)*Ar,y:Rl(r(e,t)/Ar)*Ar,i:t}})}var i=kn,a=En,l=i,r=a,o=Ko;return e?t(e):(t.links=function(e){return ti(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return ti(n(e)).cells.forEach(function(n,a){for(var i,l,r=n.site,o=n.edges.sort(Hn),s=-1,d=o.length,g=o[d-1].edge,p=g.l===r?g.r:g.l;++s<d;)i=g,l=p,g=o[s].edge,p=g.l===r?g.r:g.l,a<l.i&&a<p.i&&0>ii(r,l,p)&&t.push([e[a],e[l.i],e[p.i]])}),t},t.x=function(e){return arguments.length?(l=we(i=e),t):i},t.y=function(e){return arguments.length?(r=we(a=e),t):a},t.clipExtent=function(e){return arguments.length?(o=null==e?Ko:e,t):o===Ko?null:o},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):o===Ko?null:o&&o[1]},t)};var Ko=[[-1000000,-1000000],[1000000,1000000]];Wl.geom.delaunay=function(e){return Wl.geom.voronoi().triangles(e)},Wl.geom.quadtree=function(e,t,a,l,r){function n(e){function p(e,t,n,i,a,l,r,o){if(!(isNaN(n)||isNaN(i)))if(e.leaf){var s=e.x,d=e.y;if(null==s)e.x=n,e.y=i,e.point=t;else if(.01>rr(s-n)+rr(d-i))h(e,t,n,i,a,l,r,o);else{var g=e.point;e.x=e.y=e.point=null,h(e,g,s,d,a,l,r,o),h(e,t,n,i,a,l,r,o)}}else h(e,t,n,i,a,l,r,o)}function h(e,t,n,a,l,r,o,s){var d=.5*(l+o),g=.5*(r+s),h=n>=d,c=a>=g,u=(c<<1)+h;e.leaf=!1,e=e.nodes[u]||(e.nodes[u]=ri()),h?l=d:o=d,c?r=g:s=g,p(e,t,n,a,l,r,o,s)}var c,d,u,y,i,n,m,x,_,f=we(s),v=we(g);if(null!=t)n=t,m=a,x=l,_=r;else if(x=_=-(n=m=Infinity),d=[],u=[],i=e.length,o)for(y=0;y<i;++y)c=e[y],c.x<n&&(n=c.x),c.y<m&&(m=c.y),c.x>x&&(x=c.x),c.y>_&&(_=c.y),d.push(c.x),u.push(c.y);else for(y=0;y<i;++y){var b=+f(c=e[y],y),S=+v(c,y);b<n&&(n=b),S<m&&(m=S),b>x&&(x=b),S>_&&(_=S),d.push(b),u.push(S)}var k=x-n,E=_-m;k>E?_=m+k:x=n+E;var w=ri();if(w.add=function(e){p(w,e,+f(e,++y),+v(e,y),n,m,x,_)},w.visit=function(e){oi(e,w,n,m,x,_)},y=-1,null==t){for(;++y<i;)p(w,e[y],d[y],u[y],n,m,x,_);--y}else e.forEach(w.add);return d=u=e=c=null,w}var o,s=kn,g=En;return(o=arguments.length)?(s=ai,g=li,3===o&&(r=a,l=t,a=t=0),n(e)):(n.x=function(e){return arguments.length?(s=e,n):s},n.y=function(e){return arguments.length?(g=e,n):g},n.extent=function(e){return arguments.length?(null==e?t=a=l=r=null:(t=+e[0][0],a=+e[0][1],l=+e[1][0],r=+e[1][1]),n):null==t?null:[[t,a],[l,r]]},n.size=function(e){return arguments.length?(null==e?t=a=l=r=null:(t=a=0,l=+e[0],r=+e[1]),n):null==t?null:[l-t,r-a]},n)},Wl.interpolateRgb=si,Wl.interpolateObject=di,Wl.interpolateNumber=gi,Wl.interpolateString=pi;var es=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ts=new RegExp(es.source,"g");Wl.interpolate=hi,Wl.interpolators=[function(e,n){var i=typeof n;return("string"===i?Vr.has(n)||/^(#|rgb\(|hsl\()/.test(n)?si:pi:n instanceof le?si:Array.isArray(n)?ci:"object"===i&&isNaN(n)?di:gi)(e,n)}],Wl.interpolateArray=ci;var ns=function(){return Ce},is=Wl.map({linear:ns,poly:function(n){return function(e){return Pl(e,n)}},quad:function(){return fi},cubic:function(){return xi},sin:function(){return vi},exp:function(){return bi},circle:function(){return Si},elastic:function(e,n){var i;return 2>arguments.length&&(n=.45),arguments.length?i=n/wr*Fl(1/e):(e=1,i=n/4),function(a){return 1+e*Pl(2,-10*a)*Ol((a-i)*wr/n)}},back:function(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}},bounce:function(){return ki}}),as=Wl.map({in:Ce,out:yi,"in-out":mi,"out-in":function(e){return mi(yi(e))}});Wl.ease=function(e){var n=e.indexOf("-"),i=0<=n?e.slice(0,n):e,t=0<=n?e.slice(n+1):"in";return i=is.get(i)||ns,t=as.get(t)||Ce,ui(t(i.apply(null,$l.call(arguments,1))))},Wl.interpolateHcl=function(e,t){e=Wl.hcl(e),t=Wl.hcl(t);var n=e.h,i=e.c,a=e.l,l=t.h-n,r=t.c-i,o=t.l-a;return isNaN(r)&&(r=0,i=isNaN(i)?t.c:i),isNaN(l)?(l=0,n=isNaN(n)?t.h:n):180<l?l-=360:-180>l&&(l+=360),function(e){return de(n+l*e,i+r*e,a+o*e)+""}},Wl.interpolateHsl=function(e,t){e=Wl.hsl(e),t=Wl.hsl(t);var n=e.h,i=e.s,a=e.l,l=t.h-n,r=t.s-i,o=t.l-a;return isNaN(r)&&(r=0,i=isNaN(i)?t.s:i),isNaN(l)?(l=0,n=isNaN(n)?t.h:n):180<l?l-=360:-180>l&&(l+=360),function(e){return oe(n+l*e,i+r*e,a+o*e)+""}},Wl.interpolateLab=function(e,t){e=Wl.lab(e),t=Wl.lab(t);var n=e.l,i=e.a,a=e.b,l=t.l-n,r=t.a-i,o=t.b-a;return function(e){return pe(n+l*e,i+r*e,a+o*e)+""}},Wl.interpolateRound=Ei,Wl.transform=function(e){var t=Gl.createElementNS(Wl.ns.prefix.svg,"g");return(Wl.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new wi(n?n.matrix:ls)})(e)},wi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ls={a:1,b:0,c:0,d:1,e:0,f:0};Wl.interpolateTransform=zi,Wl.layout={},Wl.layout.bundle=function(){return function(e){for(var t=[],a=-1,i=e.length;++a<i;)t.push(Mi(e[a]));return t}},Wl.layout.chord=function(){function e(){var e,p,h,c,i,u={},y=[],m=Wl.range(o),f=[];for(a=[],l=[],e=0,c=-1;++c<o;){for(p=0,i=-1;++i<o;)p+=r[c][i];y.push(p),f.push(Wl.range(o)),e+=p}for(n&&m.sort(function(e,t){return n(y[e],y[t])}),s&&f.forEach(function(e,t){e.sort(function(e,n){return s(r[t][e],r[t][n])})}),e=(wr-g*o)/e,p=0,c=-1;++c<o;){for(h=p,i=-1;++i<o;){var _=m[c],b=f[_][i],S=r[_][b],k=p,E=p+=S*e;u[_+"-"+b]={index:_,subindex:b,startAngle:k,endAngle:E,value:S}}l[_]={index:_,startAngle:h,endAngle:p,value:(p-h)/e},p+=g}for(c=-1;++c<o;)for(i=c-1;++i<o;){var w=u[c+"-"+i],C=u[i+"-"+c];(w.value||C.value)&&a.push(w.value<C.value?{source:C,target:w}:{source:w,target:C})}d&&t()}function t(){a.sort(function(e,t){return d((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var a,l,r,o,n,s,d,i={},g=0;return i.matrix=function(e){return arguments.length?(o=(r=e)&&r.length,a=l=null,i):r},i.padding=function(e){return arguments.length?(g=e,a=l=null,i):g},i.sortGroups=function(e){return arguments.length?(n=e,a=l=null,i):n},i.sortSubgroups=function(e){return arguments.length?(s=e,a=null,i):s},i.sortChords=function(e){return arguments.length?(d=e,a&&t(),i):d},i.chords=function(){return a||e(),a},i.groups=function(){return l||e(),l},i},Wl.layout.force=function(){function e(e){return function(t,n,a,l){if(t.point!==e){var r=t.cx-e.x,s=t.cy-e.y,d=l-n,g=r*r+s*s;if(d*d/o<g){if(g<i){var p=t.charge/g;e.px-=r*p,e.py-=s*p}return!0}if(t.point&&g&&g<i){var p=t.pointCharge/g;e.px-=r*p,e.py-=s*p}}return!t.charge}}function t(e){e.px=Wl.event.x,e.py=Wl.event.y,s.resume()}var n,a,r,d,l,s={},g=Wl.dispatch("start","tick","end"),p=[1,1],h=.9,c=rs,u=os,f=-30,i=ss,_=.1,o=.64,v=[],b=[];return s.tick=function(){if(.005>(a*=.99))return g.end({type:"end",alpha:a=0}),!0;var c,u,i,o,s,t,S,k,x,y=v.length,n=b.length;for(u=0;u<n;++u)i=b[u],o=i.source,s=i.target,k=s.x-o.x,x=s.y-o.y,(t=k*k+x*x)&&(t=a*d[u]*((t=Hl(t))-r[u])/t,k*=t,x*=t,s.x-=k*(S=o.weight/(s.weight+o.weight)),s.y-=x*S,o.x+=k*(S=1-S),o.y+=x*S);if((S=a*_)&&(k=p[0]/2,x=p[1]/2,u=-1,S))for(;++u<y;)i=v[u],i.x+=(k-i.x)*S,i.y+=(x-i.y)*S;if(f)for(Hi(c=Wl.geom.quadtree(v),a,l),u=-1;++u<y;)(i=v[u]).fixed||c.visit(e(i));for(u=-1;++u<y;)i=v[u],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*h,i.y-=(i.py-(i.py=i.y))*h);g.tick({type:"tick",alpha:a})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(b=e,s):b},s.size=function(e){return arguments.length?(p=e,s):p},s.linkDistance=function(e){return arguments.length?(c="function"===typeof e?e:+e,s):c},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(u="function"===typeof e?e:+e,s):u},s.friction=function(e){return arguments.length?(h=+e,s):h},s.charge=function(e){return arguments.length?(f="function"===typeof e?e:+e,s):f},s.chargeDistance=function(e){return arguments.length?(i=e*e,s):Hl(i)},s.gravity=function(e){return arguments.length?(_=+e,s):_},s.theta=function(e){return arguments.length?(o=e*e,s):Hl(o)},s.alpha=function(e){return arguments.length?(e=+e,a?0<e?a=e:a=0:0<e&&(g.start({type:"start",alpha:a=e}),Wl.timer(s.tick)),s):a},s.start=function(){function e(e,n){if(!i){for(i=Array(o),s=0;s<o;++s)i[s]=[];for(s=0;s<d;++s){var a=b[s];i[a.source.index].push(a.target),i[a.target.index].push(a.source)}}for(var l,r=i[t],s=-1,d=r.length;++s<d;)if(!isNaN(l=r[s][e]))return l;return Math.random()*n}var t,i,a,o=v.length,n=b.length,g=p[0],y=p[1];for(t=0;t<o;++t)(a=v[t]).index=t,a.weight=0;for(t=0;t<n;++t)a=b[t],"number"==typeof a.source&&(a.source=v[a.source]),"number"==typeof a.target&&(a.target=v[a.target]),++a.source.weight,++a.target.weight;for(t=0;t<o;++t)a=v[t],isNaN(a.x)&&(a.x=e("x",g)),isNaN(a.y)&&(a.y=e("y",y)),isNaN(a.px)&&(a.px=a.x),isNaN(a.py)&&(a.py=a.y);if(r=[],"function"===typeof c)for(t=0;t<n;++t)r[t]=+c.call(this,b[t],t);else for(t=0;t<n;++t)r[t]=c;if(d=[],"function"===typeof u)for(t=0;t<n;++t)d[t]=+u.call(this,b[t],t);else for(t=0;t<n;++t)d[t]=u;if(l=[],"function"===typeof f)for(t=0;t<o;++t)l[t]=+f.call(this,v[t],t);else for(t=0;t<o;++t)l[t]=f;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=Wl.behavior.drag().origin(Ce).on("dragstart.force",Ui).on("drag.force",t).on("dragend.force",Pi)),arguments.length?void this.on("mouseover.force",qi).on("mouseout.force",Di).call(n):n},Wl.rebind(s,g,"on")};var rs=20,os=1,ss=Infinity;Wl.layout.hierarchy=function(){function e(l){var r,o=[l],s=[];for(l.depth=0;null!=(r=o.pop());)if(s.push(r),(n=i.call(e,r,r.depth))&&(d=n.length)){for(var d,n,g;0<=--d;)o.push(g=n[d]),g.parent=r,g.depth=r.depth+1;a&&(r.value=0),r.children=n}else a&&(r.value=+a.call(e,r,r.depth)||0),delete r.children;return Fi(l,function(e){var n,i;t&&(n=e.children)&&n.sort(t),a&&(i=e.parent)&&(i.value+=e.value)}),s}var t=Vi,i=Ii,a=Zi;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(i=t,e):i},e.value=function(t){return arguments.length?(a=t,e):a},e.revalue=function(t){return a&&(Yi(t,function(e){e.children&&(e.value=0)}),Fi(t,function(t){var n;t.children||(t.value=+a.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},Wl.layout.partition=function(){function e(t,a,l,r){var o=t.children;if(t.x=a,t.y=t.depth*r,t.dx=l,t.dy=r,o&&(s=o.length)){var s,n,g,d=-1;for(l=t.value?l/t.value:0;++d<s;)e(n=o[d],a,g=n.value*l,r),a+=g}}function t(e){var a=e.children,l=0;if(a&&(r=a.length))for(var r,n=-1;++n<r;)l=ql(l,t(a[n]));return 1+l}function n(n,r){var i=a.call(this,n,r);return e(i[0],0,l[0],l[1]/t(i[0])),i}var a=Wl.layout.hierarchy(),l=[1,1];return n.size=function(e){return arguments.length?(l=e,n):l},Oi(n,a)},Wl.layout.pie=function(){function e(r){var o=r.map(function(n,a){return+t.call(e,n,a)}),s=+("function"===typeof i?i.apply(this,arguments):i),g=(("function"===typeof l?l.apply(this,arguments):l)-s)/Wl.sum(o),d=Wl.range(r.length);null!=n&&d.sort(n===ds?function(e,t){return o[t]-o[e]}:function(e,t){return n(r[e],r[t])});var p=[];return d.forEach(function(e){var t;p[e]={data:r[e],value:t=o[e],startAngle:s,endAngle:s+=t*g}}),p}var t=Number,n=ds,i=0,l=wr;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(l=t,e):l},e};var ds={};Wl.layout.stack=function(){function e(s,d){if(!(c=s.length))return s;var g=s.map(function(n,a){return t.call(e,n,a)}),p=g.map(function(t){return t.map(function(t,a){return[n.call(e,t,a),o.call(e,t,a)]})}),h=a.call(e,p,d);g=Wl.permute(g,h),p=Wl.permute(p,h);var c,u,i,y,f=l.call(e,p,d),x=g[0].length;for(i=0;i<x;++i)for(r.call(e,g[0][i],y=f[i],p[0][i][1]),u=1;u<c;++u)r.call(e,g[u][i],y+=p[u-1][i][1],p[u][i][1]);return s}var t=Ce,a=Ji,l=Gi,r=$i,n=Bi,o=Wi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(a="function"===typeof t?t:gs.get(t)||Ji,e):a},e.offset=function(t){return arguments.length?(l="function"===typeof t?t:ps.get(t)||Gi,e):l},e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(r=t,e):r},e};var gs=Wl.map({"inside-out":function(e){var t,i,a=e.length,n=e.map(Qi),l=e.map(Ki),r=Wl.range(a).sort(function(e,t){return n[e]-n[t]}),o=0,s=0,d=[],g=[];for(t=0;t<a;++t)i=r[t],o<s?(o+=l[i],d.push(i)):(s+=l[i],g.push(i));return g.reverse().concat(d)},reverse:function(e){return Wl.range(e.length).reverse()},default:Ji}),ps=Wl.map({silhouette:function(e){var t,i,a,l=e.length,n=e[0].length,r=[],o=0,s=[];for(i=0;i<n;++i){for(t=0,a=0;t<l;t++)a+=e[t][i][1];a>o&&(o=a),r.push(a)}for(i=0;i<n;++i)s[i]=(o-r[i])/2;return s},wiggle:function(e){var t,i,a,l,r,s,d,g,o,p=e.length,n=e[0],h=n.length,c=[];for(c[0]=g=o=0,i=1;i<h;++i){for(t=0,l=0;t<p;++t)l+=e[t][i][1];for(t=0,r=0,d=n[i][0]-n[i-1][0];t<p;++t){for(a=0,s=(e[t][i][1]-e[t][i-1][1])/(2*d);a<t;++a)s+=(e[a][i][1]-e[a][i-1][1])/d;r+=s*e[t][i][1]}c[i]=g-=l?r/l*d:0,g<o&&(o=g)}for(i=0;i<h;++i)c[i]-=o;return c},expand:function(e){var t,i,a,l=e.length,n=e[0].length,r=[];for(i=0;i<n;++i){for(t=0,a=0;t<l;t++)a+=e[t][i][1];if(a)for(t=0;t<l;t++)e[t][i][1]/=a;else for(t=0;t<l;t++)e[t][i][1]=1/l}for(i=0;i<n;++i)r[i]=0;return r},zero:Gi});Wl.layout.histogram=function(){function e(e,o){for(var i,s,d=[],g=e.map(a,this),p=l.call(this,g,o),h=r.call(this,p,g,o),o=-1,c=g.length,n=h.length-1,u=t?1:1/c;++o<n;)i=d[o]=[],i.dx=h[o+1]-(i.x=h[o]),i.y=0;if(0<n)for(o=-1;++o<c;)s=g[o],s>=p[0]&&s<=p[1]&&(i=d[Wl.bisect(h,s,1,n)-1],i.y+=u,i.push(e[o]));return d}var t=!0,a=Number,l=ia,r=ta;return e.value=function(t){return arguments.length?(a=t,e):a},e.range=function(t){return arguments.length?(l=we(t),e):l},e.bins=function(t){return arguments.length?(r="number"===typeof t?function(e){return na(e,t)}:we(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},Wl.layout.pack=function(){function e(e,o){var i=n.call(this,e,o),s=i[0],d=l[0],g=l[1],p=null==t?Hl:"function"===typeof t?t:function(){return t};if(s.x=s.y=0,Fi(s,function(e){e.r=+p(e.value)}),Fi(s,sa),a){var r=a*(t?1:ql(2*s.r/d,2*s.r/g))/2;Fi(s,function(e){e.r+=r}),Fi(s,sa),Fi(s,function(e){e.r-=r})}return pa(s,d/2,g/2,t?1:1/ql(2*s.r/d,2*s.r/g)),i}var t,n=Wl.layout.hierarchy().sort(aa),a=0,l=[1,1];return e.size=function(t){return arguments.length?(l=t,e):l},e.radius=function(n){return arguments.length?(t=null==n||"function"===typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(a=+t,e):a},Oi(e,n)},Wl.layout.tree=function(){function e(e,d){var i=r.call(this,e,d),p=i[0],h=t(p);if(Fi(h,n),h.parent.m=-h.z,Yi(h,a),g)Yi(p,l);else{var c=p,u=p,y=p;Yi(p,function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>y.depth&&(y=e)});var m=o(c,u)/2-c.x,f=s[0]/(u.x+o(u,c)/2+m),x=s[1]/(y.depth||1);Yi(p,function(e){e.x=(e.x+m)*f,e.y=e.depth*x})}return i}function t(e){for(var t,a={A:null,children:[e]},l=[a];null!=(t=l.pop());)for(var r,o=t.children,s=0,d=o.length;s<d;++s)l.push((o[s]=r={_:o[s],parent:t,children:(r=o[s].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=r);return a.children[0]}function n(e){var t=e.children,n=e.parent.children,a=e.i?n[e.i-1]:null;if(t.length){fa(e);var l=(t[0].z+t[t.length-1].z)/2;a?(e.z=a.z+o(e._,a._),e.m=e.z-l):e.z=l}else a&&(e.z=a.z+o(e._,a._));e.parent.A=i(e,a,e.parent.A||n[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var i,a=e,l=e,r=t,s=a.parent.children[0],d=a.m,g=l.m,p=r.m,h=s.m;r=ya(r),a=ua(a),r&&a;)s=ua(s),l=ya(l),l.a=e,i=r.z+p-a.z-d+o(r._,a._),0<i&&(ma(xa(r,e,n),e,i),d+=i,g+=i),p+=r.m,d+=a.m,h+=s.m,g+=l.m;r&&!ya(l)&&(l.t=r,l.m+=p-g),a&&!ua(s)&&(s.t=a,s.m+=d-h,n=e)}return n}function l(e){e.x*=s[0],e.y=e.depth*s[1]}var r=Wl.layout.hierarchy().sort(null).value(null),o=ca,s=[1,1],g=null;return e.separation=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(g=null==(s=t)?l:null,e):g?null:s},e.nodeSize=function(t){return arguments.length?(g=null==(s=t)?null:l,e):g?s:null},Oi(e,r)},Wl.layout.cluster=function(){function e(e,l){var r,o=t.call(this,e,l),s=o[0],d=0;Fi(s,function(e){var t=e.children;t&&t.length?(e.x=va(t),e.y=_a(t)):(e.x=r?d+=n(e,r):0,e.y=0,r=e)});var g=ba(s),p=Sa(s),h=g.x-n(g,p)/2,c=p.x+n(p,g)/2;return Fi(s,a?function(e){e.x=(e.x-s.x)*i[0],e.y=(s.y-e.y)*i[1]}:function(e){e.x=(e.x-h)/(c-h)*i[0],e.y=(1-(s.y?e.y/s.y:1))*i[1]}),o}var t=Wl.layout.hierarchy().sort(null).value(null),n=ca,i=[1,1],a=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(a=null==(i=t),e):a?null:i},e.nodeSize=function(t){return arguments.length?(a=null!=(i=t),e):a?i:null},Oi(e,t)},Wl.layout.treemap=function(){function e(e,t){for(var a,l,r=-1,i=e.length;++r<i;)l=(a=e[r]).value*(0>t?0:t),a.area=isNaN(l)||0>=l?0:l}function t(l){var r=l.children;if(r&&r.length){var o,s,d,n=p(l),g=[],h=r.slice(),y=Infinity,m="slice"===c?n.dx:"dice"===c?n.dy:"slice-dice"===c?1&l.depth?n.dy:n.dx:Vl(n.dx,n.dy);for(e(h,n.dx*n.dy/l.value),g.area=0;0<(d=h.length);)g.push(o=h[d-1]),g.area+=o.area,"squarify"!==c||(s=i(g,m))<=y?(h.pop(),y=s):(g.area-=g.pop().area,a(g,m,n,!1),m=Vl(n.dx,n.dy),g.length=g.area=0,y=Infinity);g.length&&(a(g,m,n,!0),g.length=g.area=0),r.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var l,r=p(t),o=i.slice(),s=[];for(e(o,r.dx*r.dy/t.value),s.area=0;l=o.pop();)s.push(l),s.area+=l.area,null!=l.z&&(a(s,l.z?r.dx:r.dy,r,!o.length),s.length=s.area=0);i.forEach(n)}}function i(e,t){for(var a,l=e.area,r=0,o=Infinity,s=-1,i=e.length;++s<i;)(a=e[s].area)&&(a<o&&(o=a),a>r&&(r=a));return l*=l,t*=t,l?ql(t*r*y/l,l/(t*o*y)):Infinity}function a(e,t,a,l){var r,o=-1,i=e.length,n=a.x,d=a.y,g=t?s(e.area/t):0;if(t==a.dx){for((l||g>a.dy)&&(g=a.dy);++o<i;)r=e[o],r.x=n,r.y=d,r.dy=g,n+=r.dx=Vl(a.x+a.dx-n,g?s(r.area/g):0);r.z=!0,r.dx+=a.x+a.dx-n,a.y+=g,a.dy-=g}else{for((l||g>a.dx)&&(g=a.dx);++o<i;)r=e[o],r.x=n,r.y=d,r.dx=g,d+=r.dy=Vl(a.y+a.dy-d,g?s(r.area/g):0);r.z=!1,r.dy+=a.y+a.dy-d,a.x+=g,a.dx-=g}}function l(i){var a=r||o(i),l=a[0];return l.x=0,l.y=0,l.dx=g[0],l.dy=g[1],r&&o.revalue(l),e([l],l.dx*l.dy/l.value),(r?n:t)(l),h&&(r=a),a}var r,o=Wl.layout.hierarchy(),s=Rl,g=[1,1],d=null,p=ka,h=!1,c="squarify",y=.5*(1+2.23606797749979);return l.size=function(e){return arguments.length?(g=e,l):g},l.padding=function(e){function t(t){return Ea(t,e)}if(!arguments.length)return d;var n;return p=null==(d=e)?ka:"function"===(n=typeof e)?function(t){var n=e.call(l,t,t.depth);return null==n?ka(t):Ea(t,"number"===typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,l},l.round=function(e){return arguments.length?(s=e?Rl:Number,l):s!=Number},l.sticky=function(e){return arguments.length?(h=e,r=null,l):h},l.ratio=function(e){return arguments.length?(y=e,l):y},l.mode=function(e){return arguments.length?(c=e+"",l):c},Oi(l,o)},Wl.random={normal:function(e,t){var i=arguments.length;return 2>i&&(t=1),1>i&&(e=0),function(){var n,i,a;do n=2*Math.random()-1,i=2*Math.random()-1,a=n*n+i*i;while(!a||1<a);return e+t*n*Hl(-2*Dl(a)/a)}},logNormal:function(){var e=Wl.random.normal.apply(Wl,arguments);return function(){return Yl(e())}},bates:function(e){var t=Wl.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},Wl.scale={};var hs={floor:Ce,ceil:Ce};Wl.scale.linear=function(){return Ta([0,1],[0,1],hi,!1)};var cs={s:1,g:1,p:1,r:1,e:1};Wl.scale.log=function(){return Ha(Wl.scale.linear().domain([0,1]),10,!0,[1,10])};var us=Wl.format(".0e"),ys={floor:function(e){return-Nl(-e)},ceil:function(e){return-Bl(-e)}};Wl.scale.pow=function(){return Oa(Wl.scale.linear(),1,[0,1])},Wl.scale.sqrt=function(){return Wl.scale.pow().exponent(.5)},Wl.scale.ordinal=function(){return Fa([],{t:"range",a:[[]]})},Wl.scale.category10=function(){return Wl.scale.ordinal().range(ms)},Wl.scale.category20=function(){return Wl.scale.ordinal().range(fs)},Wl.scale.category20b=function(){return Wl.scale.ordinal().range(xs)},Wl.scale.category20c=function(){return Wl.scale.ordinal().range(_s)};var ms=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xe),fs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xe),xs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xe),_s=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xe);Wl.scale.quantile=function(){return Ia([],[])},Wl.scale.quantize=function(){return Za(0,1,[0,1])},Wl.scale.threshold=function(){return Va([0.5],[0,1])},Wl.scale.identity=function(){return Xa([0,1])},Wl.svg={},Wl.svg.arc=function(){function e(){var e=t.apply(this,arguments),a=n.apply(this,arguments),r=i.apply(this,arguments)+vs,o=l.apply(this,arguments)+vs,s=(o<r&&(s=r,r=o,o=s),o-r),d=s<Er?"0":"1",g=Ml(r),p=Ol(r),h=Ml(o),c=Ol(o);return s>=bs?e?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":e?"M"+a*g+","+a*p+"A"+a+","+a+" 0 "+d+",1 "+a*h+","+a*c+"L"+e*h+","+e*c+"A"+e+","+e+" 0 "+d+",0 "+e*g+","+e*p+"Z":"M"+a*g+","+a*p+"A"+a+","+a+" 0 "+d+",1 "+a*h+","+a*c+"L0,0Z"}var t=Ba,n=Wa,i=$a,l=Ja;return e.innerRadius=function(n){return arguments.length?(t=we(n),e):t},e.outerRadius=function(t){return arguments.length?(n=we(t),e):n},e.startAngle=function(t){return arguments.length?(i=we(t),e):i},e.endAngle=function(t){return arguments.length?(l=we(t),e):l},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,r=(i.apply(this,arguments)+l.apply(this,arguments))/2+vs;return[Ml(r)*e,Ol(r)*e]},e};var vs=-Cr,bs=wr-Ar;Wl.svg.line=function(){return Ga(Ce)};var Ss=Wl.map({linear:Qa,"linear-closed":function(e){return Qa(e)+"Z"},step:function(e){for(var t=0,i=e.length,n=e[0],a=[n[0],",",n[1]];++t<i;)a.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);return 1<i&&a.push("H",n[0]),a.join("")},"step-before":Ka,"step-after":el,basis:il,"basis-open":function(e){if(4>e.length)return Qa(e);for(var t,a=[],l=-1,i=e.length,n=[0],r=[0];3>++l;)t=e[l],n.push(t[0]),r.push(t[1]);for(a.push(al(ws,n)+","+al(ws,r)),--l;++l<i;)t=e[l],n.shift(),n.push(t[0]),r.shift(),r.push(t[1]),ll(a,n,r);return a.join("")},"basis-closed":function(e){for(var t,a,l=-1,i=e.length,n=i+4,r=[],o=[];4>++l;)a=e[l%i],r.push(a[0]),o.push(a[1]);for(t=[al(ws,r),",",al(ws,o)],--l;++l<n;)a=e[l%i],r.shift(),r.push(a[0]),o.shift(),o.push(a[1]),ll(t,r,o);return t.join("")},bundle:function(e,a){var l=e.length-1;if(l)for(var n,r,t=e[0][0],o=e[0][1],s=e[l][0]-t,d=e[l][1]-o,g=-1;++g<=l;)n=e[g],r=g/l,n[0]=a*n[0]+(1-a)*(t+r*s),n[1]=a*n[1]+(1-a)*(o+r*d);return il(e)},cardinal:function(e,t){return 3>e.length?Qa(e):e[0]+tl(e,nl(e,t))},"cardinal-open":function(e,t){return 4>e.length?Qa(e):e[1]+tl(e.slice(1,e.length-1),nl(e,t))},"cardinal-closed":function(e,t){return 3>e.length?Qa(e):e[0]+tl((e.push(e[0]),e),nl([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return 3>e.length?Qa(e):e[0]+tl(e,sl(e))}});Ss.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var ks=[0,0.6666666666666666,0.3333333333333333,0],Es=[0,0.3333333333333333,0.6666666666666666,0],ws=[0,0.16666666666666666,0.6666666666666666,0.16666666666666666];Wl.svg.line.radial=function(){var e=Ga(dl);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ka.reverse=el,el.reverse=Ka,Wl.svg.area=function(){return gl(Ce)},Wl.svg.area.radial=function(){var e=gl(dl);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},Wl.svg.chord=function(){function e(e,d){var i=n(this,o,e,d),s=n(this,g,e,d);return"M"+i.p0+l(i.r,i.p1,i.a1-i.a0)+(a(i,s)?r(i.r,i.p1,i.r,i.p0):r(i.r,i.p1,s.r,s.p0)+l(s.r,s.p1,s.a1-s.a0)+r(s.r,s.p1,i.r,i.p0))+"Z"}function n(e,n,a,l){var i=n.call(e,a,l),o=t.call(e,i,l),d=s.call(e,i,l)+vs,g=p.call(e,i,l)+vs;return{r:o,a0:d,a1:g,p0:[o*Ml(d),o*Ol(d)],p1:[o*Ml(g),o*Ol(g)]}}function a(e,t){return e.a0==t.a0&&e.a1==t.a1}function l(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Er)+",1 "+t}function r(e,t,n,i){return"Q 0,0 "+i}var o=un,g=yn,t=pl,s=$a,p=Ja;return e.radius=function(n){return arguments.length?(t=we(n),e):t},e.source=function(t){return arguments.length?(o=we(t),e):o},e.target=function(t){return arguments.length?(g=we(t),e):g},e.startAngle=function(t){return arguments.length?(s=we(t),e):s},e.endAngle=function(t){return arguments.length?(p=we(t),e):p},e},Wl.svg.diagonal=function(){function e(e,l){var i=t.call(this,e,l),r=n.call(this,e,l),o=(i.y+r.y)/2,s=[i,{x:i.x,y:o},{x:r.x,y:o},r];return s=s.map(a),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var t=un,n=yn,a=hl;return e.source=function(n){return arguments.length?(t=we(n),e):t},e.target=function(t){return arguments.length?(n=we(t),e):n},e.projection=function(t){return arguments.length?(a=t,e):a},e},Wl.svg.diagonal.radial=function(){var e=Wl.svg.diagonal(),t=hl,n=e.projection;return e.projection=function(e){return arguments.length?n(cl(t=e)):t},e},Wl.svg.symbol=function(){function e(e,a){return(Cs.get(t.call(this,e,a))||ml)(n.call(this,e,a))}var t=yl,n=ul;return e.type=function(n){return arguments.length?(t=we(n),e):t},e.size=function(t){return arguments.length?(n=we(t),e):n},e};var Cs=Wl.map({circle:ml,cross:function(e){var t=Hl(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Hl(e/(2*Ls)),n=t*Ls;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Hl(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Hl(e/zs),n=t*zs/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Hl(e/zs),n=t*zs/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});Wl.svg.symbolTypes=Cs.keys();var As,js,zs=1.7320508075688772,Ls=jl(30*zr),Ts=[],Ms=0;Ts.call=mr.call,Ts.empty=mr.empty,Ts.node=mr.node,Ts.size=mr.size,Wl.transition=function(e){return arguments.length?As?e.transition():e:_r.transition()},Wl.transition.prototype=Ts,Ts.select=function(e){var t,a,l,r=this.id,o=[];e=w(e);for(var s=-1,d=this.length;++s<d;){o.push(t=[]);for(var g=this[s],p=-1,i=g.length;++p<i;)(l=g[p])&&(a=e.call(l,l.__data__,p,s))?("__data__"in l&&(a.__data__=l.__data__),vl(a,p,r,l.__transition__[r]),t.push(a)):t.push(null)}return fl(o,r)},Ts.selectAll=function(e){var t,a,l,r,s,d=this.id,g=[];e=C(e);for(var p=-1,h=this.length;++p<h;)for(var c=this[p],u=-1,i=c.length;++u<i;)if(l=c[u]){s=l.__transition__[d],a=e.call(l,l.__data__,u,p),g.push(t=[]);for(var n=-1,y=a.length;++n<y;)(r=a[n])&&vl(r,n,d,s),t.push(r)}return fl(g,d)},Ts.filter=function(e){var t,a,l,r=[];"function"!==typeof e&&(e=q(e));for(var o=0,s=this.length;o<s;o++){r.push(t=[]);for(var a=this[o],d=0,i=a.length;d<i;d++)(l=a[d])&&e.call(l,l.__data__,d,o)&&t.push(l)}return fl(r,this.id)},Ts.tween=function(e,t){var n=this.id;return 2>arguments.length?this.node().__transition__[n].tween.get(e):H(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(i){i.__transition__[n].tween.set(e,t)})},Ts.attr=function(e,t){function n(){this.removeAttribute(r)}function i(){this.removeAttributeNS(r.space,r.local)}if(2>arguments.length){for(t in e)this.attr(t,e[t]);return this}var l="transform"==e?zi:hi,r=Wl.ns.qualify(e);return xl(this,"attr."+e,t,r.local?function(e){return null==e?i:(e+="",function(){var n,t=this.getAttributeNS(r.space,r.local);return t!==e&&(n=l(t,e),function(e){this.setAttributeNS(r.space,r.local,n(e))})})}:function(e){return null==e?n:(e+="",function(){var n,t=this.getAttribute(r);return t!==e&&(n=l(t,e),function(e){this.setAttribute(r,n(e))})})})},Ts.attrTween=function(e,t){var n=Wl.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,a){var i=t.call(this,e,a,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,a){var i=t.call(this,e,a,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},Ts.style=function(e,t,a){function i(){this.style.removeProperty(e)}var l=arguments.length;if(3>l){if("string"!==typeof e){for(a in 2>l&&(t=""),e)this.style(a,e[a],t);return this}a=""}return xl(this,"style."+e,t,function(t){return null==t?i:(t+="",function(){var n,i=Kl.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(n=hi(i,t),function(i){this.style.setProperty(e,n(i),a)})})})},Ts.styleTween=function(e,t,n){return 3>arguments.length&&(n=""),this.tween("style."+e,function(a,l){var i=t.call(this,a,l,Kl.getComputedStyle(this,null).getPropertyValue(e));return i&&function(a){this.style.setProperty(e,i(a),n)}})},Ts.text=function(e){return xl(this,"text",e,_l)},Ts.remove=function(){return this.each("end.transition",function(){var e;2>this.__transition__.count&&(e=this.parentNode)&&e.removeChild(this)})},Ts.ease=function(e){var t=this.id;return 1>arguments.length?this.node().__transition__[t].ease:("function"!==typeof e&&(e=Wl.ease.apply(Wl,arguments)),H(this,function(n){n.__transition__[t].ease=e}))},Ts.delay=function(e){var t=this.id;return 1>arguments.length?this.node().__transition__[t].delay:H(this,"function"===typeof e?function(n,a,i){n.__transition__[t].delay=+e.call(n,n.__data__,a,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Ts.duration=function(e){var t=this.id;return 1>arguments.length?this.node().__transition__[t].duration:H(this,"function"===typeof e?function(n,a,i){n.__transition__[t].duration=ql(1,e.call(n,n.__data__,a,i))}:(e=ql(1,e),function(n){n.__transition__[t].duration=e}))},Ts.each=function(e,t){var n=this.id;if(2>arguments.length){var i=js,a=As;As=n,H(this,function(t,a,i){js=t.__transition__[n],e.call(t,t.__data__,a,i)}),js=i,As=a}else H(this,function(i){var a=i.__transition__[n];(a.event||(a.event=Wl.dispatch("start","end"))).on(e,t)});return this},Ts.transition=function(){for(var e,t,a,l,r=this.id,o=++Ms,s=[],d=0,g=this.length;d<g;d++){s.push(e=[]);for(var t=this[d],p=0,i=t.length;p<i;p++)(a=t[p])&&(l=Object.create(a.__transition__[r]),l.delay+=l.duration,vl(a,p,o,l)),e.push(a)}return fl(s,o)},Wl.svg.axis=function(){function e(e){e.each(function(){var e,d=Wl.select(this),g=this.__chart__||n,p=this.__chart__=n.copy(),h=null==s?p.ticks?p.ticks.apply(p,o):p.domain():s,c=null==t?p.tickFormat?p.tickFormat.apply(p,o):Ce:t,u=d.selectAll(".tick").data(h,p),y=u.enter().insert("g",".domain").attr("class","tick").style("opacity",Ar),m=Wl.transition(u.exit()).style("opacity",Ar).remove(),f=Wl.transition(u.order()).style("opacity",1),_=ql(a,0)+r,v=Ca(p),b=d.selectAll(".domain").data([0]),S=(b.enter().append("path").attr("class","domain"),Wl.transition(b));y.append("line"),y.append("text");var k,E,w,C,A=y.select("line"),j=f.select("line"),z=u.select("text").text(c),L=y.select("text"),T=f.select("text"),M="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(e=bl,k="x",w="y",E="x2",C="y2",z.attr("dy",0>M?"0em":".71em").style("text-anchor","middle"),S.attr("d","M"+v[0]+","+M*l+"V0H"+v[1]+"V"+M*l)):(e=Sl,k="y",w="x",E="y2",C="x2",z.attr("dy",".32em").style("text-anchor",0>M?"end":"start"),S.attr("d","M"+M*l+","+v[0]+"H0V"+v[1]+"H"+M*l)),A.attr(C,M*a),L.attr(w,M*_),j.attr(E,0).attr(C,M*a),T.attr(k,0).attr(w,M*_),p.rangeBand){var R=p,x=R.rangeBand()/2;g=p=function(e){return R(e)+x}}else g.rangeBand?g=p:m.call(e,p,g);y.call(e,g,p),f.call(e,p,p)})}var t,n=Wl.scale.linear(),i=Rs,a=6,l=6,r=3,o=[10],s=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t in Ns?t+"":Rs,e):i},e.ticks=function(){return arguments.length?(o=arguments,e):o},e.tickValues=function(t){return arguments.length?(s=t,e):s},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var i=arguments.length;return i?(a=+t,l=+arguments[i-1],e):a},e.innerTickSize=function(t){return arguments.length?(a=+t,e):a},e.outerTickSize=function(t){return arguments.length?(l=+t,e):l},e.tickPadding=function(t){return arguments.length?(r=+t,e):r},e.tickSubdivide=function(){return arguments.length&&e},e};var Rs="bottom",Ns={top:1,right:1,bottom:1,left:1};Wl.svg.brush=function(){function e(l){l.each(function(){var l=Wl.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),r=l.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),l.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=l.selectAll(".resize").data(u,Ce);o.exit().remove(),o.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Us[e]}).append("rect").attr("x",function(e){return /[ew]$/.test(e)?-3:null}).attr("y",function(e){return /^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",e.empty()?"none":null);var g,p=Wl.transition(l),h=Wl.transition(r);s&&(g=Ca(s),h.attr("x",g[0]).attr("width",g[1]-g[0]),n(p)),d&&(g=Ca(d),h.attr("y",g[0]).attr("height",g[1]-g[0]),i(p)),t(p)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+p[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",p[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function i(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function a(){function a(){var e=Wl.mouse(x),a=!1;f&&(e[0]+=f[0],e[1]+=f[1]),A||(Wl.event.altKey?(!m&&(m=[(p[0]+p[1])/2,(h[0]+h[1])/2]),z[0]=p[+(e[0]<m[0])],z[1]=h[+(e[1]<m[1])]):m=null),E&&u(e,s,0)&&(n(S),a=!0),C&&u(e,d,1)&&(i(S),a=!0),a&&(t(S),v({type:"brush",mode:A?"move":"resize"}))}function u(e,t,n){var i,a,o=Ca(t),s=o[0],d=o[1],u=z[n],y=n?h:p,f=y[1]-y[0];if(A&&(s-=u,d-=f+u),i=(n?c:g)?ql(s,Vl(d,e[n])):e[n],A?a=(i+=u)+f:(m&&(u=ql(s,Vl(d,2*m[n]-i))),u<i?(a=i,i=u):a=u),y[0]!=i||y[1]!=a)return n?r=null:l=null,y[0]=i,y[1]=a,!0}function y(){a(),S.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),Wl.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),j(),v({type:"brushend"})}var m,f,x=this,_=Wl.select(Wl.event.target),v=o.of(x,arguments),S=Wl.select(x),k=_.datum(),E=!/^(n|s)$/.test(k)&&s,C=!/^(e|w)$/.test(k)&&d,A=_.classed("extent"),j=X(),z=Wl.mouse(x),L=Wl.select(Kl).on("keydown.brush",function(){32==Wl.event.keyCode&&(!A&&(m=null,z[0]-=p[1],z[1]-=h[1],A=2),b())}).on("keyup.brush",function(){32==Wl.event.keyCode&&2==A&&(z[0]+=p[1],z[1]+=h[1],A=0,b())});if(Wl.event.changedTouches?L.on("touchmove.brush",a).on("touchend.brush",y):L.on("mousemove.brush",a).on("mouseup.brush",y),S.interrupt().selectAll("*").interrupt(),A)z[0]=p[0]-z[0],z[1]=h[0]-z[1];else if(k){var w=+/w$/.test(k),T=+/^n/.test(k);f=[p[1-w]-z[0],h[1-T]-z[1]],z[0]=p[w],z[1]=h[T]}else Wl.event.altKey&&(m=z.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),Wl.select("body").style("cursor",_.style("cursor")),v({type:"brushstart"}),a()}var l,r,o=k(e,"brushstart","brush","brushend"),s=null,d=null,p=[0,0],h=[0,0],g=!0,c=!0,u=Ps[0];return e.event=function(e){e.each(function(){var e=o.of(this,arguments),n={x:p,y:h,i:l,j:r},t=this.__chart__||n;this.__chart__=n,As?Wl.select(this).transition().each("start.brush",function(){l=t.i,r=t.j,p=t.x,h=t.y,e({type:"brushstart"})}).tween("brush:brush",function(){var i=ci(p,n.x),a=ci(h,n.y);return l=r=null,function(l){p=n.x=i(l),h=n.y=a(l),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){l=n.i,r=n.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(s=t,u=Ps[!s<<1|!d],e):s},e.y=function(t){return arguments.length?(d=t,u=Ps[!s<<1|!d],e):d},e.clamp=function(t){return arguments.length?(s&&d?(g=!!t[0],c=!!t[1]):s?g=!!t:d&&(c=!!t),e):s&&d?[g,c]:s?g:d?c:null},e.extent=function(n){var i,a,o,g,c;return arguments.length?(s&&(i=n[0],a=n[1],d&&(i=i[0],a=a[0]),l=[i,a],s.invert&&(i=s(i),a=s(a)),a<i&&(c=i,i=a,a=c),(i!=p[0]||a!=p[1])&&(p=[i,a])),d&&(o=n[0],g=n[1],s&&(o=o[1],g=g[1]),r=[o,g],d.invert&&(o=d(o),g=d(g)),g<o&&(c=o,o=g,g=c),(o!=h[0]||g!=h[1])&&(h=[o,g])),e):(s&&(l?(i=l[0],a=l[1]):(i=p[0],a=p[1],s.invert&&(i=s.invert(i),a=s.invert(a)),a<i&&(c=i,i=a,a=c))),d&&(r?(o=r[0],g=r[1]):(o=h[0],g=h[1],d.invert&&(o=d.invert(o),g=d.invert(g)),g<o&&(c=o,o=g,g=c))),s&&d?[[i,o],[a,g]]:s?[i,a]:d&&[o,g])},e.clear=function(){return e.empty()||(p=[0,0],h=[0,0],l=r=null),e},e.empty=function(){return!!s&&p[0]==p[1]||!!d&&h[0]==h[1]},Wl.rebind(e,o,"on")};var Us={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ps=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],qs=to.format=oo.timeFormat,Ds=qs.utc,Hs=Ds("%Y-%m-%dT%H:%M:%S.%LZ");qs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?kl:Hs,kl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},kl.toString=Hs.toString,to.second=De(function(e){return new no(1e3*Bl(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Bl(t))},function(e){return e.getSeconds()}),to.seconds=to.second.range,to.seconds.utc=to.second.utc.range,to.minute=De(function(e){return new no(6e4*Bl(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Bl(t))},function(e){return e.getMinutes()}),to.minutes=to.minute.range,to.minutes.utc=to.minute.utc.range,to.hour=De(function(e){var t=e.getTimezoneOffset()/60;return new no(36e5*(Bl(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Bl(t))},function(e){return e.getHours()}),to.hours=to.hour.range,to.hours.utc=to.hour.utc.range,to.month=De(function(e){return e=to.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),to.months=to.month.range,to.months.utc=to.month.utc.range;var Os=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000],Ys=[[to.second,1],[to.second,5],[to.second,15],[to.second,30],[to.minute,1],[to.minute,5],[to.minute,15],[to.minute,30],[to.hour,1],[to.hour,3],[to.hour,6],[to.hour,12],[to.day,1],[to.day,2],[to.week,1],[to.month,1],[to.month,3],[to.year,1]],Fs=qs.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Ct]]),Is={range:function(e,t,n){return Wl.range(Nl(e/n)*n,+t,n).map(wl)},floor:Ce,ceil:Ce};Ys.year=to.year,to.scale=function(){return El(Wl.scale.linear(),Ys,Fs)};var Zs=Ys.map(function(e){return[e[0].utc,e[1]]}),Vs=Ds.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Ct]]);Zs.year=to.year.utc,to.scale.utc=function(){return El(Wl.scale.linear(),Zs,Vs)},Wl.text=Ae(function(e){return e.responseText}),Wl.json=function(e,t){return je(e,"application/json",Cl,t)},Wl.html=function(e,t){return je(e,"text/html",Al,t)},Wl.xml=Ae(function(e){return e.responseXML}),"function"===typeof define&&define.amd?define(Wl):"object"===typeof module&&module.exports&&(module.exports=Wl),this.d3=Wl}();</script><script>(function(){"Alchemy.js is a graph drawing application for the web.\\nCopyright (C) 2014  GraphAlchemist, Inc.\\n\\nThis program is free software: you can redistribute it and/or modify\\nit under the terms of the GNU Affero General Public License as published by\\nthe Free Software Foundation, either version 3 of the License, or\\n(at your option) any later version.\\n\\nThis program is distributed in the hope that it will be useful,\\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\nGNU Affero General Public License for more details.\\n\\nYou should have received a copy of the GNU Affero General Public License\\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\\nlets";var e,t,o,s,d,a,r,l,i,n,c,p,g,u,h=Math.sqrt,y=[].slice,f=function(e,t){return function(){return e.apply(t,arguments)}};t=function(){function t(t){null==t&&(t=null),this.a=this,this.version="0.4.2",this.api=new e(this),this.get=this.api.get,this.create=this.api.create,this.set=this.api.set,this.filter=this.api.filter,this.forceLayout=this.api.force,this.drawing={DrawEdge:s(this),DrawEdges:d(this),DrawNode:a(this),DrawNodes:r(this),NodeUtils:this.NodeUtils(this)},this.controlDash=this.controlDash(this),this.stats=this.stats(this),this.search=this.search(this),this.layout=c,this.clustering=o,this.models={Node:this.Node(this),Edge:this.Edge(this)},this.utils={warnings:new u(this)},this.filters=this.filters(this),this.exports=this.exports(this),this.visControls={},this.styles={},this.editor={},this.log={},this.state={interactions:"default",layout:"default"},this.startGraph=this.startGraph(this),this.updateGraph=this.updateGraph(this),this.generateLayout=this.generateLayout(this),this.svgStyles=this.svgStyles(this),this.interactions=this.interactions(this),this.plugins=this.plugins(this),this._nodes={},this._edges={},this.getNodes=this.get.getNodes,this.getEdges=this.get.getEdges,this.allNodes=this.get.allNodes,this.allEdges=this.get.allEdges,t&&this.begin(t)}return t.prototype.begin=function(e){var o;switch(o=this.setConf(e),typeof this.conf.dataSource){case"string":d3.json(this.a.conf.dataSource,this.a.startGraph);break;case"object":this.a.startGraph(this.a.conf.dataSource);}return this.plugins.init(),t.prototype.instances.push(this),this},t.prototype.setConf=function(e){var t,o;for(t in null!=e.theme&&(e=_.merge(_.cloneDeep(this.defaults),this.a.themes[""+e.theme])),e)o=e[t],"clusterColors"===t?e.clusterColours=o:"backgroundColor"===t?e.backgroundColour=o:"nodeColor"===t?e[nodeColour]=o:void 0;return this.a.conf=_.merge(_.cloneDeep(this.defaults),e)},t.prototype.instances=[],t.prototype.getInst=function(e){var o;return o=parseInt(d3.select(e).attr("alchInst")),t.prototype.instances[o]},t}(),g="undefined"!==typeof exports&&null!==exports?exports:this,g.Alchemy=t,g.alchemy={begin:function(e){return g.alchemy=new t(e)}},e=function(){return function(e){this.a=e,this.get=this.Get(e,this),this.create=this.Create(e,this),this.set=this.Set(e,this),this.remove=p.remove,this.force=this.Force(e,this),this.filter=this.Filter(e,this),this.search=this.Search(e,this),this._el=[],this._elType=null,this._makeChain=function(t,o){var s,e,d;for(this.__proto__=[].__proto__,o.__proto__=[].__proto__;this.length;)this.pop();for(;o.length;)o.pop();for(e=0,d=t.length;e<d;e++)s=t[e],this.push(s);return Array.prototype.push.apply(o,this._el),_.extend(o,this)}}}(),e.prototype.Create=function(e,o){return{a:e,api:o,nodes:function(){var e,o,s,d,a,r,l;for(s=arguments[0],d=2<=arguments.length?y.call(arguments,1):[],e=this.a,a=function(t){var o;return e._nodes[t.id]?console.warn("A node with the id "+t.id+" already exists.\nConsider using the @a.get.nodes() method to \nretrieve the node and then using the Node methods."):(o=new e.models.Node(t),e._nodes[t.id]=o,[o])},d=_.uniq(_.flatten(arguments)),(r=0,l=d.length);r<l;r++)o=d[r],a(o);if(this.a.initial)return this.a.index=t.prototype.Index(this.a),this.a.updateGraph()},edges:function(){var e,o,s,d,a;if(s=arguments[0],d=2<=arguments.length?y.call(arguments,1):[],e=this.a,a=function(t){var o,s;return t.id&&!e._edges[t.id]?(o=new e.models.Edge(t),e._edges[t.id]=[o],[o]):t.id&&e._edges[t.id]?console.warn("An edge with that id "+someEdgeMap.id+" already exists.\nConsider using the @a.get.edge() method to \nretrieve the edge and then using the Edge methods.\nNote: id's are not required for edges.  Alchemy will create\nan unlimited number of edges for the same source and target node.\nSimply omit 'id' when creating the edge."):(s=e._edges[""+t.source+"-"+t.target],s?(o=new e.models.Edge(t,s.length),s.push(o),[o]):(o=new e.models.Edge(t,0),e._edges[""+t.source+"-"+t.target]=[o],[o]))},o=_.uniq(_.flatten(arguments)),_.each(o,function(t){return a(t)}),this.a.initial)return this.a.index=t.prototype.Index(this.a),this.a.updateGraph()}}},e.prototype.Filter=function(e,t){var o,s;return o=e,s=function(e){return _.each(t._el,function(o){var s;if(s=function(){if("edge"===t._elType&&"_edgeType","node"===t._elType)return"_nodeType"}(),o[s]===e)return o.toggleHidden()})},s.nodes=function(e){var t;return t=o.elements.nodes.val,_.each(t,function(t){if(t._nodeType===e)return t.toggleHidden()})},s.edges=function(t){var e;return e=o.elements.edges.flat,_.each(e,function(o){if(o._edgeType===t)return o.toggleHidden()})},s},e.prototype.Force=function(e){var t;return t=e,{toggle:function(){return 0<t.force.alpha()?t.force.stop():t.force.resume()},start:function(){return t.force.start()},stop:function(){return t.force.stop()}}},e.prototype.Get=function(e,t){return{a:e,api:t,nodes:function(){var e,t,o,s,d,a;return s=arguments[0],d=2<=arguments.length?y.call(arguments,1):[],a=[],null!=s&&(o=_.flatten(arguments),t=_.map(o,function(e){return e+""}),e=this.a,a=function(e){return _.filter(e._nodes,function(e,o){if(_.contains(t,o))return e})}(e)),this.api._elType="node",this.api._el=a,this.api._makeChain(a,this)},edges:function(){var e,t,o,s,d;return s=arguments[0],d=2<=arguments.length?y.call(arguments,1):[],o=[],null!=s&&(t=_.map(arguments,function(e){return e+""}),e=this.a,o=function(e){return _.flatten(_.filter(e._edges,function(e,o){if(_.contains(t,o))return e}))}(e)),this.api._elType="edge",this.api._el=o,this.api._makeChain(o,this)},all:function(){var e,t;return e=this.a,t=this.api._elType,this.api._el=function(t){return"node"===t?e.elements.nodes.val:"edge"===t?e.elements.edges.flat:void 0}(t),this.api._makeChain(this.api._el,this)},elState:function(t){var e;return e=_.filter(this.api._el,function(o){return o._state===t}),this.api._el=e,this.api._makeChain(e,this)},state:function(){if(null!=this.a.state.key)return this.a.state.key},type:function(t){var e;return e=_.filter(this.api._el,function(o){return o._nodeType===t||o._edgeType===t}),this.api._el=e,this.api._makeChain(e,this)},activeNodes:function(){return _.filter(this.a._nodes,function(e){if("active"===e._state)return e})},activeEdges:function(){return _.filter(this.a.get.allEdges(),function(e){if("active"===e._state)return e})},state:function(){if(null!=this.a.state.key)return this.a.state.key},clusters:function(){var e,t;return e=this.a.layout._clustering.clusterMap,t={},_.each(e,function(e,o){return t[o]=_.select(this.a.get.allNodes(),function(e){return e.getProperties()[this.a.conf.clusterKey]===o})}),t},clusterColours:function(){var e,t;return t=this.a.layout._clustering.clusterMap,e={},_.each(t,function(t,o){return e[o]=this.a.conf.clusterColours[t%this.a.conf.clusterColours.length]}),e},allEdges:function(){return this.a.elements.nodes.flat},allNodes:function(e){return null==e?this.a.elements.nodes.val:_.filter(this.a._nodes,function(t){if(t._nodeType===e)return t})},getNodes:function(){var e,t,o;return t=arguments[0],o=2<=arguments.length?y.call(arguments,1):[],e=this.a,o.push(t),_.map(o,function(t){return e._nodes[t]})},getEdges:function(e,t){var o,s;return(null==e&&(e=null),null==t&&(t=null),o=this.a,null!=e&&null!=t)?(s=""+e+"-"+t,this.a._edges[s]):null!=e&&null==t?this.a._nodes[e]._adjacentEdges:void 0}}},p={remove:function(){return _.each(this._el,function(t){return t.remove()})}},e.prototype.Search=function(e,t){var o,s;return o=e,s=function(e){var s;return e=function(){return"contains"===o.conf.searchMethod?e:"begins"===o.conf.searchMethod?"^"+e:void 0}(),s=new RegExp(e,"i"),_.filter(t._el,function(e){return s.test(e._properties.caption)})},s.nodes=function(e){var t;return e=function(){return"contains"===o.conf.searchMethod?e:"begins"===o.conf.searchMethod?"^"+e:void 0}(),t=new RegExp(e,"i"),_.filter(o._nodes,function(e){return t.test(e._properties.caption)})},s.edges=function(e){var t;return e=function(){return"contains"===o.conf.searchMethod?e:"begins"===o.conf.searchMethod?"^"+e:void 0}(),t=new RegExp(e,"i"),_.filter(o.elements.edges.flat,function(e){return t.test(e._properties.caption)})},s},e.prototype.Set=function(e,t){return{a:e,api:t,state:function(e,t){return this.a.state.key=t}}},o=function(){function e(e){var t,o,s,d,a,r,l,i;this.a=e,s=this.a._nodes,o=this.a.conf,t=this,this.clusterKey=o.clusterKey,this.identifyClusters(this.a),d=-500,i=function(e){var t,o;return t=s[e.source.id]._properties[this.clusterKey],o=s[e.target.id]._properties[this.clusterKey],t===o?0.15:0},a=function(){return 0.7},l=function(e){return s=e.self.a._nodes,s[e.source.id]._properties.root||s[e.target.id]._properties.root?300:s[e.source.id]._properties[this.clusterKey]===s[e.target.id]._properties[this.clusterKey]?10:600},r=function(e){return 8*e},this.layout={charge:d,linkStrength:function(e){return i(e)},friction:function(){return a()},linkDistancefn:function(e){return l(e)},gravity:function(e){return r(e)}}}return e.prototype.identifyClusters=function(e){var t,o,s;return o=e.elements.nodes.val,t=_.uniq(_.map(o,function(t){return t.getProperties()[e.conf.clusterKey]})),this.clusterMap=_.zipObject(t,function(){s=[];for(var e=0,o=t.length;0<=o?e<=o:e>=o;0<=o?e++:e--)s.push(e);return s}.apply(this))},e.prototype.getClusterColour=function(e){var t;return t=this.clusterMap[e]%this.a.conf.clusterColours.length,this.a.conf.clusterColours[t]},e.prototype.edgeGradient=function(e){var t,o,s,d,a,r,l,i,n,c,p,g,u,h;for(o=this.a.vis.select(""+this.a.conf.divSelector+" svg"),t={},n=this.a._nodes,u=_.map(e,function(e){return e._d3}),(p=0,g=u.length);p<g;p++)if((s=u[p],!(n[s.source.id]._properties.root||n[s.target.id]._properties.root))&&n[s.source.id]._properties[this.clusterKey]!==n[s.target.id]._properties[this.clusterKey]&&n[s.target.id]._properties[this.clusterKey]!==n[s.source.id]._properties[this.clusterKey])if(l=n[s.source.id]._properties[this.clusterKey]+"-"+n[s.target.id]._properties[this.clusterKey],l in t)continue;else l in t||(c=this.getClusterColour(n[s.target.id]._properties[this.clusterKey]),d=this.getClusterColour(n[s.source.id]._properties[this.clusterKey]),t[l]={startColour:c,endColour:d});for(i in h=[],t)r="cluster-gradient-"+i,a=o.append("svg:linearGradient").attr("id",r),a.append("svg:stop").attr("offset","0%").attr("stop-color",t[i].startColour),h.push(a.append("svg:stop").attr("offset","100%").attr("stop-color",t[i].endColour));return h},e}(),t.prototype.clusterControls={init:function(){var e;return e="<input class='form-control form-inline' id='cluster-key' placeholder=\"Cluster Key\"></input>",this.a.dash.select("#clustering-container").append("div").attr("id","cluster-key-container").attr("class","property form-inline form-group").html(e).style("display","none"),this.a.dash.select("#cluster_control_header").on("click",function(){var e,t;return t=this.a.dash.select("#cluster-key-container"),e=t.style("display")}),element.style("display",function(){return"block"===display?"none":"block"}),"none"===this.a.dash.select("#cluster-key-container").style("display")?this.a.dash.select("#cluster-arrow").attr("class","fa fa-2x fa-caret-right"):this.a.dash.select("#cluster-arrow").attr("class","fa fa-2x fa-caret-down"),this.a.dash.select("#cluster-key").on("keydown",function(){if("Enter"===d3.event.keyIdentifier)return this.a.conf.cluster=!0,this.a.conf.clusterKey=this.value,this.a.generateLayout()})}},t.prototype.controlDash=function(e){var t;return t=e,{init:function(){var e;if(this.dashIsShown())return e=t.conf.divSelector,t.dash=d3.select(""+e).append("div").attr("id","control-dash-wrapper").attr("class","col-md-4 initial"),t.dash.append("i").attr("id","dash-toggle").attr("class","fa fa-flask col-md-offset-12"),t.dash.append("div").attr("id","control-dash").attr("class","col-md-12"),t.dash.select("#dash-toggle").on("click",t.interactions.toggleControlDash),t.controlDash.zoomCtrl(),t.controlDash.search(),t.controlDash.filters(),t.controlDash.stats(),t.controlDash.clustering(),t.controlDash.exports()},search:function(){if(t.conf.search)return t.dash.select("#control-dash").append("div").attr("id","search").html("<div class='input-group'>\n    <input class='form-control' placeholder='Search'>\n    <i class='input-group-addon search-icon'><span class='fa fa-search fa-1x'></span></i>\n</div> "),t.search.init()},zoomCtrl:function(){if(t.conf.zoomControls)return t.dash.select("#control-dash-wrapper").append("div").attr("id","zoom-controls").attr("class","col-md-offset-12").html("<button id='zoom-reset'  class='btn btn-defualt btn-primary'><i class='fa fa-crosshairs fa-lg'></i></button> <button id='zoom-in'  class='btn btn-defualt btn-primary'><i class='fa fa-plus'></i></button> <button id='zoom-out' class='btn btn-default btn-primary'><i class='fa fa-minus'></i></button>"),t.dash.select("#zoom-in").on("click",function(){return t.interactions.clickZoom("in")}),t.dash.select("#zoom-out").on("click",function(){return t.interactions.clickZoom("out")}),t.dash.select("#zoom-reset").on("click",function(){return t.interactions.clickZoom("reset")})},filters:function(){if(t.conf.nodeFilters||t.conf.edgeFilters)return t.dash.select("#control-dash").append("div").attr("id","filters"),t.filters.init()},stats:function(){var e;if(t.conf.nodeStats||t.conf.edgeStats)return e="<div id = \"stats-header\" data-toggle=\"collapse\" data-target=\"#stats #all-stats\">\n<h3>\n    Statistics\n</h3>\n<span class = \"fa fa-caret-right fa-2x\"></span>\n</div>\n<div id=\"all-stats\" class=\"collapse\">\n    <ul class = \"list-group\" id=\"node-stats\"></ul>\n    <ul class = \"list-group\" id=\"rel-stats\"></ul>  \n</div>",t.dash.select("#control-dash").append("div").attr("id","stats").html(e).select("#stats-header").on("click",function(){return t.dash.select("#all-stats").classed("in")?t.dash.select("#stats-header>span").attr("class","fa fa-2x fa-caret-right"):t.dash.select("#stats-header>span").attr("class","fa fa-2x fa-caret-down")}),t.stats.init()},exports:function(){var e;if(t.conf.exportSVG)return e="<div id=\"exports-header\" data-toggle=\"collapse\" data-target=\"#all-exports\" style=\"padding:10px;\">\n    <h3>\n        Exports\n    </h3>\n    <span class=\"fa fa-caret-right fa-2x\"></span>\n</div>\n<div id=\"all-exports\" class=\"collapse\"></div>",t.dash.select("#control-dash").append("div").attr("id","exports").attr("style","padding: 0.5em 1em; border-bottom: thin dashed #E89619; color: white;").html(e).select("#exports-header"),t.exports.init()},clustering:function(){var e;if(t.conf.clusterControl)return e="<div id=\"clustering-container\">\n    <div id=\"cluster_control_header\" data-toggle=\"collapse\" data-target=\"#clustering #cluster-options\">\n         <h3>Clustering</h3>\n        <span id=\"cluster-arrow\" class=\"fa fa-2x fa-caret-right\"></span>\n    </div>\n</div>",t.dash.select("#control-dash").append("div").attr("id","clustering").html(e).select("#cluster_control_header"),t.clusterControls.init()},dashIsShown:function(){var e;return e=t.conf,e.showEditor||e.captionToggle||e.toggleRootNodes||e.removeElement||e.clusterControl||e.nodeStats||e.edgeStats||e.edgeFilters||e.nodeFilters||e.edgesToggle||e.nodesToggle||e.search||e.exportSVG}}},t.prototype.filters=function(){return function(e){var t;return t=e,{init:function(){var e,o,s,d,a,r,l,i,n,c,p,g;if(t.filters.show(),t.conf.edgeFilters&&t.filters.showEdgeFilters(),t.conf.nodeFilters&&t.filters.showNodeFilters(),t.conf.nodeTypes){for(d=Object.keys(t.conf.nodeTypes),r="",g=t.conf.nodeTypes[d],(i=0,c=g.length);i<c;i++)a=g[i],e=a.replace("_"," "),r+="<li class='list-group-item nodeType' role='menuitem' id='li-"+a+"' name="+a+">"+e+"</li>";t.dash.select("#node-dropdown").html(r)}if(t.conf.edgeTypes){for(l=_.isPlainObject(t.conf.edgeTypes)?_.values(t.conf.edgeTypes)[0]:t.conf.edgeTypes,s="",(n=0,p=l.length);n<p;n++)o=l[n],e=o.replace("_"," "),s+="<li class='list-group-item edgeType' role='menuitem' id='li-"+o+"' name="+o+">"+e+"</li>";t.dash.select("#rel-dropdown").html(s)}return t.conf.captionsToggle&&t.filters.captionsToggle(),t.conf.edgesToggle&&t.filters.edgesToggle(),t.conf.nodesToggle&&t.filters.nodesToggle(),t.filters.update()},show:function(){var e;return e="<div id = \"filter-header\" data-toggle=\"collapse\" data-target=\"#filters form\">\n    <h3>Filters</h3>\n    <span class = \"fa fa-2x fa-caret-right\"></span>\n</div>\n    <form class=\"form-inline collapse\">\n    </form>",t.dash.select("#control-dash #filters").html(e),t.dash.selectAll("#filter-header").on("click",function(){return t.dash.select("#filters>form").classed("in")?t.dash.select("#filter-header>span").attr("class","fa fa-2x fa-caret-right"):t.dash.select("#filter-header>span").attr("class","fa fa-2x fa-caret-down")}),t.dash.select("#filters form")},showEdgeFilters:function(){var e;return e="<div id=\"filter-rel-header\" data-target = \"#rel-dropdown\" data-toggle=\"collapse\">\n    <h4>\n        Edge Types\n    </h4>\n    <span class=\"fa fa-lg fa-caret-right\"></span>\n</div>\n<ul id=\"rel-dropdown\" class=\"collapse list-group\" role=\"menu\">\n</ul>",t.dash.select("#filters form").append("div").attr("id","filter-relationships").html(e),t.dash.select("#filter-rel-header").on("click",function(){return t.dash.select("#rel-dropdown").classed("in")?t.dash.select("#filter-rel-header>span").attr("class","fa fa-lg fa-caret-right"):t.dash.select("#filter-rel-header>span").attr("class","fa fa-lg fa-caret-down")})},showNodeFilters:function(){var e;return e="<div id=\"filter-node-header\" data-target = \"#node-dropdown\" data-toggle=\"collapse\">\n    <h4>\n        Node Types\n    </h4>\n    <span class=\"fa fa-lg fa-caret-right\"></span>\n</div>\n<ul id=\"node-dropdown\" class=\"collapse list-group\" role=\"menu\">\n</ul>",t.dash.select("#filters form").append("div").attr("id","filter-nodes").html(e),t.dash.select("#filter-node-header").on("click",function(){return t.dash.select("#node-dropdown").classed("in")?t.dash.select("#filter-node-header>span").attr("class","fa fa-lg fa-caret-right"):t.dash.select("#filter-node-header>span").attr("class","fa fa-lg fa-caret-down")})},captionsToggle:function(){return t.dash.select("#filters form").append("li").attr({id:"toggle-captions",class:"list-group-item active-label toggle"}).html("Show Captions").on("click",function(){var e;return e=t.dash.select("g text").attr("style"),"display: block"===e||null?t.dash.selectAll("g text").attr("style","display: none"):t.dash.selectAll("g text").attr("style","display: block")})},edgesToggle:function(){return t.dash.select("#filters form").append("li").attr({id:"toggle-edges",class:"list-group-item active-label toggle"}).html("Toggle Edges").on("click",function(){return _.contains(_.pluck(_.flatten(_.values(t._edges)),"_state"),"active")?_.each(_.values(t._edges),function(e){return _.each(e,function(t){if("active"===t._state)return t.toggleHidden()})}):_.each(_.values(t._edges),function(e){return _.each(e,function(o){var e,s;if(e=t._nodes[o._properties.source],s=t._nodes[o._properties.target],"active"===e._state&&"active"===s._state)return o.toggleHidden()})})})},nodesToggle:function(){return t.dash.select("#filters form").append("li").attr({id:"toggle-nodes",class:"list-group-item active-label toggle"}).html("Toggle Nodes").on("click",function(){var e;return e=_.values(t._nodes),_.contains(_.pluck(e,"_state"),"active")?_.each(e,function(e){return t.conf.toggleRootNodes&&e._d3.root?void 0:"active"===e._state?e.toggleHidden():void 0}):_.each(_.values(t._nodes),function(e){return t.conf.toggleRootNodes&&e._d3.root?void 0:e.toggleHidden()})})},update:function(){return t.dash.selectAll(".nodeType, .edgeType").on("click",function(){var e,o;return e=d3.select(this),o=e.attr("name"),t.vis.selectAll("."+o).each(function(e){var o,s,d,a;return null==t._nodes[e.id]?(o=t._edges[e.id][0],d=t._nodes[o._properties.source],a=t._nodes[o._properties.target],"active"===d._state&&"active"===a._state)?o.toggleHidden():void 0:(s=t._nodes[e.id],s.toggleHidden())}),t.stats.nodeStats()})}}}}(this),t.prototype.Index=function(e){var t,o,s,d;return t=e,s={nodes:{val:function(){return _.values(t._nodes)}()},edges:{val:function(){return _.values(t._edges)}()}},d=s.nodes,o=s.edges,s.edges.flat=function(){return _.flatten(o.val)}(),s.nodes.d3=function(){return _.map(d.val,function(e){return e._d3})}(),s.edges.d3=function(){return _.map(o.flat,function(t){return t._d3})}(),t.initial&&(s.nodes.svg=function(){return t.vis.selectAll("g.node")}(),s.edges.svg=function(){return t.vis.selectAll("g.edge")}()),t.elements=s,function(){return t.elements.nodes.svg=function(){return t.vis.selectAll("g.node")}(),t.elements.edges.svg=function(){return t.vis.selectAll("g.edge")}()}},t.prototype.interactions=function(e){var o;return o=e,{edgeClick:function(e){var t;if(!d3.event.defaultPrevented)return(d3.event.stopPropagation(),t=e.self,"function"===typeof o.conf.edgeClick&&o.conf.edgeClick(t),"hidden"!==t._state)?(t._state="highlighted"===t._state?"selected":"active",t.setStyles()):void 0},edgeMouseOver:function(e){var t;if(t=e.self,"hidden"!==t._state)return"selected"!==t._state&&(t._state="highlighted"),t.setStyles()},edgeMouseOut:function(e){var t;if(t=e.self,"hidden"!==t._state)return"selected"!==t._state&&(t._state="active"),t.setStyles()},nodeMouseOver:function(e){var t;if(t=e.self,"hidden"!==t._state){if("selected"!==t._state&&(t._state="highlighted",t.setStyles()),"function"===typeof o.conf.nodeMouseOver)return o.conf.nodeMouseOver(t);if("number"===typeof o.conf.nodeMouseOver)return t.properties[o.conf.nodeMouseOver]}},nodeMouseOut:function(e){var t;if(t=e.self,o=t.a,"hidden"!==t._state&&("selected"!==t._state&&(t._state="active",t.setStyles()),null!=o.conf.nodeMouseOut&&"function"===typeof o.conf.nodeMouseOut))return o.conf.nodeMouseOut(e)},nodeClick:function(e){var t;if(!d3.event.defaultPrevented)return(d3.event.stopPropagation(),t=e.self,"function"===typeof o.conf.nodeClick&&o.conf.nodeClick(t),"hidden"!==t._state)?(t._state=function(){return"selected"===t._state?"active":"selected"}(),t.setStyles()):void 0},zoom:function(e){return null==this._zoomBehavior&&(this._zoomBehavior=d3.behavior.zoom()),this._zoomBehavior.scaleExtent(e).on("zoom",function(){return o=t.prototype.getInst(this),o.vis.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")")})},clickZoom:function(e){var t,s,d,a;return a=o.vis.attr("transform").match(/(-*\d+\.*\d*)/g).map(function(e){return parseFloat(e)}),s=a[0],d=a[1],t=a[2],o.vis.attr("transform",function(){return"in"===e?(t<o.conf.scaleExtent[1]&&(t+=0.2),"translate("+s+","+d+") scale("+t+")"):"out"===e?(t>o.conf.scaleExtent[0]&&(t-=0.2),"translate("+s+","+d+") scale("+t+")"):"reset"===e?"translate(0,0) scale(1)":console.log("error")}),null==this._zoomBehavior&&(this._zoomBehavior=d3.behavior.zoom()),this._zoomBehavior.scale(t).translate([s,d])},toggleControlDash:function(){var e;return e=o.dash.classed("off-canvas")||o.dash.classed("initial"),o.dash.classed({"off-canvas":!e,initial:!1,"on-canvas":e})},nodeDragStarted:function(e){return d3.event.preventDefault,d3.event.sourceEvent.stopPropagation(),d3.select(this).classed("dragging",!0),e.fixed=!0},nodeDragged:function(e){var t,s;return o=e.self.a,e.x+=d3.event.dx,e.y+=d3.event.dy,e.px+=d3.event.dx,e.py+=d3.event.dy,s=d3.select(this),s.attr("transform","translate("+e.x+", "+e.y+")"),t=e.self._adjacentEdges,_.each(t,function(e){var t;return t=o.vis.select("#edge-"+e.id+"-"+e._index),o._drawEdges.updateEdge(t.data()[0])})},nodeDragended:function(e){if(o=e.self.a,d3.select(this).classed({dragging:!1}),!o.conf.forceLocked)return o.force.start()},nodeDoubleClick:function(){return null},deselectAll:function(){var e;if((o=t.prototype.getInst(this),null==(e=d3.event)||!e.defaultPrevented)&&(!0===o.conf.showEditor&&o.modifyElements.nodeEditorClear(),_.each(o._nodes,function(e){return e._state="active",e.setStyles()}),_.each(o._edges,function(e){return _.each(e,function(t){return t._state="active",t.setStyles()})}),o.conf.deselectAll&&typeof("function"===o.conf.deselectAll)))return o.conf.deselectAll()}}},c=function(){function e(e){this.tick=f(this.tick,this),this.linkStrength=f(this.linkStrength,this),this.gravity=f(this.gravity,this);var t,o,s;this.a=t=e,o=this.a.conf,s=this.a._nodes,this.k=h(Math.log(_.size(this.a._nodes))/(o.graphWidth()*o.graphHeight())),this._clustering=new this.a.clustering(this.a),this.d3NodeInternals=t.elements.nodes.d3,o.cluster?(this._charge=function(){return this._clustering.layout.charge},this._linkStrength=function(e){return this._clustering.layout.linkStrength(e)}):(this._charge=function(){return-10/this.k},this._linkStrength=function(e){return s[e.source.id].getProperties("root")||s[e.target.id].getProperties("root")?1:0.9}),o.cluster?this._linkDistancefn=function(e){return this._clustering.layout.linkDistancefn(e)}:"default"===o.linkDistancefn?this._linkDistancefn=function(){return 1/(50*this.k)}:"number"===typeof o.linkDistancefn?this._linkDistancefn=function(){return o.linkDistancefn}:"function"===typeof o.linkDistancefn&&(this._linkDistancefn=function(e){return o.linkDistancefn(e)})}return e.prototype.gravity=function(){return this.a.conf.cluster?this._clustering.layout.gravity(this.k):50*this.k},e.prototype.linkStrength=function(e){return this._linkStrength(e)},e.prototype.friction=function(){return 0.9},e.prototype.collide=function(e){var t,o,s,d,a,i;return t=this.a.conf,i=2*(e.radius+e["stroke-width"])+t.nodeOverlap,o=e.x-i,s=e.x+i,d=e.y-i,a=e.y+i,function(r,n,c,p,g){var u,l,f;return r.point&&r.point!==e&&(l=e.x-Math.abs(r.point.x),f=e.y-r.point.y,u=h(l*l+f*f),i=i,u<i&&(u=(u-i)/u*t.alpha,e.x-=l*=u,e.y-=f*=u,r.point.x+=l,r.point.y+=f)),n>s||p<o||c>a||g<d}},e.prototype.tick=function(){var e,t,o,s,d,a,r,l;if(e=this.a,s=e.elements.nodes.svg,t=e.elements.edges.svg,e.conf.collisionDetection)for(d=d3.geom.quadtree(this.d3NodeInternals),l=this.d3NodeInternals,(a=0,r=l.length);a<r;a++)o=l[a],d.visit(this.collide(o));return s.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),this.drawEdge=e.drawing.DrawEdge,this.drawEdge.styleText(t),this.drawEdge.styleLink(t)},e.prototype.positionRootNodes=function(){var e,t,o,s,d,a,r,l,i,n;if(e=this.a.conf,t={width:e.graphWidth(),height:e.graphHeight()},d=_.filter(this.a.elements.nodes.val,function(e){return e.getProperties("root")}),1===d.length)s=d[0],l=[t.width/2,t.width/2],s._d3.x=l[0],s._d3.px=l[1],i=[t.height/2,t.height/2],s._d3.y=i[0],s._d3.py=i[1],s._d3.fixed=!0;else{for(n=[],o=a=0,r=d.length;a<r;o=++a)s=d[o],s._d3.x=t.width/h(d.length*(o+1)),s._d3.y=t.height/2,n.push(s._d3.fixed=!0);return n}},e.prototype.chargeDistance=function(){return 500},e.prototype.linkDistancefn=function(e){return this._linkDistancefn(e)},e.prototype.charge=function(){return this._charge()},e}(),t.prototype.generateLayout=function(e){var t;return t=e,function(e){var o;return null==e&&(e=!1),o=t.conf,t.layout=new c(t),t.force=d3.layout.force().size([o.graphWidth(),o.graphHeight()]).theta(1).gravity(t.layout.gravity()).friction(t.layout.friction()).nodes(t.elements.nodes.d3).links(t.elements.edges.d3).linkDistance(function(e){return t.layout.linkDistancefn(e)}).linkStrength(function(e){return t.layout.linkStrength(e)}).charge(t.layout.charge()).chargeDistance(t.layout.chargeDistance())}},t.prototype.search=function(e){var t;return t=e,{init:function(){var e;return e=t.dash.select("#search input"),e.on("keyup",function(){var o;return o=e[0][0].value.toLowerCase(),t.vis.selectAll(".node").classed("inactive",!1),t.vis.selectAll("text").attr("style",function(){if(""!==o)return"display: inline;"}),t.vis.selectAll(".node").classed("inactive",function(e){var s,d;switch(s=d3.select(this).text(),t.conf.searchMethod){case"contains":d=0>s.toLowerCase().indexOf(o);break;case"begins":d=0!==s.toLowerCase().indexOf(o);}return d?t.vis.selectAll("[source-target*='"+e.id+"']").classed("inactive",d):t.vis.selectAll("[source-target*='"+e.id+"']").classed("inactive",function(e){var o,s,d;return o=[e.source.id,e.target.id],s=t.vis.select("#node-"+o[0]).classed("inactive"),d=t.vis.select("#node-"+o[1]).classed("inactive"),d||s}),d})})}}},t.prototype.startGraph=function(e){var o;return o=e,function(e){var s,d,a,r,l,i;if(s=o.conf,d3.select(s.divSelector).empty()&&console.warn(o.utils.warnings.divWarning()),e||(e={nodes:[],edges:[]},o.utils.warnings.dataWarning()),null==e.edges&&(e.edges=[]),o.create.nodes(e.nodes),e.edges.forEach(function(t){return o.create.edges(t)}),o.vis=d3.select(s.divSelector).attr("style","width:"+s.graphWidth()+"px; height:"+s.graphHeight()+"px; background:"+s.backgroundColour+";").append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("xlink","http://www.w3.org/1999/xlink").attr("pointer-events","all").attr("style","background:"+s.backgroundColour+";").attr("alchInst",t.prototype.instances.length-1).on("click",o.interactions.deselectAll).call(o.interactions.zoom(s.scaleExtent)).on("dblclick.zoom",null).append("g").attr("transform","translate("+s.initialTranslate+") scale("+s.initialScale+")"),o.interactions.zoom().scale(s.initialScale),o.interactions.zoom().translate(s.initialTranslate),o.index=t.prototype.Index(o),o.generateLayout(),o.controlDash.init(),d=o.elements.edges.d3,a=o.elements.nodes.d3,o.layout.positionRootNodes(),o.force.start(),s.forceLocked)for(;5e-3<o.force.alpha();)o.force.tick();return o._drawEdges=o.drawing.DrawEdges,o._drawNodes=o.drawing.DrawNodes,o._drawEdges.createEdge(d),o._drawNodes.createNode(a),o.index(),o.elements.nodes.svg.attr("transform",function(e){return"translate("+e.x+", "+e.y+")"}),console.log(Date()+" completed initial computation"),s.forceLocked||o.force.on("tick",o.layout.tick).start(),null!=s.afterLoad&&("function"===typeof s.afterLoad?s.afterLoad():"string"===typeof s.afterLoad&&(o[s.afterLoad]=!0)),s.cluster&&(r=d3.select(""+o.conf.divSelector+" svg").append("svg:defs")),s.nodeStats&&o.stats.nodeStats(),s.showEditor&&(l=new o.editor.Editor,i=new o.editor.Interactions,d3.select("body").on("keydown",i.deleteSelected),l.startEditor()),o.initial=!0}},t.prototype.stats=function(e){var t;return t=e,{init:function(){return t.stats.update()},nodeStats:function(){var e,o,s,d,a,r,l,i,n,c,p,g,u,h;if(a=[],o=t.get.allNodes().length,e=t.get.activeNodes().length,d=o-e,n="<li class = 'list-group-item gen_node_stat'>Number of nodes: <span class='badge'>"+o+"</span></li> <li class = 'list-group-item gen_node_stat'>Number of active nodes: <span class='badge'>"+e+"</span></li> <li class = 'list-group-item gen_node_stat'>Number of inactive nodes: <span class='badge'>"+d+"</span></li></br>",t.conf.nodeTypes){for(l=Object.keys(t.conf.nodeTypes),p="",h=t.conf.nodeTypes[l],(g=0,u=h.length);g<u;g++)c=h[g],s=c.replace("_"," "),i=t.vis.selectAll("g.node."+c)[0].length,p+="<li class = 'list-group-item nodeType' id='li-"+c+"' name = "+s+">Number of <strong style='text-transform: uppercase'>"+s+"</strong> nodes: <span class='badge'>"+i+"</span></li>",a.push([""+c,i]);n+=p}return r="<li id='node-stats-graph' class='list-group-item'></li>",n+=r,t.dash.select("#node-stats").html(n),this.insertSVG("node",a)},edgeStats:function(){var e,o,s,d,a,r,l,i,n,c,p,g,u;if(d=[],o=t.get.allEdges().length,e=t.get.activeEdges().length,p=o-e,i="<li class = 'list-group-item gen_edge_stat'>Number of relationships: <span class='badge'>"+o+"</span></li> <li class = 'list-group-item gen_edge_stat'>Number of active relationships: <span class='badge'>"+e+"</span></li> <li class = 'list-group-item gen_edge_stat'>Number of inactive relationships: <span class='badge'>"+p+"</span></li></br>",t.conf.edgeTypes){for(r=_.values(alchemy.conf.edgeTypes)[0],c="",(g=0,u=r.length);g<u;g++)(n=r[g],!!n)&&(s=n.replace("_"," "),l=_.filter(t.get.allEdges(),function(e){if(e._edgeType===n)return e}).length,c+="<li class = 'list-group-item edgeType' id='li-"+n+"' name = "+s+">Number of <strong style='text-transform: uppercase'>"+s+"</strong> relationships: <span class='badge'>"+l+"</span></li>",d.push([""+s,l]));i+=c}return a="<li id='node-stats-graph' class='list-group-item'></li>",i+=a,t.dash.select("#rel-stats").html(i),this.insertSVG("edge",d)},insertSVG:function(e,o){var s,d,a,r,l,i,n,c;return null===o?t.dash.select("#"+e+"-stats-graph").html("<br><h4 class='no-data'>There are no "+e+"Types listed in your conf.</h4>"):(c=.25*t.conf.graphWidth(),r=250,i=c/4,a=d3.scale.category20(),s=d3.svg.arc().outerRadius(i-10).innerRadius(i/2),l=d3.layout.pie().sort(null).value(function(e){return e[1]}),n=t.dash.select("#"+e+"-stats-graph").append("svg").append("g").style({width:c,height:r}).attr("transform","translate("+c/2+","+r/2+")"),d=n.selectAll(".arc").data(l(o)).enter().append("g").classed("arc",!0).on("mouseover",function(e,s){return t.dash.select("#"+o[s][0]+"-stat").classed("hidden",!1)}).on("mouseout",function(e,s){return t.dash.select("#"+o[s][0]+"-stat").classed("hidden",!0)}),d.append("path").attr("d",s).attr("stroke",function(e,t){return a(t)}).attr("stroke-width",2).attr("fill-opacity","0.3"),d.append("text").attr("transform",function(e){return"translate("+s.centroid(e)+")"}).attr("id",function(e,t){return""+o[t][0]+"-stat"}).attr("dy",".35em").classed("hidden",!0).text(function(e,t){return o[t][0]}))},update:function(){if(t.conf.nodeStats&&this.nodeStats(),t.conf.edgeStats)return this.edgeStats()}}},t.prototype.updateGraph=function(e){var t;return t=e,function(){for(t.generateLayout(),t._drawEdges.createEdge(t.elements.edges.d3),t._drawNodes.createNode(t.elements.nodes.d3),t.index(),t.layout.positionRootNodes(),t.force.start();5e-3<t.force.alpha();)t.force.tick();return t.force.on("tick",t.layout.tick).start(),t.elements.nodes.svg.attr("transform",function(e){return"translate("+e.x+", "+e.y+")"})}},t.prototype.defaults={plugins:null,renderer:"svg",graphWidth:function(){return d3.select(this.divSelector).node().parentElement.clientWidth},graphHeight:function(){return"BODY"===d3.select(this.divSelector).node().parentElement.nodeName?window.innerHeight:d3.select(this.divSelector).node().parentElement.clientHeight},alpha:0.5,collisionDetection:!0,nodeOverlap:25,fixNodes:!1,fixRootNodes:!1,forceLocked:!0,linkDistancefn:"default",nodePositions:null,showEditor:!1,captionToggle:!1,toggleRootNodes:!1,removeElement:!1,cluster:!1,clusterKey:"cluster",clusterColours:d3.shuffle(["#DD79FF","#FFFC00","#00FF30","#5168FF","#00C0FF","#FF004B","#00CDCD","#f83f00","#f800df","#ff8d8f","#ffcd00","#184fff","#ff7e00"]),clusterControl:!1,nodeStats:!1,edgeStats:!1,edgeFilters:!1,nodeFilters:!1,edgesToggle:!1,nodesToggle:!1,zoomControls:!1,nodeCaption:"caption",nodeCaptionsOnByDefault:!1,nodeStyle:{all:{radius:10,color:"#68B9FE",borderColor:"#127DC1",borderWidth:function(e,t){return t/3},captionColor:"#FFFFFF",captionBackground:null,captionSize:12,selected:{color:"#FFFFFF",borderColor:"#349FE3"},highlighted:{color:"#EEEEFF"},hidden:{color:"none",borderColor:"none"}}},nodeColour:null,nodeMouseOver:"caption",nodeRadius:10,nodeTypes:null,rootNodes:"root",rootNodeRadius:15,nodeClick:null,nodePadding:0,edgeCaption:"caption",edgeCaptionsOnByDefault:!1,edgeStyle:{all:{width:4,color:"#CCC",opacity:0.2,directed:!0,curved:!0,selected:{opacity:1},highlighted:{opacity:1},hidden:{opacity:0}}},edgeTypes:null,curvedEdges:!1,edgeWidth:function(){return 4},edgeOverlayWidth:20,directedEdges:!1,edgeArrowSize:5,edgeClick:null,search:!1,searchMethod:"contains",backgroundColour:"#000000",theme:null,afterLoad:"afterLoad",divSelector:"#alchemy",dataSource:null,initialScale:1,initialTranslate:[0,0],scaleExtent:[0.5,2.4],exportSVG:!1,dataWarning:"default",warningMessage:"There be no data!  What's going on?"},s=function(e){var t=Math.PI,o=Math.atan2;return{a:e,createLink:function(e){var t;return t=this.a.conf,e.append("path").attr("class","edge-line").attr("id",function(e){return"path-"+e.id}),e.filter(function(e){return null!=e.caption}).append("text").append("textPath").classed("textpath",!0)},triangle:function(e){var t,o,s;return s=e.target.x-e.source.x,t=e.target.y-e.source.y,o=h(t*t+s*s),[s,t,o]},edgeData:function(e){var s,d,a,r,l,i,n,c;return c=this.triangle(e),n=c[0],r=c[1],l=c[2],a=e["stroke-width"],s=2,i=e.source.radius+e.source["stroke-width"]-a/2+s,d=l-i-1.5*s,{edgeAngle:180*(o(r,n)/t),edgeLength:d}},edgeAngle:function(e){var s,d;return d=e.target.x-e.source.x,s=e.target.y-e.source.y,180*(o(s,d)/t)},edgeStyle:function(e){var t,o,s,a,d;return o=this.a.conf,s=this.a._edges[e.id][e.pos],d=this.a.svgStyles.edge.populate(s),a=this.a._nodes,this.a.conf.cluster&&(t=this.a.layout._clustering,d.stroke=function(e){var s,d,r,l,i,n;return(s=o.clusterKey,i=a[e.source.id]._properties,n=a[e.target.id]._properties,i.root||n.root)?(l=i.root?n[s]:i[s],""+t.getClusterColour(l)):i[s]===n[s]?(l=i[s],""+t.getClusterColour(l)):i[s]===n[s]?void 0:(r=""+i[s]+"-"+n[s],d="cluster-gradient-"+r,"url(#"+d+")")}(e)),d},edgeWalk:function(e){var t,o,s,r,a,l,i,n,c,g,u,y,f,v,m,k,E,x,w,C,b,S,N,D,T,F,P,A,M,L,p,O,I,z,K,W,H,j,G,R,U,V,q,Z,Y,Q;return r=this.a,W=function(e){return e*e},z=e.source,q=e.target,r.conf.curvedEdges?(p=1.7*r.conf.edgeWidth(),n=0.6*r.conf.edgeWidth(),I=n/2,A=2.4*I,P=r.conf.directedEdges?2*A:1e-4,Y=e.source.x-e.target.x,Q=e.source.y-e.target.y,m=h(W(Y)+W(Q)),U=0,V=0,G=e.source.radius,b=m,S=0,w=e.target.radius,f=b-U,O=(G+p)/(w+P+p),M=-f*O/(1-O),l=1.5,a=2*(l*A)/G,H=Math.cos(a)*(G+p),j=Math.sin(a)*(G+p),T=j/(H-M),F=j-T*H,L=b,t=1+W(T),o=2*(T*F-L),s=W(F)+W(L)-W(w+P+p),k=(-o-h(W(o)-4*t*s))/(2*t),E=(k-M)*T,N=-H/j,c=j+W(H)/j,D=-(k-b)/E,g=E+(k-b)*k/E,u=(c-g)/(D-N),y=N*u+c,i=h(W(u-H)+W(y-j)),R=function(e){var t,o,s;return s=0>e?-1:1,t=s*h(W(e)/(1+W(N))),o=N*t,""+(H+t)+", "+(j+o)},C=function(e){var t,o,s;return s=0>e?-1:1,t=s*h(W(e)/(1+W(D))),o=D*t,""+(k+t)+", "+(E+o)},x=function(e){var t,o,s;return s=0>e?-1:1,t=s*h(W(e)/(1+W(1/D))),o=t/D,""+(k+t)+", "+(E-o)},r.conf.directedEdges?"M "+R(-I)+" L "+R(I)+" A "+(i-I)+", "+(i-I)+" 0 0 0 "+C(-I)+" L "+C(-A)+" L "+x(P)+" L "+C(A)+" L "+C(I)+" A "+(i+I)+", "+(i+I)+" 0 0 1 "+R(-I)+" Z":"M "+R(-I)+" A "+(i-I)+", "+(i-I)+" 0 0 0 "+C(-I)):(p=r.conf.nodePadding,K=z.radius+p+z["stroke-width"]/2,Z=q.radius+p+q["stroke-width"]/2,Y=e.source.x-e.target.x,Q=e.source.y-e.target.y,v=h(W(Y)+W(Q)),r.conf.directedEdges?(P=2.4*r.conf.edgeWidth(),"M "+K+" 0 L "+(v-Z-P)+" 0 l 0 2 l "+P/2+" -2 l "+-P/2+" -2 L "+(v-Z-P)+" 0"):"M "+K+" 0 L "+(v-Z)+" 0")},styleLink:function(e){var t,o,s;return t=this.a,o=t.conf,s=t.drawing.DrawEdge,e.each(function(e){var o,d;return d=d3.select(this),o=s.edgeData(e),d.attr("transform","translate("+e.source.x+", "+e.source.y+") rotate("+s.edgeAngle(e)+")"),d.select(".edge-line").attr("d",function(){return s.edgeWalk(e)}()).attr("stroke-width",function(){return t.conf.edgeWidth}()).style(s.edgeStyle(e))})},classEdge:function(e){return e.classed("active",!0)},styleText:function(e){var t;return t=this.a.conf,e.select("text").each(function(e){var o,s,d,a,r,l=Math.pow;return a=e.source.x-e.target.x,r=e.source.y-e.target.y,d=h(l(a,2)+l(r,2)),{captionAngle:function(e){return-90>e||90<e?180:0}},o=d/2,s=2*-e["stroke-width"],d3.select(this).attr("dx",""+o).attr("dy",""+s).select(".textpath").text(e.caption).attr("xlink:xlink:href","#path-"+e.source.id+"-"+e.target.id).style("display",function(){if(t.edgeCaptionsOnByDefault)return"block"})})},setInteractions:function(e){var t;return t=this.a.interactions,e.on("click",t.edgeClick).on("mouseover",function(e){return t.edgeMouseOver(e)}).on("mouseout",function(e){return t.edgeMouseOut(e)})}}},d=function(e){return{a:e,createEdge:function(e){var t,o;return o=this.a.drawing.DrawEdge,t=this.a.vis.selectAll("g.edge").data(e),t.enter().append("g").attr("id",function(e){return"edge-"+e.id+"-"+e.pos}).attr("class",function(e){return"edge "+e.edgeType}).attr("source-target",function(e){return""+e.source.id+"-"+e.target.id}),o.createLink(t),o.classEdge(t),o.styleLink(t),o.styleText(t),o.setInteractions(t),t.exit().remove()},updateEdge:function(e){var t,o;return t=this.a.drawing.DrawEdge,o=this.a.vis.select("#edge-"+e.id+"-"+e.pos),t.classEdge(o),t.styleLink(o),t.styleText(o),t.setInteractions(o)}}},a=function(e){return{a:e,styleText:function(e){var t,o,s;return t=this.a.conf,s=this.a.drawing.NodeUtils,o=this.a._nodes,e.selectAll("text").attr("dy",function(e){return o[e.id].getProperties().root?t.rootNodeRadius/2:2*t.nodeRadius-5}).attr("visibility",function(e){return"hidden"===o[e.id]._state?"hidden":"visible"}).text(function(e){return s.nodeText(e)}).style("display",function(){if(t.nodeCaptionsOnByDefault)return"block"})},createNode:function(e){return e=_.difference(e,e.select("circle").data()),e.__proto__=d3.select().__proto__,e.append("circle").attr("id",function(e){return"circle-"+e.id}),e.append("svg:text").attr("id",function(e){return"text-"+e.id})},styleNode:function(e){var t;return t=this.a.drawing.NodeUtils,e.selectAll("circle").attr("r",function(e){return"function"===typeof e.radius?e.radius():e.radius}).each(function(e){return d3.select(this).style(t.nodeStyle(e))})},setInteractions:function(e){var t,o,s,d,a,r,l;return(t=this.a.conf,o=this.a.interactions,d="editor"===this.a.get.state("interactions"),s=d3.behavior.drag().origin(Object).on("dragstart",null).on("drag",null).on("dragend",null),d)?(a=new this.a.editor.Interactions,e.on("mouseup",function(e){return a.nodeMouseUp(e)}).on("mouseover",function(e){return a.nodeMouseOver(e)}).on("mouseout",function(e){return a.nodeMouseOut(e)}).on("dblclick",function(e){return o.nodeDoubleClick(e)}).on("click",function(e){return a.nodeClick(e)})):(e.on("mouseup",null).on("mouseover",function(e){return o.nodeMouseOver(e)}).on("mouseout",function(e){return o.nodeMouseOut(e)}).on("dblclick",function(e){return o.nodeDoubleClick(e)}).on("click",function(e){return o.nodeClick(e)}),s=d3.behavior.drag().origin(Object).on("dragstart",o.nodeDragStarted).on("drag",o.nodeDragged).on("dragend",o.nodeDragended),t.fixNodes||(r=e.filter(function(e){return!0!==e.root}),r.call(s)),!t.fixRootNodes)?(l=e.filter(function(e){return!0===e.root}),l.call(s)):void 0}}},r=function(e){return{a:e,createNode:function(e){var t,o;return t=this.a.drawing.DrawNode,o=this.a.vis.selectAll("g.node").data(e,function(e){return e.id}),o.enter().append("g").attr("class",function(e){var t;return t=e.self._nodeType,"node "+t+" active"}).attr("id",function(e){return"node-"+e.id}).classed("root",function(e){return e.root}),t.createNode(o),t.styleNode(o),t.styleText(o),t.setInteractions(o),o.exit().remove()},updateNode:function(e){var t,o;return t=this.a.drawing.DrawNode,o=this.a.vis.select("#node-"+e.id),t.styleNode(o),t.styleText(o),t.setInteractions(o)}}},t.prototype.NodeUtils=function(e){var t;return t=e,{nodeStyle:function(e){var o,s;return o=t.conf,s=e.self,o.cluster&&"hidden"!==s._state&&(e.fill=function(){var e,d,a,r,l,i,n;return d=t.layout._clustering,n=s.getProperties(),e=d.clusterMap,i=o.clusterKey,l=o.clusterColours,r=e[n[i]]%l.length,a=l[r],""+a}(e),e.stroke=e.fill),e},nodeText:function(e){var o,s,d;return(s=t.conf,d=t._nodes[e.id]._properties,s.nodeCaption&&"string"===typeof s.nodeCaption)?null==d[s.nodeCaption]?"":d[s.nodeCaption]:s.nodeCaption&&"function"===typeof s.nodeCaption?(o=s.nodeCaption(d),(void 0===o||"undefined"===o+"")&&(t.log.caption="At least one caption returned undefined",s.caption=!1),o):void 0}}},t.prototype.svgStyles=function(e){return{a:e,node:{a:this.a,populate:function(e){var t,o,s,d,a,r,l,i,n,c,p,g,u;return t=this.a.conf,s=_.omit(t.nodeStyle.all,"selected","highlighted","hidden"),o=e,g=function(e){return"function"===typeof e?e:function(){return e}},r=_.keys(t.nodeTypes)[0],a=e.getProperties()[r],void 0===t.nodeStyle[a]&&(a="all"),u=_.assign(_.cloneDeep(s),t.nodeStyle[a]),c=_.assign(u,t.nodeStyle[a][e._state]),l=g(c.radius),d=g(c.color),i=g(c.borderColor),n=g(c.borderWidth),p={},p.radius=l(o),p.fill=d(o),p.stroke=i(o),p["stroke-width"]=n(o,l(o)),p}},edge:{a:this.a,populate:function(e){var t,o,s,d,a,r,l,i,n,c;return o=this.a.conf,s=_.omit(o.edgeStyle.all,"selected","highlighted","hidden"),i=function(e){return"function"===typeof e?e:function(){return e}},d=e._edgeType,void 0===o.edgeStyle[d]&&(d="all"),n=_.assign(_.cloneDeep(s),o.edgeStyle[d]),r=_.assign(n,o.edgeStyle[d][e._state]),c=i(r.width),t=i(r.color),a=i(r.opacity),l={stroke:t(e),"stroke-width":c(e),opacity:a(e),fill:"none"},l},update:function(e){var t,o,s,d,a,r,l;return o=this.a.conf,d=e._style,r=function(e){return"function"===typeof e?e:function(){return e}},l=r(d.width),t=r(d.color),s=r(d.opacity),a={stroke:t(e),"stroke-width":l(e),opacity:s(e),fill:"none"},a}}}},l=function(){function e(){this.nodeEditor=f(this.nodeEditor,this),this.startEditor=f(this.startEditor,this),this.utils=new alchemy.editor.Utils}return e.prototype.editorContainerHTML="<div id=\"editor-header\" data-toggle=\"collapse\" data-target=\"#editor #element-options\">\n    <h3>Editor</h3><span class=\"fa fa-2x fa-caret-right\"></span>\n</div>\n<div id=\"element-options\" class=\"collapse\">\n    <ul class=\"list-group\"> \n        <li class=\"list-group-item\" id=\"remove\">Remove Selected</li> \n        <li class=\"list-group-item\" id=\"editor-interactions\">Editor mode enabled, click to disable editor interactions</li>\n    </ul>\n</div>",e.prototype.elementEditorHTML=function(e){return"<h4>"+e+" Editor</h4>\n<form id=\"add-property-form\">\n    <div id=\"add-property\">\n        <input class=\"form-control\" id=\"add-prop-key\" placeholder=\"New Property Name\">\n        <input class=\"form-control\" id=\"add-prop-value\" placeholder=\"New Property Value\">\n    </div>\n    <input id=\"add-prop-submit\" type=\"submit\" value=\"Add Property\" placeholder=\"add a property to this node\">\n</form>\n<form id=\"properties-list\">\n    <input id=\"update-properties\" type=\"submit\" value=\"Update Properties\">\n</form>"},e.prototype.startEditor=function(){var e,t,o,s,d;return e=alchemy.conf.divSelector,s=this.editorContainerHTML,t=alchemy.dash.select("#control-dash").append("div").attr("id","editor").html(s),t.select("#editor-header").on("click",function(){return alchemy.dash.select("#element-options").classed("in")?alchemy.dash.select("#editor-header>span").attr("class","fa fa-2x fa-caret-right"):alchemy.dash.select("#editor-header>span").attr("class","fa fa-2x fa-caret-down")}),o=t.select("#element-options ul #editor-interactions").on("click",function(){return d3.select(this).attr("class",function(){return"editor"===alchemy.get.state()?(alchemy.set.state("interactions","default"),"inactive list-group-item"):(alchemy.set.state("interactions","editor"),"active list-group-item")}).html(function(){return"editor"===alchemy.get.state()?"Disable Editor Interactions":"Enable Editor Interactions"})}),t.select("#element-options ul #remove").on("click",function(){return alchemy.editor.remove()}),d=this.utils,o.on("click",function(){return alchemy.dash.select("#editor-interactions").classed("active")?(d.disableEditor(),alchemy.dash.select("#editor-interactions").classed({active:!1,inactive:!0}).html("Editor mode disabled, click to enable editor interactions")):(d.enableEditor(),alchemy.dash.select("#editor-interactions").classed({active:!0,inactive:!1}).html("Editor mode enabled, click to disable editor interactions"))})},e.prototype.nodeEditor=function(e){var t,o,s,d,a,r,l,i,n,c,p,g;for(n in o=alchemy.conf.divSelector,s=alchemy.dash.select("#control-dash #editor"),i=s.select("#element-options"),a=this.elementEditorHTML("Node"),d=i.append("div").attr("id","node-editor").html(a),d.attr("class",function(){var e;return e=alchemy.dash.select("#editor-interactions").classed("active"),e?"enabled":"hidden"}),t=s.select("#node-editor form #add-property"),t.select("#node-add-prop-key").attr("placeholder","New Property Name").attr("value",null),t.select("#node-add-prop-value").attr("placeholder","New Property Value").attr("value",null),alchemy.dash.select("#add-property-form").on("submit",function(){var e,t;return event.preventDefault(),e=alchemy.dash.select("#add-prop-key").property("value"),e=e.replace(/\s/g,"_"),t=alchemy.dash.select("#add-prop-value").property("value"),p(e,t,!0),alchemy.dash.selectAll("#add-property .edited-property").classed({"edited-property":!1}),this.reset()}),r=alchemy._nodes[e.id].getProperties(),alchemy.vis.select("#node-"+e.id).classed({editing:!0}),c=s.select("#node-editor #properties-list"),r)g=r[n],l=c.append("div").attr("id","node-"+n).attr("class","property form-inline form-group"),l.append("label").attr("for","node-"+n+"-input").attr("class","form-control property-name").text(""+n),l.append("input").attr("id","node-"+n+"-input").attr("class","form-control property-value").attr("value",""+g);return alchemy.dash.select("#properties-list").on("submit",function(){var e,t,o,s,d,a,r;for(event.preventDefault(),t=alchemy.dash.selectAll(".edited-property"),r=t[0],(d=0,a=r.length);d<a;d++)n=r[d],o=alchemy.dash.select(n),e=o.select("label").text(),s=o.select("input").attr("value"),p(e,s,!1);return alchemy.dash.selectAll("#node-properties-list .edited-property").classed({"edited-property":!1}),this.reset()}),d3.selectAll("#add-prop-key, #add-prop-value, .property").on("keydown",function(){return 13===d3.event.keyCode&&event.preventDefault(),d3.select(this).classed({"edited-property":!0})}),p=function(t,o,s){var d,a;return a=e.id,""!==t&&""!==o?(alchemy._nodes[a].setProperty(""+t,""+o),d=alchemy._drawNodes,d.updateNode(alchemy.viz.select("#node-"+a)),!0===s?(alchemy.dash.select("#node-add-prop-key").attr("value","property added/updated to key: "+t),alchemy.dash.select("#node-add-prop-value").attr("value","property at "+t+" updated to: "+o)):alchemy.dash.select("#node-"+t+"-input").attr("value","property at "+t+" updated to: "+o)):!0===s?(alchemy.dash.select("#node-add-prop-key").attr("value","null or invalid input"),alchemy.dash.select("#node-add-prop-value").attr("value","null or invlid input")):alchemy.dash.select("#node-"+t+"-input").attr("value","null or invalid input")}},e.prototype.editorClear=function(){return alchemy.dash.selectAll(".node").classed({editing:!1}),alchemy.dash.selectAll(".edge").classed({editing:!1}),alchemy.dash.select("#node-editor").remove(),alchemy.dash.select("#edge-editor").remove(),alchemy.dash.select("#node-add-prop-submit").attr("placeholder",function(){return alchemy.vis.selectAll(".selected").empty()?"select a node or edge to edit properties":"add a property to this element"})},e.prototype.edgeEditor=function(t){var e,o,s,d,a,r,l,i,n,c,p,g;for(n in o=alchemy.conf.divSelector,a=alchemy.dash("#control-dash #editor"),i=a.select("#element-options"),l=this.elementEditorHTML("Edge"),r=i.append("div").attr("id","edge-editor").html(l),r.attr("class",function(){return alchemy.dash.select("#editor-interactions").classed("active")?"enabled":"hidden"}),e=a.select("#edge-editor form #add-property"),e.select("#add-prop-key").attr("placeholder","New Property Name").attr("value",null),e.select("#add-prop-value").attr("placeholder","New Property Value").attr("value",null),s=alchemy._edges[t.id].getProperties(),alchemy.vis.select("#edge-"+t.id).classed({editing:!0}),c=a.select("#edge-editor #properties-list"),s)g=s[n],d=c.append("div").attr("id","edge-"+n).attr("class","property form-inline form-group"),d.append("label").attr("for","edge-"+n+"-input").attr("class","form-control property-name").text(""+n),d.append("input").attr("id","edge-"+n+"-input").attr("class","form-control property-value").attr("value",""+g);return alchemy.dash.selectAll("#add-prop-key, #add-prop-value, .property").on("keydown",function(){return 13===d3.event.keyCode&&event.preventDefault(),d3.select(this).classed({"edited-property":!0})}),alchemy.dash.select("#add-property-form").on("submit",function(){var e,t;return event.preventDefault(),e=alchemy.dash.select("#add-prop-key").property("value"),e=e.replace(/\s/g,"_"),t=alchemy.dash.select("#add-prop-value").property("value"),p(e,t,!0),alchemy.dash.selectAll("#add-property .edited-property").classed({"edited-property":!1}),this.reset()}),d3.select("#properties-list").on("submit",function(){var e,t,o,s,d,a,r;for(event.preventDefault(),t=alchemy.dash.selectAll(".edited-property"),r=t[0],(d=0,a=r.length);d<a;d++)n=r[d],o=alchemy.dash.select(n),e=o.select("label").text(),s=o.select("input").property("value"),p(e,s,!1);return alchemy.dash.selectAll("#properties-list .edited-property").classed({"edited-property":!1}),this.reset()}),p=function(e,o,s){var d,a,r;return a=t.id,""!==e&&""!==o?(alchemy._edges[a].setProperty(""+e,""+o),r=alchemy.vis.select("#edge-"+a),d=new alchemy.drawing.DrawEdges,d.updateEdge(alchemy.vis.select("#edge-"+a)),!0===s?(alchemy.dash.select("#add-prop-key").attr("value","property added/updated to key: "+e),alchemy.dash.select("#add-prop-value").attr("value","property at "+e+" updated to: "+o)):alchemy.dash.select("#edge-"+e+"-input").attr("value","property at "+e+" updated to: "+o)):!0===s?(alchemy.dash.select("#add-prop-key").attr("value","null or invalid input"),alchemy.dash.select("#add-prop-value").attr("value","null or invlid input")):alchemy.dash.select("#edge-"+e+"-input").attr("value","null or invalid input")}},e}(),i=function(){function e(){this.reset=f(this.reset,this),this.deleteSelected=f(this.deleteSelected,this),this.addNodeDragended=f(this.addNodeDragended,this),this.addNodeDragging=f(this.addNodeDragging,this),this.addNodeStart=f(this.addNodeStart,this),this.edgeClick=f(this.edgeClick,this),this.nodeClick=f(this.nodeClick,this),this.nodeMouseUp=f(this.nodeMouseUp,this),this.editor=new alchemy.editor.Editor}return e.prototype.nodeMouseOver=function(){var e;return d3.select(this).select("circle").empty()||(e=d3.select(this).select("circle").attr("r"),d3.select(this).select("circle").attr("r",3*e)),this},e.prototype.nodeMouseUp=function(e){return this.sourceNode===e?this.click=!0:(this.mouseUpNode=!0,this.targetNode=e,this.click=!1),this},e.prototype.nodeMouseOut=function(){var e;return d3.select(this).select("circle").empty()||(e=d3.select(this).select("circle").attr("r"),d3.select(this).select("circle").attr("r",e/3)),this},e.prototype.nodeClick=function(e){var t;return d3.event.stopPropagation(),alchemy.vis.select("#node-"+e.id).empty()||(t=alchemy.vis.select("#node-"+e.id).classed("selected"),alchemy.vis.select("#node-"+e.id).classed("selected",!t)),this.editor.editorClear(),this.editor.nodeEditor(e)},e.prototype.edgeClick=function(t){return d3.event.stopPropagation(),this.editor.editorClear(),this.editor.edgeEditor(t)},e.prototype.addNodeStart=function(e){return d3.event.sourceEvent.stopPropagation(),this.sourceNode=e,alchemy.vis.select("#dragline").classed({hidden:!1}),this},e.prototype.addNodeDragging=function(){var e,t;return e=d3.event.x,t=d3.event.y,alchemy.vis.select("#dragline").attr("x1",this.sourceNode.x).attr("y1",this.sourceNode.y).attr("x2",e).attr("y2",t).attr("style","stroke: #FFF"),this},e.prototype.addNodeDragended=function(){var e,t,o;return this.click||(!this.mouseUpNode&&(e=alchemy.vis.select("#dragline"),t=e.attr("x2"),o=e.attr("y2"),this.targetNode={id:""+_.uniqueId("addedNode_"),x:parseFloat(t),y:parseFloat(o),caption:"node added"}),this.newEdge={id:""+this.sourceNode.id+"-"+this.targetNode.id,source:this.sourceNode.id,target:this.targetNode.id,caption:"edited"},alchemy.editor.update(this.targetNode,this.newEdge)),this.reset(),this},e.prototype.deleteSelected=function(){switch(d3.event.keyCode){case 8:case 46:if("INPUT"!==d3.select(d3.event.target).node().tagName)return d3.event.preventDefault(),alchemy.editor.remove();}},e.prototype.reset=function(){return this.mouseUpNode=null,this.sourceNode=null,this.targetNode=null,this.newEdge=null,this.click=null,alchemy.vis.select("#dragline").classed({hidden:!0}).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0),this},e,e}(),n=function(){function e(){this.enableEditor=f(this.enableEditor,this),this.drawNodes=alchemy._drawNodes,this.drawEdges=alchemy._drawEdges}return e.prototype.enableEditor=function(){var e,t,o;if(alchemy.set.state("interactions","editor"),e=alchemy.vis.append("line").attr("id","dragline"),this.drawNodes.updateNode(alchemy.node),this.drawEdges.updateEdge(alchemy.edge),o=alchemy.vis.selectAll(".selected"),t=new alchemy.editor.Editor,!o.empty()&&1===o.length){if(o.classed("node"))return t.nodeEditor(o.datum()),alchemy.dash.select("#node-editor").attr("class","enabled").style("opacity",1);if(o.classed("edge"))return t.edgeEditor(o.datum()),alchemy.dash.select("#edge-editor").attr("class","enabled").style("opacity",1)}else return o.classed({selected:!1})},e.prototype.disableEditor=function(){return alchemy.setState("interactions","default"),alchemy.vis.select("#dragline").remove(),alchemy.dash.select("#node-editor").transition().duration(300).style("opacity",0),alchemy.dash.select("#node-editor").transition().delay(300).attr("class","hidden"),this.drawNodes.updateNode(alchemy.node),alchemy.vis.selectAll(".node").classed({selected:!1})},e.prototype.remove=function(){var e,t,o,s,d,a,r,l,i,n,c,p;for(d=alchemy.vis.selectAll(".selected.node"),n=d[0],p=[],(a=0,l=n.length);a<l;a++)if(t=n[a],o=alchemy.vis.select(t).data()[0].id,s=alchemy._nodes[o],null!=s){for(c=s.adjacentEdges,r=0,i=c.length;r<i;r++)e=c[r],alchemy._edges=_.omit(alchemy._edges,""+e.id+"-"+e._index),alchemy.edge=alchemy.edge.data(_.map(alchemy._edges,function(t){return t._d3}),function(t){return t.id}),alchemy.vis.select("#edge-"+e.id+"-"+e._index).remove();alchemy._nodes=_.omit(alchemy._nodes,""+o),alchemy.node=alchemy.node.data(_.map(alchemy._nodes,function(e){return e._d3}),function(e){return e.id}),alchemy.vis.select(t).remove(),"editor"===alchemy.get.state("interactions")?p.push(alchemy.modifyElements.nodeEditorClear()):p.push(void 0)}else p.push(void 0);return p},e.prototype.addNode=function(e){var t;return t=alchemy._nodes[e.id]=new alchemy.models.Node({id:""+e.id}),t.setProperty("caption",e.caption),t.setD3Property("x",e.x),t.setD3Property("y",e.y),alchemy.node=alchemy.node.data(_.map(alchemy._nodes,function(e){return e._d3}),function(e){return e.id})},e.prototype.addEdge=function(e){var t;return t=alchemy._edges[e.id]=new alchemy.models.Edge(e),alchemy.edge=alchemy.edge.data(_.map(alchemy._edges,function(t){return t._d3}),function(t){return t.id})},e.prototype.update=function(e,t){return this.mouseUpNode?(alchemy.editor.addEdge(t),this.drawEdges.createEdge(alchemy.edge)):(alchemy.editor.addNode(e),alchemy.editor.addEdge(t),this.drawEdges.createEdge(alchemy.edge),this.drawNodes.createNode(alchemy.node)),alchemy.layout.tick()},e}(),t.prototype.Edge=function(e){var t;return t=function(){function t(t,o){var s;null==o&&(o=null),this.allNodesActive=f(this.allNodesActive,this),this.setProperties=f(this.setProperties,this),this.getStyles=f(this.getStyles,this),this.setProperties=f(this.setProperties,this),this.getProperties=f(this.getProperties,this),this._setID=f(this._setID,this),this._setD3Properties=f(this._setD3Properties,this),this.a=e,s=this.a.conf,this.id=this._setID(t),this._index=o,this._state="active",this._properties=t,this._edgeType=this._setEdgeType(),this._style=null==s.edgeStyle[this._edgeType]?_.clone(s.edgeStyle.all):_.merge(_.clone(s.edgeStyle.all),s.edgeStyle[this._edgeType]),this._d3=_.merge({id:this.id,pos:this._index,edgeType:this._edgeType,source:this.a._nodes[this._properties.source]._d3,target:this.a._nodes[this._properties.target]._d3,self:this},this.a.svgStyles.edge.populate(this)),this._setCaption(t,s),this.a._nodes[""+t.source]._addEdge(this),this.a._nodes[""+t.target]._addEdge(this)}return t.prototype._setD3Properties=function(e){return _.merge(this._d3,e)},t.prototype._setID=function(t){return null==t.id?""+t.source+"-"+t.target:t.id},t.prototype._setCaption=function(e,t){var o,s;if(o=t.edgeCaption,s=function(e){switch(typeof o){case"string":return e[o];case"function":return o(e);}}(e),s)return this._d3.caption=s},t.prototype._setEdgeType=function(){var e,t,o;return e=this.a.conf,e.edgeTypes&&(_.isPlainObject(e.edgeTypes)?(o=Object.keys(this.a.conf.edgeTypes),t=this._properties[o]):_.isArray(e.edgeTypes)?t=this._properties.caption:"string"===typeof e.edgeTypes&&(t=this._properties[e.edgeTypes])),void 0===t&&(t="all"),this._setD3Properties("edgeType",t),t},t.prototype.getProperties=function(){var e,t,o;return e=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],null==e&&(e=null),null==e&&0===t.length?this._properties:0===t.length?this._properties[e]:(o=_.union([e],t),_.pick(this._properties,o))},t.prototype.setProperties=function(e,t){return null==t&&(t=null),_.isPlainObject(e)?(_.assign(this._properties,e),"source"in e&&this._setD3Properties({source:alchemy._nodes[e.source]._d3}),"target"in e&&this._setD3Properties({target:alchemy._nodes[e.target]._d3})):(this._properties[e]=t,("source"===e||"target"===e)&&this._setD3Properties({property:alchemy._nodes[t]._d3})),this},t.prototype.getStyles=function(){var e,t,o;return t=arguments[0],o=2<=arguments.length?y.call(arguments,1):[],e=this,void 0===t?e._style:_.map(arguments,function(t){return e._style[t]})},t.prototype.setProperties=function(e,t){return null==t&&(t=null),_.isPlainObject(e)?(_.assign(this._properties,e),"source"in e&&this._setD3Properties({source:this.a._nodes[e.source]._d3}),"target"in e&&this._setD3Properties({target:this.a._nodes[e.target]._d3})):(this._properties[e]=t,("source"===e||"target"===e)&&this._setD3Properties({property:this.a._nodes[t]._d3})),this},t.prototype.setStyles=function(e,t){return null==t&&(t=null),void 0===e?e=this.a.svgStyles.edge.populate(this):_.isPlainObject(e)?_.assign(this._style,e):this._style[e]=t,this._setD3Properties(this.a.svgStyles.edge.update(this)),this.a._drawEdges.updateEdge(this._d3),this},t.prototype.toggleHidden=function(){return this._state="hidden"===this._state?"active":"hidden",this.setStyles()},t.prototype.allNodesActive=function(){var e,t,o,s;return e=this._properties.source,o=this._properties.target,t=alchemy.get.nodes(e)[0],s=alchemy.get.nodes(o)[0],"active"===t._state&&"active"===s._state},t.prototype.remove=function(){var t,e;return t=this,delete this.a._edges[t.id],null!=this.a._nodes[t._properties.source]&&_.remove(this.a._nodes[t._properties.source]._adjacentEdges,function(o){if(o.id===t.id)return o}),null!=this.a._nodes[t._properties.target]&&_.remove(this.a._nodes[t._properties.target]._adjacentEdges,function(o){if(o.id===t.id)return o}),this.a.vis.select("#edge-"+t.id+"-"+t._index).remove(),e=_.filter(this.a.force.links(),function(e){if(e.id!==t.id)return e}),this.a.force.links(e)},t}()},t.prototype.Node=function(e){var t;return t=function(){function t(t){this.getStyles=f(this.getStyles,this),this.setProperty=f(this.setProperty,this),this.getProperties=f(this.getProperties,this),this._setD3Properties=f(this._setD3Properties,this),this._setNodeType=f(this._setNodeType,this);var o;this.a=e,o=this.a.conf,this.id=t.id,this._properties=t,this._d3=_.merge({id:this.id,root:this._properties[o.rootNodes],self:this},this.a.svgStyles.node.populate(this)),this._nodeType=this._setNodeType(),this._style=o.nodeStyle[this._nodeType]?o.nodeStyle[this._nodeType]:o.nodeStyle.all,this._state="active",this._adjacentEdges=[]}return t.prototype._setNodeType=function(){var e,t,o,s;return e=this.a.conf,e.nodeTypes&&(_.isPlainObject(e.nodeTypes)?(t=Object.keys(this.a.conf.nodeTypes),s=_.values(e.nodeTypes),o=this._properties[t]):"string"===typeof e.nodeTypes&&(o=this._properties[e.nodeTypes])),void 0===o&&(o="all"),this._setD3Properties("nodeType",o),o},t.prototype._setD3Properties=function(e){return _.merge(this._d3,e)},t.prototype._addEdge=function(e){return this._adjacentEdges=_.union(this._adjacentEdges,[e])},t.prototype.getProperties=function(){var e,t,o;return e=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],null==e&&(e=null),null==e&&0===t.length?this._properties:0===t.length?this._properties[e]:(o=_.union([e],t),_.pick(this._properties,o))},t.prototype.setProperty=function(e,t){return null==t&&(t=null),_.isPlainObject(e)?_.assign(this._properties,e):this._properties[e]=t,this},t.prototype.removeProperty=function(){var e,t,o,s,d;for(o=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],(s=0,d=arguments.length);s<d;s++)e=arguments[s],delete this._properties[e];return this},t.prototype.getStyles=function(){var e,t,o;return e=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],o=this,void 0===e?o._style:_.map(arguments,function(e){return o._style[e]})},t.prototype.setStyles=function(e,t){return null==t&&(t=null),void 0===e?e=this.a.svgStyles.node.populate(this):_.isPlainObject(e)?_.assign(this._style,e):this._style[e]=t,this._setD3Properties(this.a.svgStyles.node.populate(this)),this.a._drawNodes.updateNode(this._d3),this},t.prototype.toggleHidden=function(){var t;return t=this.a,this._state="hidden"===this._state?"active":"hidden",this.setStyles(),_.each(this._adjacentEdges,function(o){var e,s,d,a,r;return(r=o.id.split("-"),e=r[0],d=r[1],s=t._nodes[""+e]._state,a=t._nodes[""+d]._state,"hidden"===o._state&&"active"===s&&"active"===a)?o.toggleHidden():"active"===o._state&&("hidden"===s||"hidden"===a)?o.toggleHidden():void 0})},t.prototype.outDegree=function(){return this._adjacentEdges.length},t.prototype.remove=function(){for(;!_.isEmpty(this._adjacentEdges);)this._adjacentEdges[0].remove();return delete this.a._nodes[this.id],this.a.vis.select("#node-"+this.id).remove()},t}()},t.prototype.plugins=function(e){return{init:function(){return _.each(_.keys(e.conf.plugins),function(o){if(e.plugins[o]=t.prototype.plugins[o](e),null!=e.plugins[o].init)return e.plugins[o].init()})}}},t.prototype.themes={default:{backgroundColour:"#000000",nodeStyle:{all:{radius:function(){return 10},color:function(){return"#68B9FE"},borderColor:function(){return"#127DC1"},borderWidth:function(e,t){return t/3},captionColor:function(){return"#FFFFFF"},captionBackground:function(){return null},captionSize:12,selected:{color:function(){return"#FFFFFF"},borderColor:function(){return"#349FE3"}},highlighted:{color:function(){return"#EEEEFF"}},hidden:{color:function(){return"none"},borderColor:function(){return"none"}}}},edgeStyle:{all:{width:4,color:"#CCC",opacity:0.2,directed:!0,curved:!0,selected:{opacity:1},highlighted:{opacity:1},hidden:{opacity:0}}}},white:{theme:"white",backgroundColour:"#FFFFFF",nodeStyle:{all:{radius:function(){return 10},color:function(){return"#68B9FE"},borderColor:function(){return"#127DC1"},borderWidth:function(e,t){return t/3},captionColor:function(){return"#FFFFFF"},captionBackground:function(){return null},captionSize:12,selected:{color:function(){return"#FFFFFF"},borderColor:function(){return"38DD38"}},highlighted:{color:function(){return"#EEEEFF"}},hidden:{color:function(){return"none"},borderColor:function(){return"none"}}}},edgeStyle:{all:{width:4,color:"#333",opacity:0.4,directed:!1,curved:!1,selected:{color:"#38DD38",opacity:0.9},highlighted:{color:"#383838",opacity:0.7},hidden:{opacity:0}}}}},t.prototype.exports=function(e){var t;return t=e,{init:function(){return t.exports.show()},show:function(){return t.dash.select("#all-exports").append("li").attr({class:"list-group-item active-label toggle"}).html("SVG").on("click",function(){var e,o,s,d,a;return s=d3.select(""+t.conf.divSelector+" svg").node(),o=new XMLSerializer().serializeToString(s),d="data:image/svg+xml;utf8,"+o,e=d.replace("xlink:",""),a=window.open(e),a.focus()})}}},u=function(){function e(e){this.dataWarning=f(this.dataWarning,this),this.a=e}return e.prototype.dataWarning=function(){return this.a.conf.dataWarning&&"function"===typeof this.a.conf.dataWarning?this.a.conf.dataWarning():"default"===this.a.conf.dataWarning?console.log("No dataSource was loaded"):void 0},e.prototype.divWarning=function(){return"create an element that matches the value for 'divSelector' in your conf.\nFor instance, if you are using the default 'divSelector' conf, simply provide\n<div id='#alchemy'></div>."},e}()}).call(this);</script><link rel="import" href="frag-footer.html"></div><dom-module id="dhc-book-results"><template><style include=" shared-styles iron-flex iron-flex-alignment">:host{--paper-button-color:#E0E0E0;}.container{@apply --layout-horizontal;}#result-entry-wrapper{width:100%;height:calc(100% - 60px);}.result-item-info{height:280px;display:flex;flex-direction:row;justify-content:space-between;border:1px solid #E0E0E0;align-items:center;}#result-item-image{box-shadow:0px 4px 4px rgba(0,0,0,0.25);}.book-info-text{padding-left:60px;}.image-wrapper{padding-left:57px;}.book-info{width:100%;display:flex;flex-direction:row;}.heart-icon{height:45px;width:45px;color:rgb(223, 80, 80);}#result-item-menu{width:280px;height:100%;font-size:24px;border:1px solid #E0E0E0;display:flex;flex-direction:column;border-top:none;border-bottom:none;}#result-item-view-profile{width:100%;height:33.3%;padding:0px;border-top:none;}#result-item-request{padding:0px;width:50%;height:33.3%;}#result-paired-buttons{display:flex;}#result-item-like{padding:0px;width:50%;height:33.3%;}#result-item-share{width:100%;height:34%;border-top:none;}.paper-metadata{flex-grow:1;margin-left:50px;display:flex;flex-direction:column;justify-content:center;}.paper-metadata > h2{margin:0px;}.paper-metadata > h4{margin:0px;}h1{margin-bottom:5px;}h2{margin-bottom:5px;}paper-button{margin:0px;box-shadow:none;border:1px solid grey;}paper-button[focused].btn-attached{background:#2D9CDB;color:whitesmoke;}a{text-decoration:none;}.toggler{margin-left:15%;}.btn-attached{margin:0;padding:0;box-shadow:0px 4px 4px rgba(0,0,0,0.25);color:#333333;width:93px;height:30px;border:none;background-color:#E0E0E0;}.q-btn{margin-top:10px;margin-bottom:10px;padding:0;box-shadow:0px 4px 4px rgba(0,0,0,0.25);color:#333333;width:100px;height:30px;border:none;background-color:#E0E0E0;}</style><app-route route="{{route}}" pattern="/:search" data="{{routeData}}"></app-route><app-location route="{{route}}"></app-location><iron-ajax method="POST" id="npost" url="/api/neo4j/" handle-as="json" on-response="_handleResponse" content-type="application/json" debounce-duration="300"></iron-ajax><iron-ajax method="POST" id="addlike" url="/api/update_saved_content/" handle-as="json" on-response="_handleResponse" content-type="application/json" debounce-duration="300"></iron-ajax><div class="btn-wrapper"><div class="toggler"><paper-button class="btn-attached" id="list-btn" on-click="_showList">List</paper-button><paper-button class="btn-attached" id="graph-btn" on-click="_showGraph">Graph</paper-button><paper-button class="q-btn" on-click="_addSavedQuery">Save Query</paper-button></div></div><template is="dom-if" if="{{!isList}}">Showing alchemy JS</template><template is="dom-if" if="{{isList}}"><template is="dom-if" if="{{!searchDataLoaded}}">Loading...</template><template is="dom-if" if="{{noResults}}">NO RESULTS FOUND</template><template is="dom-if" if="{{searchDataLoaded}}"><div id="result-entry-wrapper" class="border-color"><template is="dom-repeat" items="[[searchData.records]]"><div class="result-item-info border-color"><div class="book-info"><div class="image-wrapper"><img id="result-item-image" class="border-color" src="../images/no_cover_150_248.png"></div><template is="dom-repeat" items="{{item._fields}}" as="field"><div class="book-info-text"><h1>{{field.properties.title}}</h1><h2>{{field.properties.author}}</h2><h2>Publisher: {{field.properties.publisher}}</h2><h2>Originally Published: {{field.properties.year}}</h2></div></template></div><div id="result-item-menu" class="border-color"><a href="/book-profile/{{item.name}}"><paper-button on-click="" id="result-item-view-profile" selbook="{{item}}" class="border-color">View Full Profile</paper-button></a><div id="result-paired-buttons"><paper-button id="result-item-request" class="border-color">Request</paper-button><paper-button id="result-item-like" title="heart" on-click="_addFavBook" book="{{item}}" class="border-color"><iron-icon class="heart-icon" icon="favorite"></iron-icon></paper-button></div><paper-button id="result-item-share" class="border-color">Share</paper-button></div></div></template></div></template></template><frag-footer></frag-footer></template><script>class dhcBookResults extends Polymer.Element{static get is(){return"dhc-book-results"}static get properties(){return{route:{type:Object,observer:"_resultPageChanged"},searchparams:{type:Object,notify:!0},searchData:{type:Object},searchDataLoaded:{type:Boolean,value:!1},noResults:{type:Boolean,value:!1},isList:{type:Boolean,value:!0}}}ready(){super.ready()}_resultPageChanged(){this.route.path.includes("/book-results/")&&(this.set("noResults",!1),this.set("searchData",{}),this.set("searchDataLoaded",!1),this.set("isList",!0),this._fireSearchPost())}_wait_on_value(){if(void 0!==this.searchparams)return void this._fireSearchPost()}_showGraph(){alchemy=new Alchemy({dataSource:"../data/charlize.json"}),this.set("isList",!1)}_showList(){this.set("isList",!0)}_addFavBook(a){console.log(a),this.dispatchEvent(new CustomEvent("send-user-data",{bubbles:!0,composed:!0,detail:{keyword:"favorites",content:a.path[0].book}}))}_addSavedQuery(){this.dispatchEvent(new CustomEvent("send-user-data",{bubbles:!0,composed:!0,detail:{keyword:"saved_searches",content:this.searchparams}}))}_fireSearchPost(){console.log(this.searchparams.keyword),this.$.npost.body={advanced:!1,basic_query:this.searchparams.keyword,terms:{},limit:25},console.log(this.$.npost.body),this.$.npost.generateRequest()}_fireSaveSelected(a){this.dispatchEvent(new CustomEvent("send-user-data",{bubbles:!0,composed:!0,detail:a.path[0].selbook}))}_handleResponse(a){this.set("searchData",a.detail.response),console.log(a.detail.response),this.set("searchDataLoaded",!0),this.searchData.records&&0<this.searchData.records.length?this.set("noResults",!1):this.set("noResults",!0)}}window.customElements.define(dhcBookResults.is,dhcBookResults);</script></dom-module></body></html>