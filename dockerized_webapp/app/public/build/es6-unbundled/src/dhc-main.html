<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-route/app-location.html"><link rel="import" href="../bower_components/app-route/app-route.html"><link rel="import" href="../bower_components/iron-pages/iron-pages.html"><link rel="import" href="data-login.html"><link rel="lazy-import" href="dhc-login.html"><link rel="import" href="dhc-home.html"><link rel="lazy-import" href="dhc-404.html"><link rel="lazy-import" href="dhc-help.html"><link rel="lazy-import" href="dhc-book-results.html"><link rel="lazy-import" href="dhc-user-account.html"><link rel="lazy-import" href="dhc-book-profile.html"><link rel="import" href="data-search.html"><link rel="import" href="frag-header.html"></head><body><dom-module id="dhc-main"><template><style include="shared-styles">:host{position:fixed;height:100vh;width:100vw;}app-header{height:60px;}</style><iron-ajax method="POST" id="updateinfo" url="/api/update_saved_content/" handle-as="json" on-response="_handleResponse" content-type="application/json" debounce-duration="300"></iron-ajax><data-login id="userData" user="{{user}}"></data-login><data-search id="searchdatacomp" selectedbook="{{selectedbook}}" searchparams="{{searchparams}}"></data-search><app-location route="{{route}}" url-space-regex="^[[rootPath]]"></app-location><app-route route="{{route}}" pattern="[[rootPath]]:page" data="{{routeData}}" tail="{{subroute}}"></app-route><app-header><frag-header user="[[user]]"></frag-header></app-header><iron-pages selected="[[page]]" attr-for-selected="name" fallback-selection="404" role="main"><dhc-home name="home" user="{{user}}"></dhc-home><dhc-help name="help" user="[[user]]"></dhc-help><dhc-login name="login" user="{{user}}"></dhc-login><dhc-user-account name="user-account"></dhc-user-account><dhc-404 name="404"></dhc-404><dhc-create-account name="create-account" user="{{user}}"></dhc-create-account><dhc-book-results name="book-results" route="{{subroute}}" searchparams="{{searchparams}}"></dhc-book-results><dhc-book-profile name="book-profile" selectedbook="{{selectedbook}}" route="{{subroute}}"></dhc-book-profile></iron-pages></template><script>class dhcMain extends Polymer.Element{static get is(){return'dhc-main'}static get properties(){return{page:{type:String,reflectToAttribute:!0,observer:'_pageChanged'},routeData:Object,subroute:String,rootPath:String}}ready(){super.ready(),this.addEventListener('update-user',(a)=>this._onUpdateUserData(a)),this.addEventListener('update-search',(a)=>this._onUpdateSearchData(a)),this.addEventListener('send-user-data',(a)=>this._onSendUserData(a)),this.addEventListener('set-selected-book',(a)=>this._onSetSelectedBook(a))}static get observers(){return['_routePageChanged(routeData.page)']}_onSetSelectedBook(a){this.$.selectedbook.updateSelectedBook(a.detail)}_onSendUserData(a){this.$.updateinfo.body=a.detail,this.$.updateinfo.generateRequest()}_routePageChanged(a){this.page=a||'home',this._setIsHome(a)}_pageChanged(a){var b=this.resolveUrl('dhc-'+a+'.html');Polymer.importHref(b,null,this._showPage404.bind(this),!0)}_setIsHome(a){this.routeData.isHome='home'===a||''===a}_showPage404(){this.page='404'}_onUpdateUserData(a){this.$.userData.updateUser(a.detail)}_onUpdateSearchData(a){this.$.searchdatacomp.updateSearch(a.detail)}}window.customElements.define(dhcMain.is,dhcMain);</script></dom-module></body></html>