<html><head></head><body><div hidden="" by-polymer-bundler=""><link rel="import" href="frag-header.html"><link rel="import" href="frag-footer.html"><link rel="import" href="crypto-import.html"></div><dom-module id="dhc-login"><template><style include="shared-styles iron-flex iron-flex-alignment">.container{@apply --layout-horizontal;}#login-box{min-height:600px;min-width:500px;box-shadow:0px 4px 4px  rgba(0, 0, 0, 0.25);}#inner-flex{padding:20px;}</style><app-location route="{{route}}"></app-location><div class="container"><div id="login-box"><div id="inner-flex"><h1>DHC</h1><h2>Login</h2><paper-input placeholder="Username" value="{{username}}"></paper-input><paper-input placeholder="Password" type="password" value="{{password}}"></paper-input><paper-button on-click="_user_login">Login</paper-button><a href="[[rootPath]]create-account">Create Account</a></div><template is="dom-if" if="[[!valid]]"><p>{{errorMessage}}</p></template><iron-ajax method="POST" id="addj" url="/api/get_user" handle-as="json" on-response="_handle_response" content-type="application/json" debounce-duration="300"></iron-ajax></div></div><frag-footer></frag-footer></template><script>var dhcLogin=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_user_login',value:function(){var a={username:this.username,password:CryptoJS.SHA256(CryptoJS.SHA256(this.password).toString()+CryptoJS.SHA256(this.username).toString()).toString()};this.$.addj.body=a,this.$.addj.generateRequest()}},{key:'_handle_response',value:function(a){a.detail.response?a.detail.response.Error?(this.set('errorMessage',a.detail.response.Error),this.valid=!1):a.detail.response['Invalid Password']?(this.set('errorMessage',a.detail.response['Invalid Password']),this.valid=!1):(this.dispatchEvent(new CustomEvent('update-user',{bubbles:!0,composed:!0,detail:{user:a.detail.response}})),console.log(this.route.path),this.set('route.path','/home')):(this.valid=!1,this.set('errorMessage','Something went wrong...Sorry!'))}}],[{key:'is',get:function(){return'dhc-login'}},{key:'properties',get:function(){return{rootPath:String,errorMessage:String,valid:Boolean}}}]),b}(Polymer.Element);window.customElements.define(dhcLogin.is,dhcLogin);</script></dom-module></body></html>